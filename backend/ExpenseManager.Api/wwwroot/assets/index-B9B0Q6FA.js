var lv=n=>{throw TypeError(n)};var Jf=(n,t,e)=>t.has(n)||lv("Cannot "+e);var ye=(n,t,e)=>(Jf(n,t,"read from private field"),e?e.call(n):t.get(n)),Ms=(n,t,e)=>t.has(n)?lv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),Dn=(n,t,e,s)=>(Jf(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),Ns=(n,t,e)=>(Jf(n,t,"access private method"),e);var cv=(n,t,e,s)=>({set _(r){Dn(n,t,r,e)},get _(){return ye(n,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function ZS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tp={exports:{}},tl={};var uv;function nT(){if(uv)return tl;uv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:s,key:l,ref:r!==void 0?r:null,props:o}}return tl.Fragment=t,tl.jsx=e,tl.jsxs=e,tl}var hv;function sT(){return hv||(hv=1,tp.exports=nT()),tp.exports}var _=sT(),ep={exports:{}},Dt={};var dv;function iT(){if(dv)return Dt;dv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function E(M,X,nt){this.props=M,this.context=X,this.refs=A,this.updater=nt||w}E.prototype.isReactComponent={},E.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},E.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function T(){}T.prototype=E.prototype;function R(M,X,nt){this.props=M,this.context=X,this.refs=A,this.updater=nt||w}var O=R.prototype=new T;O.constructor=R,S(O,E.prototype),O.isPureReactComponent=!0;var D=Array.isArray;function z(){}var N={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function H(M,X,nt){var ct=nt.ref;return{$$typeof:n,type:M,key:X,ref:ct!==void 0?ct:null,props:nt}}function V(M,X){return H(M.type,X,M.props)}function B(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function W(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(nt){return X[nt]})}var at=/\/+/g;function ot(M,X){return typeof M=="object"&&M!==null&&M.key!=null?W(""+M.key):X.toString(36)}function dt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(z,z):(M.status="pending",M.then(function(X){M.status==="pending"&&(M.status="fulfilled",M.value=X)},function(X){M.status==="pending"&&(M.status="rejected",M.reason=X)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function L(M,X,nt,ct,vt){var xt=typeof M;(xt==="undefined"||xt==="boolean")&&(M=null);var St=!1;if(M===null)St=!0;else switch(xt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(M.$$typeof){case n:case t:St=!0;break;case p:return St=M._init,L(St(M._payload),X,nt,ct,vt)}}if(St)return vt=vt(M),St=ct===""?"."+ot(M,0):ct,D(vt)?(nt="",St!=null&&(nt=St.replace(at,"$&/")+"/"),L(vt,X,nt,"",function(Zt){return Zt})):vt!=null&&(B(vt)&&(vt=V(vt,nt+(vt.key==null||M&&M.key===vt.key?"":(""+vt.key).replace(at,"$&/")+"/")+St)),X.push(vt)),1;St=0;var Jt=ct===""?".":ct+":";if(D(M))for(var jt=0;jt<M.length;jt++)ct=M[jt],xt=Jt+ot(ct,jt),St+=L(ct,X,nt,xt,vt);else if(jt=v(M),typeof jt=="function")for(M=jt.call(M),jt=0;!(ct=M.next()).done;)ct=ct.value,xt=Jt+ot(ct,jt++),St+=L(ct,X,nt,xt,vt);else if(xt==="object"){if(typeof M.then=="function")return L(dt(M),X,nt,ct,vt);throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return St}function $(M,X,nt){if(M==null)return M;var ct=[],vt=0;return L(M,ct,"","",function(xt){return X.call(nt,xt,vt++)}),ct}function it(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(nt){(M._status===0||M._status===-1)&&(M._status=1,M._result=nt)},function(nt){(M._status===0||M._status===-1)&&(M._status=2,M._result=nt)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var ft=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},_t={map:$,forEach:function(M,X,nt){$(M,function(){X.apply(this,arguments)},nt)},count:function(M){var X=0;return $(M,function(){X++}),X},toArray:function(M){return $(M,function(X){return X})||[]},only:function(M){if(!B(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Dt.Activity=m,Dt.Children=_t,Dt.Component=E,Dt.Fragment=e,Dt.Profiler=r,Dt.PureComponent=R,Dt.StrictMode=s,Dt.Suspense=h,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Dt.cache=function(M){return function(){return M.apply(null,arguments)}},Dt.cacheSignal=function(){return null},Dt.cloneElement=function(M,X,nt){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ct=S({},M.props),vt=M.key;if(X!=null)for(xt in X.key!==void 0&&(vt=""+X.key),X)!U.call(X,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&X.ref===void 0||(ct[xt]=X[xt]);var xt=arguments.length-2;if(xt===1)ct.children=nt;else if(1<xt){for(var St=Array(xt),Jt=0;Jt<xt;Jt++)St[Jt]=arguments[Jt+2];ct.children=St}return H(M.type,vt,ct)},Dt.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Dt.createElement=function(M,X,nt){var ct,vt={},xt=null;if(X!=null)for(ct in X.key!==void 0&&(xt=""+X.key),X)U.call(X,ct)&&ct!=="key"&&ct!=="__self"&&ct!=="__source"&&(vt[ct]=X[ct]);var St=arguments.length-2;if(St===1)vt.children=nt;else if(1<St){for(var Jt=Array(St),jt=0;jt<St;jt++)Jt[jt]=arguments[jt+2];vt.children=Jt}if(M&&M.defaultProps)for(ct in St=M.defaultProps,St)vt[ct]===void 0&&(vt[ct]=St[ct]);return H(M,xt,vt)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(M){return{$$typeof:u,render:M}},Dt.isValidElement=B,Dt.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:it}},Dt.memo=function(M,X){return{$$typeof:f,type:M,compare:X===void 0?null:X}},Dt.startTransition=function(M){var X=N.T,nt={};N.T=nt;try{var ct=M(),vt=N.S;vt!==null&&vt(nt,ct),typeof ct=="object"&&ct!==null&&typeof ct.then=="function"&&ct.then(z,ft)}catch(xt){ft(xt)}finally{X!==null&&nt.types!==null&&(X.types=nt.types),N.T=X}},Dt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Dt.use=function(M){return N.H.use(M)},Dt.useActionState=function(M,X,nt){return N.H.useActionState(M,X,nt)},Dt.useCallback=function(M,X){return N.H.useCallback(M,X)},Dt.useContext=function(M){return N.H.useContext(M)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(M,X){return N.H.useDeferredValue(M,X)},Dt.useEffect=function(M,X){return N.H.useEffect(M,X)},Dt.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Dt.useId=function(){return N.H.useId()},Dt.useImperativeHandle=function(M,X,nt){return N.H.useImperativeHandle(M,X,nt)},Dt.useInsertionEffect=function(M,X){return N.H.useInsertionEffect(M,X)},Dt.useLayoutEffect=function(M,X){return N.H.useLayoutEffect(M,X)},Dt.useMemo=function(M,X){return N.H.useMemo(M,X)},Dt.useOptimistic=function(M,X){return N.H.useOptimistic(M,X)},Dt.useReducer=function(M,X,nt){return N.H.useReducer(M,X,nt)},Dt.useRef=function(M){return N.H.useRef(M)},Dt.useState=function(M){return N.H.useState(M)},Dt.useSyncExternalStore=function(M,X,nt){return N.H.useSyncExternalStore(M,X,nt)},Dt.useTransition=function(){return N.H.useTransition()},Dt.version="19.2.3",Dt}var fv;function uh(){return fv||(fv=1,ep.exports=iT()),ep.exports}var k=uh();const Vn=ZS(k);var np={exports:{}},el={},sp={exports:{}},ip={};var pv;function rT(){return pv||(pv=1,(function(n){function t(L,$){var it=L.length;L.push($);t:for(;0<it;){var ft=it-1>>>1,_t=L[ft];if(0<r(_t,$))L[ft]=$,L[it]=_t,it=ft;else break t}}function e(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var $=L[0],it=L.pop();if(it!==$){L[0]=it;t:for(var ft=0,_t=L.length,M=_t>>>1;ft<M;){var X=2*(ft+1)-1,nt=L[X],ct=X+1,vt=L[ct];if(0>r(nt,it))ct<_t&&0>r(vt,nt)?(L[ft]=vt,L[ct]=it,ft=ct):(L[ft]=nt,L[X]=it,ft=X);else if(ct<_t&&0>r(vt,it))L[ft]=vt,L[ct]=it,ft=ct;else break t}}return $}function r(L,$){var it=L.sortIndex-$.sortIndex;return it!==0?it:L.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,m=null,b=3,v=!1,w=!1,S=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(L){for(var $=e(f);$!==null;){if($.callback===null)s(f);else if($.startTime<=L)s(f),$.sortIndex=$.expirationTime,t(h,$);else break;$=e(f)}}function D(L){if(S=!1,O(L),!w)if(e(h)!==null)w=!0,z||(z=!0,W());else{var $=e(f);$!==null&&dt(D,$.startTime-L)}}var z=!1,N=-1,U=5,H=-1;function V(){return A?!0:!(n.unstable_now()-H<U)}function B(){if(A=!1,z){var L=n.unstable_now();H=L;var $=!0;try{t:{w=!1,S&&(S=!1,T(N),N=-1),v=!0;var it=b;try{e:{for(O(L),m=e(h);m!==null&&!(m.expirationTime>L&&V());){var ft=m.callback;if(typeof ft=="function"){m.callback=null,b=m.priorityLevel;var _t=ft(m.expirationTime<=L);if(L=n.unstable_now(),typeof _t=="function"){m.callback=_t,O(L),$=!0;break e}m===e(h)&&s(h),O(L)}else s(h);m=e(h)}if(m!==null)$=!0;else{var M=e(f);M!==null&&dt(D,M.startTime-L),$=!1}}break t}finally{m=null,b=it,v=!1}$=void 0}}finally{$?W():z=!1}}}var W;if(typeof R=="function")W=function(){R(B)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,ot=at.port2;at.port1.onmessage=B,W=function(){ot.postMessage(null)}}else W=function(){E(B,0)};function dt(L,$){N=E(function(){L(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(L){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var it=b;b=$;try{return L()}finally{b=it}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var it=b;b=L;try{return $()}finally{b=it}},n.unstable_scheduleCallback=function(L,$,it){var ft=n.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?ft+it:ft):it=ft,L){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=it+_t,L={id:p++,callback:$,priorityLevel:L,startTime:it,expirationTime:_t,sortIndex:-1},it>ft?(L.sortIndex=it,t(f,L),e(h)===null&&L===e(f)&&(S?(T(N),N=-1):S=!0,dt(D,it-ft))):(L.sortIndex=_t,t(h,L),w||v||(w=!0,z||(z=!0,W()))),L},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(L){var $=b;return function(){var it=b;b=$;try{return L.apply(this,arguments)}finally{b=it}}}})(ip)),ip}var mv;function aT(){return mv||(mv=1,sp.exports=rT()),sp.exports}var rp={exports:{}},cn={};var gv;function oT(){if(gv)return cn;gv=1;var n=uh();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:h,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(h,f,null,p)},cn.flushSync=function(h){var f=l.T,p=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=f,s.p=p,s.d.f()}},cn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},cn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},cn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:v}):p==="script"&&s.d.X(h,{crossOrigin:m,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},cn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},cn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);s.d.L(h,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},cn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},cn.requestFormReset=function(h){s.d.r(h)},cn.unstable_batchedUpdates=function(h,f){return h(f)},cn.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},cn.version="19.2.3",cn}var yv;function lT(){if(yv)return rp.exports;yv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),rp.exports=oT(),rp.exports}var bv;function cT(){if(bv)return el;bv=1;var n=aT(),t=uh(),e=lT();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(s(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(s(188));return a!==i?null:i}for(var c=i,d=a;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return h(g),i;if(y===d)return h(g),a;y=y.sibling}throw Error(s(188))}if(c.return!==d.return)c=g,d=y;else{for(var x=!1,C=g.child;C;){if(C===c){x=!0,c=g,d=y;break}if(C===d){x=!0,d=g,c=y;break}C=C.sibling}if(!x){for(C=y.child;C;){if(C===c){x=!0,c=y,d=g;break}if(C===d){x=!0,d=y,c=g;break}C=C.sibling}if(!x)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function W(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var at=Symbol.for("react.client.reference");function ot(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===at?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case E:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case z:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case R:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case O:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return a=i.displayName||null,a!==null?a:ot(i.type)||"Memo";case U:a=i._payload,i=i._init;try{return ot(i(a))}catch{}}return null}var dt=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},ft=[],_t=-1;function M(i){return{current:i}}function X(i){0>_t||(i.current=ft[_t],ft[_t]=null,_t--)}function nt(i,a){_t++,ft[_t]=i.current,i.current=a}var ct=M(null),vt=M(null),xt=M(null),St=M(null);function Jt(i,a){switch(nt(xt,a),nt(vt,i),nt(ct,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?k0(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=k0(a),i=M0(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}X(ct),nt(ct,i)}function jt(){X(ct),X(vt),X(xt)}function Zt(i){i.memoizedState!==null&&nt(St,i);var a=ct.current,c=M0(a,i.type);a!==c&&(nt(vt,i),nt(ct,c))}function qe(i){vt.current===i&&(X(ct),X(vt)),St.current===i&&(X(St),Ko._currentValue=it)}var fn,Bt;function Xt(i){if(fn===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);fn=a&&a[1]||"",Bt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fn+i+Bt}var he=!1;function fe(i,a){if(!i||he)return"";he=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Q){var Z=Q}Reflect.construct(i,[],st)}else{try{st.call()}catch(Q){Z=Q}i.call(st.prototype)}}else{try{throw Error()}catch(Q){Z=Q}(st=i())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Q){if(Q&&Z&&typeof Q.stack=="string")return[Q.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),x=y[0],C=y[1];if(x&&C){var P=x.split(`
`),G=C.split(`
`);for(g=d=0;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;for(;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;if(d===P.length||g===G.length)for(d=P.length-1,g=G.length-1;1<=d&&0<=g&&P[d]!==G[g];)g--;for(;1<=d&&0<=g;d--,g--)if(P[d]!==G[g]){if(d!==1||g!==1)do if(d--,g--,0>g||P[d]!==G[g]){var tt=`
`+P[d].replace(" at new "," at ");return i.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",i.displayName)),tt}while(1<=d&&0<=g);break}}}finally{he=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Xt(c):""}function _s(i,a){switch(i.tag){case 26:case 27:case 5:return Xt(i.type);case 16:return Xt("Lazy");case 13:return i.child!==a&&a!==null?Xt("Suspense Fallback"):Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return fe(i.type,!1);case 11:return fe(i.type.render,!1);case 1:return fe(i.type,!0);case 31:return Xt("Activity");default:return""}}function Ts(i){try{var a="",c=null;do a+=_s(i,c),c=i,i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var yi=Object.prototype.hasOwnProperty,bi=n.unstable_scheduleCallback,F=n.unstable_cancelCallback,Y=n.unstable_shouldYield,J=n.unstable_requestPaint,ut=n.unstable_now,ht=n.unstable_getCurrentPriorityLevel,lt=n.unstable_ImmediatePriority,pt=n.unstable_UserBlockingPriority,Pt=n.unstable_NormalPriority,It=n.unstable_LowPriority,Ue=n.unstable_IdlePriority,$r=n.log,Cs=n.unstable_setDisableYieldValue,Ji=null,Je=null;function Qn(i){if(typeof $r=="function"&&Cs(i),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Ji,i)}catch{}}var pn=Math.clz32?Math.clz32:ec,tc=Math.log,Bh=Math.LN2;function ec(i){return i>>>=0,i===0?32:31-(tc(i)/Bh|0)|0}var nc=256,sc=262144,ic=4194304;function tr(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function rc(i,a,c){var d=i.pendingLanes;if(d===0)return 0;var g=0,y=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var C=d&134217727;return C!==0?(d=C&~y,d!==0?g=tr(d):(x&=C,x!==0?g=tr(x):c||(c=C&~i,c!==0&&(g=tr(c))))):(C=d&~y,C!==0?g=tr(C):x!==0?g=tr(x):c||(c=d&~i,c!==0&&(g=tr(c)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:g}function lo(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function $E(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dg(){var i=ic;return ic<<=1,(ic&62914560)===0&&(ic=4194304),i}function Ih(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function co(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function VE(i,a,c,d,g,y){var x=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var C=i.entanglements,P=i.expirationTimes,G=i.hiddenUpdates;for(c=x&~c;0<c;){var tt=31-pn(c),st=1<<tt;C[tt]=0,P[tt]=-1;var Z=G[tt];if(Z!==null)for(G[tt]=null,tt=0;tt<Z.length;tt++){var Q=Z[tt];Q!==null&&(Q.lane&=-536870913)}c&=~st}d!==0&&fg(i,d,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(x&~a))}function fg(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-pn(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function pg(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var d=31-pn(c),g=1<<d;g&a|i[d]&a&&(i[d]|=a),c&=~g}}function mg(i,a){var c=a&-a;return c=(c&42)!==0?1:Uh(c),(c&(i.suspendedLanes|a))!==0?0:c}function Uh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function gg(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:ev(i.type))}function yg(i,a){var c=$.p;try{return $.p=i,a()}finally{$.p=c}}var vi=Math.random().toString(36).slice(2),tn="__reactFiber$"+vi,An="__reactProps$"+vi,Vr="__reactContainer$"+vi,$h="__reactEvents$"+vi,qE="__reactListeners$"+vi,GE="__reactHandles$"+vi,bg="__reactResources$"+vi,uo="__reactMarker$"+vi;function Vh(i){delete i[tn],delete i[An],delete i[$h],delete i[qE],delete i[GE]}function qr(i){var a=i[tn];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Vr]||c[tn]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=B0(i);i!==null;){if(c=i[tn])return c;i=B0(i)}return a}i=c,c=i.parentNode}return null}function Gr(i){if(i=i[tn]||i[Vr]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ho(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function Yr(i){var a=i[bg];return a||(a=i[bg]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ge(i){i[uo]=!0}var vg=new Set,wg={};function er(i,a){Xr(i,a),Xr(i+"Capture",a)}function Xr(i,a){for(wg[i]=a,i=0;i<a.length;i++)vg.add(a[i])}var YE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sg={},xg={};function XE(i){return yi.call(xg,i)?!0:yi.call(Sg,i)?!1:YE.test(i)?xg[i]=!0:(Sg[i]=!0,!1)}function ac(i,a,c){if(XE(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function oc(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function $s(i,a,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+d)}}function Jn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ag(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ZE(i,a,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(x){c=""+x,y.call(this,x)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function qh(i){if(!i._valueTracker){var a=Ag(i)?"checked":"value";i._valueTracker=ZE(i,a,""+i[a])}}function Eg(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return i&&(d=Ag(i)?i.checked?"true":"false":i.value),i=d,i!==c?(a.setValue(i),!0):!1}function lc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var KE=/[\n"\\]/g;function ts(i){return i.replace(KE,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Gh(i,a,c,d,g,y,x,C){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),a!=null?x==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Jn(a)):i.value!==""+Jn(a)&&(i.value=""+Jn(a)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),a!=null?Yh(i,x,Jn(a)):c!=null?Yh(i,x,Jn(c)):d!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Jn(C):i.removeAttribute("name")}function _g(i,a,c,d,g,y,x,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){qh(i);return}c=c!=null?""+Jn(c):"",a=a!=null?""+Jn(a):c,C||a===i.value||(i.value=a),i.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=C?i.checked:!!d,i.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x),qh(i)}function Yh(i,a,c){a==="number"&&lc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Zr(i,a,c,d){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Jn(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Tg(i,a,c){if(a!=null&&(a=""+Jn(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+Jn(c):""}function Cg(i,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(s(92));if(dt(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=Jn(a),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),qh(i)}function Kr(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var WE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rg(i,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,c):typeof c!="number"||c===0||WE.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function Og(i,a,c){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&c[g]!==d&&Rg(i,g,d)}else for(var y in a)a.hasOwnProperty(y)&&Rg(i,y,a[y])}function Xh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(i){return JE.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Vs(){}var Zh=null;function Kh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wr=null,Qr=null;function Dg(i){var a=Gr(i);if(a&&(i=a.stateNode)){var c=i[An]||null;t:switch(i=a.stateNode,a.type){case"input":if(Gh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ts(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==i&&d.form===i.form){var g=d[An]||null;if(!g)throw Error(s(90));Gh(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===i.form&&Eg(d)}break t;case"textarea":Tg(i,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&Zr(i,!!c.multiple,a,!1)}}}var Wh=!1;function kg(i,a,c){if(Wh)return i(a,c);Wh=!0;try{var d=i(a);return d}finally{if(Wh=!1,(Wr!==null||Qr!==null)&&(Kc(),Wr&&(a=Wr,i=Qr,Qr=Wr=null,Dg(a),i)))for(a=0;a<i.length;a++)Dg(i[a])}}function fo(i,a){var c=i.stateNode;if(c===null)return null;var d=c[An]||null;if(d===null)return null;c=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,a,typeof c));return c}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=!1;if(qs)try{var po={};Object.defineProperty(po,"passive",{get:function(){Qh=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Qh=!1}var wi=null,Jh=null,uc=null;function Mg(){if(uc)return uc;var i,a=Jh,c=a.length,d,g="value"in wi?wi.value:wi.textContent,y=g.length;for(i=0;i<c&&a[i]===g[i];i++);var x=c-i;for(d=1;d<=x&&a[c-d]===g[y-d];d++);return uc=g.slice(i,1<d?1-d:void 0)}function hc(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function dc(){return!0}function Ng(){return!1}function En(i){function a(c,d,g,y,x){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(c=i[C],this[C]=c?c(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?dc:Ng,this.isPropagationStopped=Ng,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=dc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=dc)},persist:function(){},isPersistent:dc}),a}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=En(nr),mo=m({},nr,{view:0,detail:0}),t_=En(mo),td,ed,go,pc=m({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==go&&(go&&i.type==="mousemove"?(td=i.screenX-go.screenX,ed=i.screenY-go.screenY):ed=td=0,go=i),td)},movementY:function(i){return"movementY"in i?i.movementY:ed}}),Lg=En(pc),e_=m({},pc,{dataTransfer:0}),n_=En(e_),s_=m({},mo,{relatedTarget:0}),nd=En(s_),i_=m({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),r_=En(i_),a_=m({},nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),o_=En(a_),l_=m({},nr,{data:0}),Pg=En(l_),c_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d_(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=h_[i])?!!a[i]:!1}function sd(){return d_}var f_=m({},mo,{key:function(i){if(i.key){var a=c_[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=hc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?u_[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sd,charCode:function(i){return i.type==="keypress"?hc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?hc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),p_=En(f_),m_=m({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fg=En(m_),g_=m({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sd}),y_=En(g_),b_=m({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),v_=En(b_),w_=m({},pc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),S_=En(w_),x_=m({},nr,{newState:0,oldState:0}),A_=En(x_),E_=[9,13,27,32],id=qs&&"CompositionEvent"in window,yo=null;qs&&"documentMode"in document&&(yo=document.documentMode);var __=qs&&"TextEvent"in window&&!yo,zg=qs&&(!id||yo&&8<yo&&11>=yo),jg=" ",Bg=!1;function Ig(i,a){switch(i){case"keyup":return E_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ug(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Jr=!1;function T_(i,a){switch(i){case"compositionend":return Ug(a);case"keypress":return a.which!==32?null:(Bg=!0,jg);case"textInput":return i=a.data,i===jg&&Bg?null:i;default:return null}}function C_(i,a){if(Jr)return i==="compositionend"||!id&&Ig(i,a)?(i=Mg(),uc=Jh=wi=null,Jr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return zg&&a.locale!=="ko"?null:a.data;default:return null}}var R_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!R_[i.type]:a==="textarea"}function $g(i,a,c,d){Wr?Qr?Qr.push(d):Qr=[d]:Wr=d,a=su(a,"onChange"),0<a.length&&(c=new fc("onChange","change",null,c,d),i.push({event:c,listeners:a}))}var bo=null,vo=null;function O_(i){_0(i,0)}function mc(i){var a=ho(i);if(Eg(a))return i}function Vg(i,a){if(i==="change")return a}var qg=!1;if(qs){var rd;if(qs){var ad="oninput"in document;if(!ad){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),ad=typeof Gg.oninput=="function"}rd=ad}else rd=!1;qg=rd&&(!document.documentMode||9<document.documentMode)}function Yg(){bo&&(bo.detachEvent("onpropertychange",Xg),vo=bo=null)}function Xg(i){if(i.propertyName==="value"&&mc(vo)){var a=[];$g(a,vo,i,Kh(i)),kg(O_,a)}}function D_(i,a,c){i==="focusin"?(Yg(),bo=a,vo=c,bo.attachEvent("onpropertychange",Xg)):i==="focusout"&&Yg()}function k_(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mc(vo)}function M_(i,a){if(i==="click")return mc(a)}function N_(i,a){if(i==="input"||i==="change")return mc(a)}function L_(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var zn=typeof Object.is=="function"?Object.is:L_;function wo(i,a){if(zn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!yi.call(a,g)||!zn(i[g],a[g]))return!1}return!0}function Zg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Kg(i,a){var c=Zg(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=a&&d>=a)return{node:c,offset:a-i};i=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Zg(c)}}function Wg(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Wg(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Qg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=lc(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=lc(i.document)}return a}function od(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var P_=qs&&"documentMode"in document&&11>=document.documentMode,ta=null,ld=null,So=null,cd=!1;function Jg(i,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;cd||ta==null||ta!==lc(d)||(d=ta,"selectionStart"in d&&od(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),So&&wo(So,d)||(So=d,d=su(ld,"onSelect"),0<d.length&&(a=new fc("onSelect","select",null,a,c),i.push({event:a,listeners:d}),a.target=ta)))}function sr(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var ea={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},ud={},ty={};qs&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function ir(i){if(ud[i])return ud[i];if(!ea[i])return i;var a=ea[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in ty)return ud[i]=a[c];return i}var ey=ir("animationend"),ny=ir("animationiteration"),sy=ir("animationstart"),F_=ir("transitionrun"),z_=ir("transitionstart"),j_=ir("transitioncancel"),iy=ir("transitionend"),ry=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function ms(i,a){ry.set(i,a),er(a,[i])}var gc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},es=[],na=0,dd=0;function yc(){for(var i=na,a=dd=na=0;a<i;){var c=es[a];es[a++]=null;var d=es[a];es[a++]=null;var g=es[a];es[a++]=null;var y=es[a];if(es[a++]=null,d!==null&&g!==null){var x=d.pending;x===null?g.next=g:(g.next=x.next,x.next=g),d.pending=g}y!==0&&ay(c,g,y)}}function bc(i,a,c,d){es[na++]=i,es[na++]=a,es[na++]=c,es[na++]=d,dd|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function fd(i,a,c,d){return bc(i,a,c,d),vc(i)}function rr(i,a){return bc(i,null,null,a),vc(i)}function ay(i,a,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=i.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&a!==null&&(g=31-pn(c),i=y.hiddenUpdates,d=i[g],d===null?i[g]=[a]:d.push(a),a.lane=c|536870912),y):null}function vc(i){if(50<$o)throw $o=0,Af=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var sa={};function B_(i,a,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(i,a,c,d){return new B_(i,a,c,d)}function pd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Gs(i,a){var c=i.alternate;return c===null?(c=jn(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function oy(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function wc(i,a,c,d,g,y){var x=0;if(d=i,typeof i=="function")pd(i)&&(x=1);else if(typeof i=="string")x=V1(i,c,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case H:return i=jn(31,c,a,g),i.elementType=H,i.lanes=y,i;case S:return ar(c.children,g,y,a);case A:x=8,g|=24;break;case E:return i=jn(12,c,a,g|2),i.elementType=E,i.lanes=y,i;case D:return i=jn(13,c,a,g),i.elementType=D,i.lanes=y,i;case z:return i=jn(19,c,a,g),i.elementType=z,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:x=10;break t;case T:x=9;break t;case O:x=11;break t;case N:x=14;break t;case U:x=16,d=null;break t}x=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return a=jn(x,c,a,g),a.elementType=i,a.type=d,a.lanes=y,a}function ar(i,a,c,d){return i=jn(7,i,d,a),i.lanes=c,i}function md(i,a,c){return i=jn(6,i,null,a),i.lanes=c,i}function ly(i){var a=jn(18,null,null,0);return a.stateNode=i,a}function gd(i,a,c){return a=jn(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var cy=new WeakMap;function ns(i,a){if(typeof i=="object"&&i!==null){var c=cy.get(i);return c!==void 0?c:(a={value:i,source:a,stack:Ts(a)},cy.set(i,a),a)}return{value:i,source:a,stack:Ts(a)}}var ia=[],ra=0,Sc=null,xo=0,ss=[],is=0,Si=null,Rs=1,Os="";function Ys(i,a){ia[ra++]=xo,ia[ra++]=Sc,Sc=i,xo=a}function uy(i,a,c){ss[is++]=Rs,ss[is++]=Os,ss[is++]=Si,Si=i;var d=Rs;i=Os;var g=32-pn(d)-1;d&=~(1<<g),c+=1;var y=32-pn(a)+g;if(30<y){var x=g-g%5;y=(d&(1<<x)-1).toString(32),d>>=x,g-=x,Rs=1<<32-pn(a)+g|c<<g|d,Os=y+i}else Rs=1<<y|c<<g|d,Os=i}function yd(i){i.return!==null&&(Ys(i,1),uy(i,1,0))}function bd(i){for(;i===Sc;)Sc=ia[--ra],ia[ra]=null,xo=ia[--ra],ia[ra]=null;for(;i===Si;)Si=ss[--is],ss[is]=null,Os=ss[--is],ss[is]=null,Rs=ss[--is],ss[is]=null}function hy(i,a){ss[is++]=Rs,ss[is++]=Os,ss[is++]=Si,Rs=a.id,Os=a.overflow,Si=i}var en=null,pe=null,Gt=!1,xi=null,rs=!1,vd=Error(s(519));function Ai(i){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ao(ns(a,i)),vd}function dy(i){var a=i.stateNode,c=i.type,d=i.memoizedProps;switch(a[tn]=i,a[An]=d,c){case"dialog":Ht("cancel",a),Ht("close",a);break;case"iframe":case"object":case"embed":Ht("load",a);break;case"video":case"audio":for(c=0;c<qo.length;c++)Ht(qo[c],a);break;case"source":Ht("error",a);break;case"img":case"image":case"link":Ht("error",a),Ht("load",a);break;case"details":Ht("toggle",a);break;case"input":Ht("invalid",a),_g(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ht("invalid",a);break;case"textarea":Ht("invalid",a),Cg(a,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||O0(a.textContent,c)?(d.popover!=null&&(Ht("beforetoggle",a),Ht("toggle",a)),d.onScroll!=null&&Ht("scroll",a),d.onScrollEnd!=null&&Ht("scrollend",a),d.onClick!=null&&(a.onclick=Vs),a=!0):a=!1,a||Ai(i,!0)}function fy(i){for(en=i.return;en;)switch(en.tag){case 5:case 31:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:en=en.return}}function aa(i){if(i!==en)return!1;if(!Gt)return fy(i),Gt=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||jf(i.type,i.memoizedProps)),c=!c),c&&pe&&Ai(i),fy(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pe=j0(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pe=j0(i)}else a===27?(a=pe,zi(i.type)?(i=$f,$f=null,pe=i):pe=a):pe=en?os(i.stateNode.nextSibling):null;return!0}function or(){pe=en=null,Gt=!1}function wd(){var i=xi;return i!==null&&(Rn===null?Rn=i:Rn.push.apply(Rn,i),xi=null),i}function Ao(i){xi===null?xi=[i]:xi.push(i)}var Sd=M(null),lr=null,Xs=null;function Ei(i,a,c){nt(Sd,a._currentValue),a._currentValue=c}function Zs(i){i._currentValue=Sd.current,X(Sd)}function xd(i,a,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===c)break;i=i.return}}function Ad(i,a,c,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var x=g.child;y=y.firstContext;t:for(;y!==null;){var C=y;y=g;for(var P=0;P<a.length;P++)if(C.context===a[P]){y.lanes|=c,C=y.alternate,C!==null&&(C.lanes|=c),xd(y.return,c,i),d||(x=null);break t}y=C.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(s(341));x.lanes|=c,y=x.alternate,y!==null&&(y.lanes|=c),xd(x,c,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function oa(i,a,c,d){i=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var C=g.type;zn(g.pendingProps.value,x.value)||(i!==null?i.push(C):i=[C])}}else if(g===St.current){if(x=g.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Ko):i=[Ko])}g=g.return}i!==null&&Ad(a,i,c,d),a.flags|=262144}function xc(i){for(i=i.firstContext;i!==null;){if(!zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function cr(i){lr=i,Xs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function nn(i){return py(lr,i)}function Ac(i,a){return lr===null&&cr(i),py(i,a)}function py(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Xs===null){if(i===null)throw Error(s(308));Xs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xs=Xs.next=a;return c}var I_=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},U_=n.unstable_scheduleCallback,H_=n.unstable_NormalPriority,Ne={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ed(){return{controller:new I_,data:new Map,refCount:0}}function Eo(i){i.refCount--,i.refCount===0&&U_(H_,function(){i.controller.abort()})}var _o=null,_d=0,la=0,ca=null;function $_(i,a){if(_o===null){var c=_o=[];_d=0,la=Of(),ca={status:"pending",value:void 0,then:function(d){c.push(d)}}}return _d++,a.then(my,my),a}function my(){if(--_d===0&&_o!==null){ca!==null&&(ca.status="fulfilled");var i=_o;_o=null,la=0,ca=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function V_(i,a){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var gy=L.S;L.S=function(i,a){Jb=ut(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&$_(i,a),gy!==null&&gy(i,a)};var ur=M(null);function Td(){var i=ur.current;return i!==null?i:oe.pooledCache}function Ec(i,a){a===null?nt(ur,ur.current):nt(ur,a.pool)}function yy(){var i=Td();return i===null?null:{parent:Ne._currentValue,pool:i}}var ua=Error(s(460)),Cd=Error(s(474)),_c=Error(s(542)),Tc={then:function(){}};function by(i){return i=i.status,i==="fulfilled"||i==="rejected"}function vy(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(Vs,Vs),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Sy(i),i;default:if(typeof a.status=="string")a.then(Vs,Vs);else{if(i=oe,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Sy(i),i}throw dr=a,ua}}function hr(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(dr=c,ua):c}}var dr=null;function wy(){if(dr===null)throw Error(s(459));var i=dr;return dr=null,i}function Sy(i){if(i===ua||i===_c)throw Error(s(483))}var ha=null,To=0;function Cc(i){var a=To;return To+=1,ha===null&&(ha=[]),vy(ha,i,a)}function Co(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Rc(i,a){throw a.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function xy(i){function a(I,j){if(i){var q=I.deletions;q===null?(I.deletions=[j],I.flags|=16):q.push(j)}}function c(I,j){if(!i)return null;for(;j!==null;)a(I,j),j=j.sibling;return null}function d(I){for(var j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function g(I,j){return I=Gs(I,j),I.index=0,I.sibling=null,I}function y(I,j,q){return I.index=q,i?(q=I.alternate,q!==null?(q=q.index,q<j?(I.flags|=67108866,j):q):(I.flags|=67108866,j)):(I.flags|=1048576,j)}function x(I){return i&&I.alternate===null&&(I.flags|=67108866),I}function C(I,j,q,et){return j===null||j.tag!==6?(j=md(q,I.mode,et),j.return=I,j):(j=g(j,q),j.return=I,j)}function P(I,j,q,et){var At=q.type;return At===S?tt(I,j,q.props.children,et,q.key):j!==null&&(j.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===U&&hr(At)===j.type)?(j=g(j,q.props),Co(j,q),j.return=I,j):(j=wc(q.type,q.key,q.props,null,I.mode,et),Co(j,q),j.return=I,j)}function G(I,j,q,et){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=gd(q,I.mode,et),j.return=I,j):(j=g(j,q.children||[]),j.return=I,j)}function tt(I,j,q,et,At){return j===null||j.tag!==7?(j=ar(q,I.mode,et,At),j.return=I,j):(j=g(j,q),j.return=I,j)}function st(I,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=md(""+j,I.mode,q),j.return=I,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return q=wc(j.type,j.key,j.props,null,I.mode,q),Co(q,j),q.return=I,q;case w:return j=gd(j,I.mode,q),j.return=I,j;case U:return j=hr(j),st(I,j,q)}if(dt(j)||W(j))return j=ar(j,I.mode,q,null),j.return=I,j;if(typeof j.then=="function")return st(I,Cc(j),q);if(j.$$typeof===R)return st(I,Ac(I,j),q);Rc(I,j)}return null}function Z(I,j,q,et){var At=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return At!==null?null:C(I,j,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return q.key===At?P(I,j,q,et):null;case w:return q.key===At?G(I,j,q,et):null;case U:return q=hr(q),Z(I,j,q,et)}if(dt(q)||W(q))return At!==null?null:tt(I,j,q,et,null);if(typeof q.then=="function")return Z(I,j,Cc(q),et);if(q.$$typeof===R)return Z(I,j,Ac(I,q),et);Rc(I,q)}return null}function Q(I,j,q,et,At){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return I=I.get(q)||null,C(j,I,""+et,At);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case v:return I=I.get(et.key===null?q:et.key)||null,P(j,I,et,At);case w:return I=I.get(et.key===null?q:et.key)||null,G(j,I,et,At);case U:return et=hr(et),Q(I,j,q,et,At)}if(dt(et)||W(et))return I=I.get(q)||null,tt(j,I,et,At,null);if(typeof et.then=="function")return Q(I,j,q,Cc(et),At);if(et.$$typeof===R)return Q(I,j,q,Ac(j,et),At);Rc(j,et)}return null}function yt(I,j,q,et){for(var At=null,Kt=null,wt=j,Ft=j=0,Vt=null;wt!==null&&Ft<q.length;Ft++){wt.index>Ft?(Vt=wt,wt=null):Vt=wt.sibling;var Wt=Z(I,wt,q[Ft],et);if(Wt===null){wt===null&&(wt=Vt);break}i&&wt&&Wt.alternate===null&&a(I,wt),j=y(Wt,j,Ft),Kt===null?At=Wt:Kt.sibling=Wt,Kt=Wt,wt=Vt}if(Ft===q.length)return c(I,wt),Gt&&Ys(I,Ft),At;if(wt===null){for(;Ft<q.length;Ft++)wt=st(I,q[Ft],et),wt!==null&&(j=y(wt,j,Ft),Kt===null?At=wt:Kt.sibling=wt,Kt=wt);return Gt&&Ys(I,Ft),At}for(wt=d(wt);Ft<q.length;Ft++)Vt=Q(wt,I,Ft,q[Ft],et),Vt!==null&&(i&&Vt.alternate!==null&&wt.delete(Vt.key===null?Ft:Vt.key),j=y(Vt,j,Ft),Kt===null?At=Vt:Kt.sibling=Vt,Kt=Vt);return i&&wt.forEach(function(Hi){return a(I,Hi)}),Gt&&Ys(I,Ft),At}function Ct(I,j,q,et){if(q==null)throw Error(s(151));for(var At=null,Kt=null,wt=j,Ft=j=0,Vt=null,Wt=q.next();wt!==null&&!Wt.done;Ft++,Wt=q.next()){wt.index>Ft?(Vt=wt,wt=null):Vt=wt.sibling;var Hi=Z(I,wt,Wt.value,et);if(Hi===null){wt===null&&(wt=Vt);break}i&&wt&&Hi.alternate===null&&a(I,wt),j=y(Hi,j,Ft),Kt===null?At=Hi:Kt.sibling=Hi,Kt=Hi,wt=Vt}if(Wt.done)return c(I,wt),Gt&&Ys(I,Ft),At;if(wt===null){for(;!Wt.done;Ft++,Wt=q.next())Wt=st(I,Wt.value,et),Wt!==null&&(j=y(Wt,j,Ft),Kt===null?At=Wt:Kt.sibling=Wt,Kt=Wt);return Gt&&Ys(I,Ft),At}for(wt=d(wt);!Wt.done;Ft++,Wt=q.next())Wt=Q(wt,I,Ft,Wt.value,et),Wt!==null&&(i&&Wt.alternate!==null&&wt.delete(Wt.key===null?Ft:Wt.key),j=y(Wt,j,Ft),Kt===null?At=Wt:Kt.sibling=Wt,Kt=Wt);return i&&wt.forEach(function(eT){return a(I,eT)}),Gt&&Ys(I,Ft),At}function re(I,j,q,et){if(typeof q=="object"&&q!==null&&q.type===S&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case v:t:{for(var At=q.key;j!==null;){if(j.key===At){if(At=q.type,At===S){if(j.tag===7){c(I,j.sibling),et=g(j,q.props.children),et.return=I,I=et;break t}}else if(j.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===U&&hr(At)===j.type){c(I,j.sibling),et=g(j,q.props),Co(et,q),et.return=I,I=et;break t}c(I,j);break}else a(I,j);j=j.sibling}q.type===S?(et=ar(q.props.children,I.mode,et,q.key),et.return=I,I=et):(et=wc(q.type,q.key,q.props,null,I.mode,et),Co(et,q),et.return=I,I=et)}return x(I);case w:t:{for(At=q.key;j!==null;){if(j.key===At)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){c(I,j.sibling),et=g(j,q.children||[]),et.return=I,I=et;break t}else{c(I,j);break}else a(I,j);j=j.sibling}et=gd(q,I.mode,et),et.return=I,I=et}return x(I);case U:return q=hr(q),re(I,j,q,et)}if(dt(q))return yt(I,j,q,et);if(W(q)){if(At=W(q),typeof At!="function")throw Error(s(150));return q=At.call(q),Ct(I,j,q,et)}if(typeof q.then=="function")return re(I,j,Cc(q),et);if(q.$$typeof===R)return re(I,j,Ac(I,q),et);Rc(I,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,j!==null&&j.tag===6?(c(I,j.sibling),et=g(j,q),et.return=I,I=et):(c(I,j),et=md(q,I.mode,et),et.return=I,I=et),x(I)):c(I,j)}return function(I,j,q,et){try{To=0;var At=re(I,j,q,et);return ha=null,At}catch(wt){if(wt===ua||wt===_c)throw wt;var Kt=jn(29,wt,null,I.mode);return Kt.lanes=et,Kt.return=I,Kt}}}var fr=xy(!0),Ay=xy(!1),_i=!1;function Rd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Od(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ti(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ci(i,a,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Qt&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=vc(i),ay(i,null,c),a}return bc(i,d,a,c),vc(i)}function Ro(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,c|=d,a.lanes=c,pg(i,c)}}function Dd(i,a){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=x:y=y.next=x,c=c.next}while(c!==null);y===null?g=y=a:y=y.next=a}else g=y=a;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var kd=!1;function Oo(){if(kd){var i=ca;if(i!==null)throw i}}function Do(i,a,c,d){kd=!1;var g=i.updateQueue;_i=!1;var y=g.firstBaseUpdate,x=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var P=C,G=P.next;P.next=null,x===null?y=G:x.next=G,x=P;var tt=i.alternate;tt!==null&&(tt=tt.updateQueue,C=tt.lastBaseUpdate,C!==x&&(C===null?tt.firstBaseUpdate=G:C.next=G,tt.lastBaseUpdate=P))}if(y!==null){var st=g.baseState;x=0,tt=G=P=null,C=y;do{var Z=C.lane&-536870913,Q=Z!==C.lane;if(Q?($t&Z)===Z:(d&Z)===Z){Z!==0&&Z===la&&(kd=!0),tt!==null&&(tt=tt.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var yt=i,Ct=C;Z=a;var re=c;switch(Ct.tag){case 1:if(yt=Ct.payload,typeof yt=="function"){st=yt.call(re,st,Z);break t}st=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Ct.payload,Z=typeof yt=="function"?yt.call(re,st,Z):yt,Z==null)break t;st=m({},st,Z);break t;case 2:_i=!0}}Z=C.callback,Z!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=g.callbacks,Q===null?g.callbacks=[Z]:Q.push(Z))}else Q={lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},tt===null?(G=tt=Q,P=st):tt=tt.next=Q,x|=Z;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;Q=C,C=Q.next,Q.next=null,g.lastBaseUpdate=Q,g.shared.pending=null}}while(!0);tt===null&&(P=st),g.baseState=P,g.firstBaseUpdate=G,g.lastBaseUpdate=tt,y===null&&(g.shared.lanes=0),Mi|=x,i.lanes=x,i.memoizedState=st}}function Ey(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function _y(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Ey(c[i],a)}var da=M(null),Oc=M(0);function Ty(i,a){i=ii,nt(Oc,i),nt(da,a),ii=i|a.baseLanes}function Md(){nt(Oc,ii),nt(da,da.current)}function Nd(){ii=Oc.current,X(da),X(Oc)}var Bn=M(null),as=null;function Ri(i){var a=i.alternate;nt(Ce,Ce.current&1),nt(Bn,i),as===null&&(a===null||da.current!==null||a.memoizedState!==null)&&(as=i)}function Ld(i){nt(Ce,Ce.current),nt(Bn,i),as===null&&(as=i)}function Cy(i){i.tag===22?(nt(Ce,Ce.current),nt(Bn,i),as===null&&(as=i)):Oi()}function Oi(){nt(Ce,Ce.current),nt(Bn,Bn.current)}function In(i){X(Bn),as===i&&(as=null),X(Ce)}var Ce=M(0);function Dc(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Uf(c)||Hf(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ks=0,Nt=null,se=null,Le=null,kc=!1,fa=!1,pr=!1,Mc=0,ko=0,pa=null,q_=0;function _e(){throw Error(s(321))}function Pd(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!zn(i[c],a[c]))return!1;return!0}function Fd(i,a,c,d,g,y){return Ks=y,Nt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=i===null||i.memoizedState===null?ub:Wd,pr=!1,y=c(d,g),pr=!1,fa&&(y=Oy(a,c,d,g)),Ry(i),y}function Ry(i){L.H=Lo;var a=se!==null&&se.next!==null;if(Ks=0,Le=se=Nt=null,kc=!1,ko=0,pa=null,a)throw Error(s(300));i===null||Pe||(i=i.dependencies,i!==null&&xc(i)&&(Pe=!0))}function Oy(i,a,c,d){Nt=i;var g=0;do{if(fa&&(pa=null),ko=0,fa=!1,25<=g)throw Error(s(301));if(g+=1,Le=se=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}L.H=hb,y=a(c,d)}while(fa);return y}function G_(){var i=L.H,a=i.useState()[0];return a=typeof a.then=="function"?Mo(a):a,i=i.useState()[0],(se!==null?se.memoizedState:null)!==i&&(Nt.flags|=1024),a}function zd(){var i=Mc!==0;return Mc=0,i}function jd(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function Bd(i){if(kc){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}kc=!1}Ks=0,Le=se=Nt=null,fa=!1,ko=Mc=0,pa=null}function mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Nt.memoizedState=Le=i:Le=Le.next=i,Le}function Re(){if(se===null){var i=Nt.alternate;i=i!==null?i.memoizedState:null}else i=se.next;var a=Le===null?Nt.memoizedState:Le.next;if(a!==null)Le=a,se=i;else{if(i===null)throw Nt.alternate===null?Error(s(467)):Error(s(310));se=i,i={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Le===null?Nt.memoizedState=Le=i:Le=Le.next=i}return Le}function Nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mo(i){var a=ko;return ko+=1,pa===null&&(pa=[]),i=vy(pa,i,a),a=Nt,(Le===null?a.memoizedState:Le.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?ub:Wd),i}function Lc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Mo(i);if(i.$$typeof===R)return nn(i)}throw Error(s(438,String(i)))}function Id(i){var a=null,c=Nt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=Nt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Nc(),Nt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),d=0;d<i;d++)c[d]=V;return a.index++,c}function Ws(i,a){return typeof a=="function"?a(i):a}function Pc(i){var a=Re();return Ud(a,se,i)}function Ud(i,a,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var g=i.baseQueue,y=d.pending;if(y!==null){if(g!==null){var x=g.next;g.next=y.next,y.next=x}a.baseQueue=g=y,d.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{a=g.next;var C=x=null,P=null,G=a,tt=!1;do{var st=G.lane&-536870913;if(st!==G.lane?($t&st)===st:(Ks&st)===st){var Z=G.revertLane;if(Z===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),st===la&&(tt=!0);else if((Ks&Z)===Z){G=G.next,Z===la&&(tt=!0);continue}else st={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(C=P=st,x=y):P=P.next=st,Nt.lanes|=Z,Mi|=Z;st=G.action,pr&&c(y,st),y=G.hasEagerState?G.eagerState:c(y,st)}else Z={lane:st,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(C=P=Z,x=y):P=P.next=Z,Nt.lanes|=st,Mi|=st;G=G.next}while(G!==null&&G!==a);if(P===null?x=y:P.next=C,!zn(y,i.memoizedState)&&(Pe=!0,tt&&(c=ca,c!==null)))throw c;i.memoizedState=y,i.baseState=x,i.baseQueue=P,d.lastRenderedState=y}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Hd(i){var a=Re(),c=a.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,g=c.pending,y=a.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do y=i(y,x.action),x=x.next;while(x!==g);zn(y,a.memoizedState)||(Pe=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,d]}function Dy(i,a,c){var d=Nt,g=Re(),y=Gt;if(y){if(c===void 0)throw Error(s(407));c=c()}else c=a();var x=!zn((se||g).memoizedState,c);if(x&&(g.memoizedState=c,Pe=!0),g=g.queue,qd(Ny.bind(null,d,g,i),[i]),g.getSnapshot!==a||x||Le!==null&&Le.memoizedState.tag&1){if(d.flags|=2048,ma(9,{destroy:void 0},My.bind(null,d,g,c,a),null),oe===null)throw Error(s(349));y||(Ks&127)!==0||ky(d,a,c)}return c}function ky(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Nt.updateQueue,a===null?(a=Nc(),Nt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function My(i,a,c,d){a.value=c,a.getSnapshot=d,Ly(a)&&Py(i)}function Ny(i,a,c){return c(function(){Ly(a)&&Py(i)})}function Ly(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!zn(i,c)}catch{return!0}}function Py(i){var a=rr(i,2);a!==null&&On(a,i,2)}function $d(i){var a=mn();if(typeof i=="function"){var c=i;if(i=c(),pr){Qn(!0);try{c()}finally{Qn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:i},a}function Fy(i,a,c,d){return i.baseState=c,Ud(i,se,typeof d=="function"?d:Ws)}function Y_(i,a,c,d,g){if(jc(i))throw Error(s(485));if(i=a.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};L.T!==null?c(!0):y.isTransition=!1,d(y),c=a.pending,c===null?(y.next=a.pending=y,zy(a,y)):(y.next=c.next,a.pending=c.next=y)}}function zy(i,a){var c=a.action,d=a.payload,g=i.state;if(a.isTransition){var y=L.T,x={};L.T=x;try{var C=c(g,d),P=L.S;P!==null&&P(x,C),jy(i,a,C)}catch(G){Vd(i,a,G)}finally{y!==null&&x.types!==null&&(y.types=x.types),L.T=y}}else try{y=c(g,d),jy(i,a,y)}catch(G){Vd(i,a,G)}}function jy(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){By(i,a,d)},function(d){return Vd(i,a,d)}):By(i,a,c)}function By(i,a,c){a.status="fulfilled",a.value=c,Iy(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,zy(i,c)))}function Vd(i,a,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,Iy(a),a=a.next;while(a!==d)}i.action=null}function Iy(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Uy(i,a){return a}function Hy(i,a){if(Gt){var c=oe.formState;if(c!==null){t:{var d=Nt;if(Gt){if(pe){e:{for(var g=pe,y=rs;g.nodeType!==8;){if(!y){g=null;break e}if(g=os(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){pe=os(g.nextSibling),d=g.data==="F!";break t}}Ai(d)}d=!1}d&&(a=c[0])}}return c=mn(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uy,lastRenderedState:a},c.queue=d,c=ob.bind(null,Nt,d),d.dispatch=c,d=$d(!1),y=Kd.bind(null,Nt,!1,d.queue),d=mn(),g={state:a,dispatch:null,action:i,pending:null},d.queue=g,c=Y_.bind(null,Nt,g,y,c),g.dispatch=c,d.memoizedState=i,[a,c,!1]}function $y(i){var a=Re();return Vy(a,se,i)}function Vy(i,a,c){if(a=Ud(i,a,Uy)[0],i=Pc(Ws)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Mo(a)}catch(x){throw x===ua?_c:x}else d=a;a=Re();var g=a.queue,y=g.dispatch;return c!==a.memoizedState&&(Nt.flags|=2048,ma(9,{destroy:void 0},X_.bind(null,g,c),null)),[d,y,i]}function X_(i,a){i.action=a}function qy(i){var a=Re(),c=se;if(c!==null)return Vy(a,c,i);Re(),a=a.memoizedState,c=Re();var d=c.queue.dispatch;return c.memoizedState=i,[a,d,!1]}function ma(i,a,c,d){return i={tag:i,create:c,deps:d,inst:a,next:null},a=Nt.updateQueue,a===null&&(a=Nc(),Nt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,a.lastEffect=i),i}function Gy(){return Re().memoizedState}function Fc(i,a,c,d){var g=mn();Nt.flags|=i,g.memoizedState=ma(1|a,{destroy:void 0},c,d===void 0?null:d)}function zc(i,a,c,d){var g=Re();d=d===void 0?null:d;var y=g.memoizedState.inst;se!==null&&d!==null&&Pd(d,se.memoizedState.deps)?g.memoizedState=ma(a,y,c,d):(Nt.flags|=i,g.memoizedState=ma(1|a,y,c,d))}function Yy(i,a){Fc(8390656,8,i,a)}function qd(i,a){zc(2048,8,i,a)}function Z_(i){Nt.flags|=4;var a=Nt.updateQueue;if(a===null)a=Nc(),Nt.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function Xy(i){var a=Re().memoizedState;return Z_({ref:a,nextImpl:i}),function(){if((Qt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Zy(i,a){return zc(4,2,i,a)}function Ky(i,a){return zc(4,4,i,a)}function Wy(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Qy(i,a,c){c=c!=null?c.concat([i]):null,zc(4,4,Wy.bind(null,a,i),c)}function Gd(){}function Jy(i,a){var c=Re();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&Pd(a,d[1])?d[0]:(c.memoizedState=[i,a],i)}function tb(i,a){var c=Re();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&Pd(a,d[1]))return d[0];if(d=i(),pr){Qn(!0);try{i()}finally{Qn(!1)}}return c.memoizedState=[d,a],d}function Yd(i,a,c){return c===void 0||(Ks&1073741824)!==0&&($t&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=e0(),Nt.lanes|=i,Mi|=i,c)}function eb(i,a,c,d){return zn(c,a)?c:da.current!==null?(i=Yd(i,c,d),zn(i,a)||(Pe=!0),i):(Ks&42)===0||(Ks&1073741824)!==0&&($t&261930)===0?(Pe=!0,i.memoizedState=c):(i=e0(),Nt.lanes|=i,Mi|=i,a)}function nb(i,a,c,d,g){var y=$.p;$.p=y!==0&&8>y?y:8;var x=L.T,C={};L.T=C,Kd(i,!1,a,c);try{var P=g(),G=L.S;if(G!==null&&G(C,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var tt=V_(P,d);No(i,a,tt,$n(i))}else No(i,a,d,$n(i))}catch(st){No(i,a,{then:function(){},status:"rejected",reason:st},$n())}finally{$.p=y,x!==null&&C.types!==null&&(x.types=C.types),L.T=x}}function K_(){}function Xd(i,a,c,d){if(i.tag!==5)throw Error(s(476));var g=sb(i).queue;nb(i,g,a,it,c===null?K_:function(){return ib(i),c(d)})}function sb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:it},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function ib(i){var a=sb(i);a.next===null&&(a=i.alternate.memoizedState),No(i,a.next.queue,{},$n())}function Zd(){return nn(Ko)}function rb(){return Re().memoizedState}function ab(){return Re().memoizedState}function W_(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=$n();i=Ti(c);var d=Ci(a,i,c);d!==null&&(On(d,a,c),Ro(d,a,c)),a={cache:Ed()},i.payload=a;return}a=a.return}}function Q_(i,a,c){var d=$n();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jc(i)?lb(a,c):(c=fd(i,a,c,d),c!==null&&(On(c,i,d),cb(c,a,d)))}function ob(i,a,c){var d=$n();No(i,a,c,d)}function No(i,a,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(jc(i))lb(a,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,C=y(x,c);if(g.hasEagerState=!0,g.eagerState=C,zn(C,x))return bc(i,a,g,0),oe===null&&yc(),!1}catch{}if(c=fd(i,a,g,d),c!==null)return On(c,i,d),cb(c,a,d),!0}return!1}function Kd(i,a,c,d){if(d={lane:2,revertLane:Of(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},jc(i)){if(a)throw Error(s(479))}else a=fd(i,c,d,2),a!==null&&On(a,i,2)}function jc(i){var a=i.alternate;return i===Nt||a!==null&&a===Nt}function lb(i,a){fa=kc=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function cb(i,a,c){if((c&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,c|=d,a.lanes=c,pg(i,c)}}var Lo={readContext:nn,use:Lc,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e};Lo.useEffectEvent=_e;var ub={readContext:nn,use:Lc,useCallback:function(i,a){return mn().memoizedState=[i,a===void 0?null:a],i},useContext:nn,useEffect:Yy,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,Fc(4194308,4,Wy.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Fc(4194308,4,i,a)},useInsertionEffect:function(i,a){Fc(4,2,i,a)},useMemo:function(i,a){var c=mn();a=a===void 0?null:a;var d=i();if(pr){Qn(!0);try{i()}finally{Qn(!1)}}return c.memoizedState=[d,a],d},useReducer:function(i,a,c){var d=mn();if(c!==void 0){var g=c(a);if(pr){Qn(!0);try{c(a)}finally{Qn(!1)}}}else g=a;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=Q_.bind(null,Nt,i),[d.memoizedState,i]},useRef:function(i){var a=mn();return i={current:i},a.memoizedState=i},useState:function(i){i=$d(i);var a=i.queue,c=ob.bind(null,Nt,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:Gd,useDeferredValue:function(i,a){var c=mn();return Yd(c,i,a)},useTransition:function(){var i=$d(!1);return i=nb.bind(null,Nt,i.queue,!0,!1),mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var d=Nt,g=mn();if(Gt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=a(),oe===null)throw Error(s(349));($t&127)!==0||ky(d,a,c)}g.memoizedState=c;var y={value:c,getSnapshot:a};return g.queue=y,Yy(Ny.bind(null,d,y,i),[i]),d.flags|=2048,ma(9,{destroy:void 0},My.bind(null,d,y,c,a),null),c},useId:function(){var i=mn(),a=oe.identifierPrefix;if(Gt){var c=Os,d=Rs;c=(d&~(1<<32-pn(d)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Mc++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=q_++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Zd,useFormState:Hy,useActionState:Hy,useOptimistic:function(i){var a=mn();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Kd.bind(null,Nt,!0,c),c.dispatch=a,[i,a]},useMemoCache:Id,useCacheRefresh:function(){return mn().memoizedState=W_.bind(null,Nt)},useEffectEvent:function(i){var a=mn(),c={impl:i};return a.memoizedState=c,function(){if((Qt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},Wd={readContext:nn,use:Lc,useCallback:Jy,useContext:nn,useEffect:qd,useImperativeHandle:Qy,useInsertionEffect:Zy,useLayoutEffect:Ky,useMemo:tb,useReducer:Pc,useRef:Gy,useState:function(){return Pc(Ws)},useDebugValue:Gd,useDeferredValue:function(i,a){var c=Re();return eb(c,se.memoizedState,i,a)},useTransition:function(){var i=Pc(Ws)[0],a=Re().memoizedState;return[typeof i=="boolean"?i:Mo(i),a]},useSyncExternalStore:Dy,useId:rb,useHostTransitionStatus:Zd,useFormState:$y,useActionState:$y,useOptimistic:function(i,a){var c=Re();return Fy(c,se,i,a)},useMemoCache:Id,useCacheRefresh:ab};Wd.useEffectEvent=Xy;var hb={readContext:nn,use:Lc,useCallback:Jy,useContext:nn,useEffect:qd,useImperativeHandle:Qy,useInsertionEffect:Zy,useLayoutEffect:Ky,useMemo:tb,useReducer:Hd,useRef:Gy,useState:function(){return Hd(Ws)},useDebugValue:Gd,useDeferredValue:function(i,a){var c=Re();return se===null?Yd(c,i,a):eb(c,se.memoizedState,i,a)},useTransition:function(){var i=Hd(Ws)[0],a=Re().memoizedState;return[typeof i=="boolean"?i:Mo(i),a]},useSyncExternalStore:Dy,useId:rb,useHostTransitionStatus:Zd,useFormState:qy,useActionState:qy,useOptimistic:function(i,a){var c=Re();return se!==null?Fy(c,se,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Id,useCacheRefresh:ab};hb.useEffectEvent=Xy;function Qd(i,a,c,d){a=i.memoizedState,c=c(d,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Jd={enqueueSetState:function(i,a,c){i=i._reactInternals;var d=$n(),g=Ti(d);g.payload=a,c!=null&&(g.callback=c),a=Ci(i,g,d),a!==null&&(On(a,i,d),Ro(a,i,d))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var d=$n(),g=Ti(d);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=Ci(i,g,d),a!==null&&(On(a,i,d),Ro(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=$n(),d=Ti(c);d.tag=2,a!=null&&(d.callback=a),a=Ci(i,d,c),a!==null&&(On(a,i,c),Ro(a,i,c))}};function db(i,a,c,d,g,y,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,x):a.prototype&&a.prototype.isPureReactComponent?!wo(c,d)||!wo(g,y):!0}function fb(i,a,c,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==i&&Jd.enqueueReplaceState(a,a.state,null)}function mr(i,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function pb(i){gc(i)}function mb(i){console.error(i)}function gb(i){gc(i)}function Bc(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function yb(i,a,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function tf(i,a,c){return c=Ti(c),c.tag=3,c.payload={element:null},c.callback=function(){Bc(i,a)},c}function bb(i){return i=Ti(i),i.tag=3,i}function vb(i,a,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;i.payload=function(){return g(y)},i.callback=function(){yb(a,c,d)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){yb(a,c,d),typeof g!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function J_(i,a,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&oa(a,c,g,!0),c=Bn.current,c!==null){switch(c.tag){case 31:case 13:return as===null?Wc():c.alternate===null&&Te===0&&(Te=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===Tc?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),Tf(i,d,g)),!1;case 22:return c.flags|=65536,d===Tc?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),Tf(i,d,g)),!1}throw Error(s(435,c.tag))}return Tf(i,d,g),Wc(),!1}if(Gt)return a=Bn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==vd&&(i=Error(s(422),{cause:d}),Ao(ns(i,c)))):(d!==vd&&(a=Error(s(423),{cause:d}),Ao(ns(a,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=ns(d,c),g=tf(i.stateNode,d,g),Dd(i,g),Te!==4&&(Te=2)),!1;var y=Error(s(520),{cause:d});if(y=ns(y,c),Ho===null?Ho=[y]:Ho.push(y),Te!==4&&(Te=2),a===null)return!0;d=ns(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=tf(c.stateNode,d,i),Dd(c,i),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ni===null||!Ni.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=bb(g),vb(g,i,c,d),Dd(c,g),!1}c=c.return}while(c!==null);return!1}var ef=Error(s(461)),Pe=!1;function sn(i,a,c,d){a.child=i===null?Ay(a,null,c,d):fr(a,i.child,c,d)}function wb(i,a,c,d,g){c=c.render;var y=a.ref;if("ref"in d){var x={};for(var C in d)C!=="ref"&&(x[C]=d[C])}else x=d;return cr(a),d=Fd(i,a,c,x,y,g),C=zd(),i!==null&&!Pe?(jd(i,a,g),Qs(i,a,g)):(Gt&&C&&yd(a),a.flags|=1,sn(i,a,d,g),a.child)}function Sb(i,a,c,d,g){if(i===null){var y=c.type;return typeof y=="function"&&!pd(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,xb(i,a,y,d,g)):(i=wc(c.type,null,d,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!uf(i,g)){var x=y.memoizedProps;if(c=c.compare,c=c!==null?c:wo,c(x,d)&&i.ref===a.ref)return Qs(i,a,g)}return a.flags|=1,i=Gs(y,d),i.ref=a.ref,i.return=a,a.child=i}function xb(i,a,c,d,g){if(i!==null){var y=i.memoizedProps;if(wo(y,d)&&i.ref===a.ref)if(Pe=!1,a.pendingProps=d=y,uf(i,g))(i.flags&131072)!==0&&(Pe=!0);else return a.lanes=i.lanes,Qs(i,a,g)}return nf(i,a,c,d,g)}function Ab(i,a,c,d){var g=d.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,i!==null){for(d=a.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,a.child=null;return Eb(i,a,y,c,d)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ec(a,y!==null?y.cachePool:null),y!==null?Ty(a,y):Md(),Cy(a);else return d=a.lanes=536870912,Eb(i,a,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(Ec(a,y.cachePool),Ty(a,y),Oi(),a.memoizedState=null):(i!==null&&Ec(a,null),Md(),Oi());return sn(i,a,g,c),a.child}function Po(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Eb(i,a,c,d,g){var y=Td();return y=y===null?null:{parent:Ne._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},i!==null&&Ec(a,null),Md(),Cy(a),i!==null&&oa(i,a,d,!0),a.childLanes=g,null}function Ic(i,a){return a=Hc({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function _b(i,a,c){return fr(a,i.child,null,c),i=Ic(a,a.pendingProps),i.flags|=2,In(a),a.memoizedState=null,i}function t1(i,a,c){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(Gt){if(d.mode==="hidden")return i=Ic(a,d),a.lanes=536870912,Po(null,i);if(Ld(a),(i=pe)?(i=z0(i,rs),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Si!==null?{id:Rs,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},c=ly(i),c.return=a,a.child=c,en=a,pe=null)):i=null,i===null)throw Ai(a);return a.lanes=536870912,null}return Ic(a,d)}var y=i.memoizedState;if(y!==null){var x=y.dehydrated;if(Ld(a),g)if(a.flags&256)a.flags&=-257,a=_b(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(s(558));else if(Pe||oa(i,a,c,!1),g=(c&i.childLanes)!==0,Pe||g){if(d=oe,d!==null&&(x=mg(d,c),x!==0&&x!==y.retryLane))throw y.retryLane=x,rr(i,x),On(d,i,x),ef;Wc(),a=_b(i,a,c)}else i=y.treeContext,pe=os(x.nextSibling),en=a,Gt=!0,xi=null,rs=!1,i!==null&&hy(a,i),a=Ic(a,d),a.flags|=4096;return a}return i=Gs(i.child,{mode:d.mode,children:d.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Uc(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function nf(i,a,c,d,g){return cr(a),c=Fd(i,a,c,d,void 0,g),d=zd(),i!==null&&!Pe?(jd(i,a,g),Qs(i,a,g)):(Gt&&d&&yd(a),a.flags|=1,sn(i,a,c,g),a.child)}function Tb(i,a,c,d,g,y){return cr(a),a.updateQueue=null,c=Oy(a,d,c,g),Ry(i),d=zd(),i!==null&&!Pe?(jd(i,a,y),Qs(i,a,y)):(Gt&&d&&yd(a),a.flags|=1,sn(i,a,c,y),a.child)}function Cb(i,a,c,d,g){if(cr(a),a.stateNode===null){var y=sa,x=c.contextType;typeof x=="object"&&x!==null&&(y=nn(x)),y=new c(d,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Jd,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=d,y.state=a.memoizedState,y.refs={},Rd(a),x=c.contextType,y.context=typeof x=="object"&&x!==null?nn(x):sa,y.state=a.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(Qd(a,c,x,d),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Jd.enqueueReplaceState(y,y.state,null),Do(a,d,y,g),Oo(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){y=a.stateNode;var C=a.memoizedProps,P=mr(c,C);y.props=P;var G=y.context,tt=c.contextType;x=sa,typeof tt=="object"&&tt!==null&&(x=nn(tt));var st=c.getDerivedStateFromProps;tt=typeof st=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,tt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||G!==x)&&fb(a,y,d,x),_i=!1;var Z=a.memoizedState;y.state=Z,Do(a,d,y,g),Oo(),G=a.memoizedState,C||Z!==G||_i?(typeof st=="function"&&(Qd(a,c,st,d),G=a.memoizedState),(P=_i||db(a,c,P,d,Z,G,x))?(tt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=G),y.props=d,y.state=G,y.context=x,d=P):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{y=a.stateNode,Od(i,a),x=a.memoizedProps,tt=mr(c,x),y.props=tt,st=a.pendingProps,Z=y.context,G=c.contextType,P=sa,typeof G=="object"&&G!==null&&(P=nn(G)),C=c.getDerivedStateFromProps,(G=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==st||Z!==P)&&fb(a,y,d,P),_i=!1,Z=a.memoizedState,y.state=Z,Do(a,d,y,g),Oo();var Q=a.memoizedState;x!==st||Z!==Q||_i||i!==null&&i.dependencies!==null&&xc(i.dependencies)?(typeof C=="function"&&(Qd(a,c,C,d),Q=a.memoizedState),(tt=_i||db(a,c,tt,d,Z,Q,P)||i!==null&&i.dependencies!==null&&xc(i.dependencies))?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,Q,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,Q,P)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=Q),y.props=d,y.state=Q,y.context=P,d=tt):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),d=!1)}return y=d,Uc(i,a),d=(a.flags&128)!==0,y||d?(y=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&d?(a.child=fr(a,i.child,null,g),a.child=fr(a,null,c,g)):sn(i,a,c,g),a.memoizedState=y.state,i=a.child):i=Qs(i,a,g),i}function Rb(i,a,c,d){return or(),a.flags|=256,sn(i,a,c,d),a.child}var sf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rf(i){return{baseLanes:i,cachePool:yy()}}function af(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Hn),i}function Ob(i,a,c){var d=a.pendingProps,g=!1,y=(a.flags&128)!==0,x;if((x=y)||(x=i!==null&&i.memoizedState===null?!1:(Ce.current&2)!==0),x&&(g=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,i===null){if(Gt){if(g?Ri(a):Oi(),(i=pe)?(i=z0(i,rs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Si!==null?{id:Rs,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},c=ly(i),c.return=a,a.child=c,en=a,pe=null)):i=null,i===null)throw Ai(a);return Hf(i)?a.lanes=32:a.lanes=536870912,null}var C=d.children;return d=d.fallback,g?(Oi(),g=a.mode,C=Hc({mode:"hidden",children:C},g),d=ar(d,g,c,null),C.return=a,d.return=a,C.sibling=d,a.child=C,d=a.child,d.memoizedState=rf(c),d.childLanes=af(i,x,c),a.memoizedState=sf,Po(null,d)):(Ri(a),of(a,C))}var P=i.memoizedState;if(P!==null&&(C=P.dehydrated,C!==null)){if(y)a.flags&256?(Ri(a),a.flags&=-257,a=lf(i,a,c)):a.memoizedState!==null?(Oi(),a.child=i.child,a.flags|=128,a=null):(Oi(),C=d.fallback,g=a.mode,d=Hc({mode:"visible",children:d.children},g),C=ar(C,g,c,null),C.flags|=2,d.return=a,C.return=a,d.sibling=C,a.child=d,fr(a,i.child,null,c),d=a.child,d.memoizedState=rf(c),d.childLanes=af(i,x,c),a.memoizedState=sf,a=Po(null,d));else if(Ri(a),Hf(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var G=x.dgst;x=G,d=Error(s(419)),d.stack="",d.digest=x,Ao({value:d,source:null,stack:null}),a=lf(i,a,c)}else if(Pe||oa(i,a,c,!1),x=(c&i.childLanes)!==0,Pe||x){if(x=oe,x!==null&&(d=mg(x,c),d!==0&&d!==P.retryLane))throw P.retryLane=d,rr(i,d),On(x,i,d),ef;Uf(C)||Wc(),a=lf(i,a,c)}else Uf(C)?(a.flags|=192,a.child=i.child,a=null):(i=P.treeContext,pe=os(C.nextSibling),en=a,Gt=!0,xi=null,rs=!1,i!==null&&hy(a,i),a=of(a,d.children),a.flags|=4096);return a}return g?(Oi(),C=d.fallback,g=a.mode,P=i.child,G=P.sibling,d=Gs(P,{mode:"hidden",children:d.children}),d.subtreeFlags=P.subtreeFlags&65011712,G!==null?C=Gs(G,C):(C=ar(C,g,c,null),C.flags|=2),C.return=a,d.return=a,d.sibling=C,a.child=d,Po(null,d),d=a.child,C=i.child.memoizedState,C===null?C=rf(c):(g=C.cachePool,g!==null?(P=Ne._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=yy(),C={baseLanes:C.baseLanes|c,cachePool:g}),d.memoizedState=C,d.childLanes=af(i,x,c),a.memoizedState=sf,Po(i.child,d)):(Ri(a),c=i.child,i=c.sibling,c=Gs(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,i!==null&&(x=a.deletions,x===null?(a.deletions=[i],a.flags|=16):x.push(i)),a.child=c,a.memoizedState=null,c)}function of(i,a){return a=Hc({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Hc(i,a){return i=jn(22,i,null,a),i.lanes=0,i}function lf(i,a,c){return fr(a,i.child,null,c),i=of(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Db(i,a,c){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),xd(i.return,a,c)}function cf(i,a,c,d,g,y){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=c,x.tailMode=g,x.treeForkCount=y)}function kb(i,a,c){var d=a.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var x=Ce.current,C=(x&2)!==0;if(C?(x=x&1|2,a.flags|=128):x&=1,nt(Ce,x),sn(i,a,d,c),d=Gt?xo:0,!C&&i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Db(i,c,a);else if(i.tag===19)Db(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&Dc(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),cf(a,!1,g,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Dc(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}cf(a,!0,c,null,y,d);break;case"together":cf(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Qs(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Mi|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(oa(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,c=Gs(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Gs(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function uf(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&xc(i)))}function e1(i,a,c){switch(a.tag){case 3:Jt(a,a.stateNode.containerInfo),Ei(a,Ne,i.memoizedState.cache),or();break;case 27:case 5:Zt(a);break;case 4:Jt(a,a.stateNode.containerInfo);break;case 10:Ei(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ld(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Ri(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Ob(i,a,c):(Ri(a),i=Qs(i,a,c),i!==null?i.sibling:null);Ri(a);break;case 19:var g=(i.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(oa(i,a,c,!1),d=(c&a.childLanes)!==0),g){if(d)return kb(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nt(Ce,Ce.current),d)break;return null;case 22:return a.lanes=0,Ab(i,a,c,a.pendingProps);case 24:Ei(a,Ne,i.memoizedState.cache)}return Qs(i,a,c)}function Mb(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)Pe=!0;else{if(!uf(i,c)&&(a.flags&128)===0)return Pe=!1,e1(i,a,c);Pe=(i.flags&131072)!==0}else Pe=!1,Gt&&(a.flags&1048576)!==0&&uy(a,xo,a.index);switch(a.lanes=0,a.tag){case 16:t:{var d=a.pendingProps;if(i=hr(a.elementType),a.type=i,typeof i=="function")pd(i)?(d=mr(i,d),a.tag=1,a=Cb(null,a,i,d,c)):(a.tag=0,a=nf(null,a,i,d,c));else{if(i!=null){var g=i.$$typeof;if(g===O){a.tag=11,a=wb(null,a,i,d,c);break t}else if(g===N){a.tag=14,a=Sb(null,a,i,d,c);break t}}throw a=ot(i)||i,Error(s(306,a,""))}}return a;case 0:return nf(i,a,a.type,a.pendingProps,c);case 1:return d=a.type,g=mr(d,a.pendingProps),Cb(i,a,d,g,c);case 3:t:{if(Jt(a,a.stateNode.containerInfo),i===null)throw Error(s(387));d=a.pendingProps;var y=a.memoizedState;g=y.element,Od(i,a),Do(a,d,null,c);var x=a.memoizedState;if(d=x.cache,Ei(a,Ne,d),d!==y.cache&&Ad(a,[Ne],c,!0),Oo(),d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Rb(i,a,d,c);break t}else if(d!==g){g=ns(Error(s(424)),a),Ao(g),a=Rb(i,a,d,c);break t}else for(i=a.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,pe=os(i.firstChild),en=a,Gt=!0,xi=null,rs=!0,c=Ay(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(or(),d===g){a=Qs(i,a,c);break t}sn(i,a,d,c)}a=a.child}return a;case 26:return Uc(i,a),i===null?(c=$0(a.type,null,a.pendingProps,null))?a.memoizedState=c:Gt||(c=a.type,i=a.pendingProps,d=iu(xt.current).createElement(c),d[tn]=a,d[An]=i,rn(d,c,i),Ge(d),a.stateNode=d):a.memoizedState=$0(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Zt(a),i===null&&Gt&&(d=a.stateNode=I0(a.type,a.pendingProps,xt.current),en=a,rs=!0,g=pe,zi(a.type)?($f=g,pe=os(d.firstChild)):pe=g),sn(i,a,a.pendingProps.children,c),Uc(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Gt&&((g=d=pe)&&(d=k1(d,a.type,a.pendingProps,rs),d!==null?(a.stateNode=d,en=a,pe=os(d.firstChild),rs=!1,g=!0):g=!1),g||Ai(a)),Zt(a),g=a.type,y=a.pendingProps,x=i!==null?i.memoizedProps:null,d=y.children,jf(g,y)?d=null:x!==null&&jf(g,x)&&(a.flags|=32),a.memoizedState!==null&&(g=Fd(i,a,G_,null,null,c),Ko._currentValue=g),Uc(i,a),sn(i,a,d,c),a.child;case 6:return i===null&&Gt&&((i=c=pe)&&(c=M1(c,a.pendingProps,rs),c!==null?(a.stateNode=c,en=a,pe=null,i=!0):i=!1),i||Ai(a)),null;case 13:return Ob(i,a,c);case 4:return Jt(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=fr(a,null,d,c):sn(i,a,d,c),a.child;case 11:return wb(i,a,a.type,a.pendingProps,c);case 7:return sn(i,a,a.pendingProps,c),a.child;case 8:return sn(i,a,a.pendingProps.children,c),a.child;case 12:return sn(i,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,Ei(a,a.type,d.value),sn(i,a,d.children,c),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,cr(a),g=nn(g),d=d(g),a.flags|=1,sn(i,a,d,c),a.child;case 14:return Sb(i,a,a.type,a.pendingProps,c);case 15:return xb(i,a,a.type,a.pendingProps,c);case 19:return kb(i,a,c);case 31:return t1(i,a,c);case 22:return Ab(i,a,c,a.pendingProps);case 24:return cr(a),d=nn(Ne),i===null?(g=Td(),g===null&&(g=oe,y=Ed(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),a.memoizedState={parent:d,cache:g},Rd(a),Ei(a,Ne,g)):((i.lanes&c)!==0&&(Od(i,a),Do(a,null,null,c),Oo()),g=i.memoizedState,y=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ei(a,Ne,d)):(d=y.cache,Ei(a,Ne,d),d!==g.cache&&Ad(a,[Ne],c,!0))),sn(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Js(i){i.flags|=4}function hf(i,a,c,d,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(r0())i.flags|=8192;else throw dr=Tc,Cd}else i.flags&=-16777217}function Nb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!X0(a))if(r0())i.flags|=8192;else throw dr=Tc,Cd}function $c(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?dg():536870912,i.lanes|=a,va|=a)}function Fo(i,a){if(!Gt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function me(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=c,a}function n1(i,a,c){var d=a.pendingProps;switch(bd(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(a),null;case 1:return me(a),null;case 3:return c=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Zs(Ne),jt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(aa(a)?Js(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,wd())),me(a),null;case 26:var g=a.type,y=a.memoizedState;return i===null?(Js(a),y!==null?(me(a),Nb(a,y)):(me(a),hf(a,g,null,d,c))):y?y!==i.memoizedState?(Js(a),me(a),Nb(a,y)):(me(a),a.flags&=-16777217):(i=i.memoizedProps,i!==d&&Js(a),me(a),hf(a,g,i,d,c)),null;case 27:if(qe(a),c=xt.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&Js(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return me(a),null}i=ct.current,aa(a)?dy(a):(i=I0(g,d,c),a.stateNode=i,Js(a))}return me(a),null;case 5:if(qe(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&Js(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return me(a),null}if(y=ct.current,aa(a))dy(a);else{var x=iu(xt.current);switch(y){case 1:y=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=x.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?x.createElement(g,{is:d.is}):x.createElement(g)}}y[tn]=a,y[An]=d;t:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)y.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break t;for(;x.sibling===null;){if(x.return===null||x.return===a)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=y;t:switch(rn(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Js(a)}}return me(a),hf(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&Js(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(s(166));if(i=xt.current,aa(a)){if(i=a.stateNode,c=a.memoizedProps,d=null,g=en,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[tn]=a,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||O0(i.nodeValue,c)),i||Ai(a,!0)}else i=iu(i).createTextNode(d),i[tn]=a,a.stateNode=i}return me(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(d=aa(a),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[tn]=a}else or(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;me(a),i=!1}else c=wd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(In(a),a):(In(a),null);if((a.flags&128)!==0)throw Error(s(558))}return me(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=aa(a),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[tn]=a}else or(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;me(a),g=!1}else g=wd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(In(a),a):(In(a),null)}return In(a),(a.flags&128)!==0?(a.lanes=c,a):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),$c(a,a.updateQueue),me(a),null);case 4:return jt(),i===null&&Nf(a.stateNode.containerInfo),me(a),null;case 10:return Zs(a.type),me(a),null;case 19:if(X(Ce),d=a.memoizedState,d===null)return me(a),null;if(g=(a.flags&128)!==0,y=d.rendering,y===null)if(g)Fo(d,!1);else{if(Te!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=Dc(i),y!==null){for(a.flags|=128,Fo(d,!1),i=y.updateQueue,a.updateQueue=i,$c(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)oy(c,i),c=c.sibling;return nt(Ce,Ce.current&1|2),Gt&&Ys(a,d.treeForkCount),a.child}i=i.sibling}d.tail!==null&&ut()>Xc&&(a.flags|=128,g=!0,Fo(d,!1),a.lanes=4194304)}else{if(!g)if(i=Dc(y),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,$c(a,i),Fo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Gt)return me(a),null}else 2*ut()-d.renderingStartTime>Xc&&c!==536870912&&(a.flags|=128,g=!0,Fo(d,!1),a.lanes=4194304);d.isBackwards?(y.sibling=a.child,a.child=y):(i=d.last,i!==null?i.sibling=y:a.child=y,d.last=y)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=ut(),i.sibling=null,c=Ce.current,nt(Ce,g?c&1|2:c&1),Gt&&Ys(a,d.treeForkCount),i):(me(a),null);case 22:case 23:return In(a),Nd(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(me(a),a.subtreeFlags&6&&(a.flags|=8192)):me(a),c=a.updateQueue,c!==null&&$c(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),i!==null&&X(ur),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Zs(Ne),me(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function s1(i,a){switch(bd(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Zs(Ne),jt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return qe(a),null;case 31:if(a.memoizedState!==null){if(In(a),a.alternate===null)throw Error(s(340));or()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(In(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));or()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return X(Ce),null;case 4:return jt(),null;case 10:return Zs(a.type),null;case 22:case 23:return In(a),Nd(),i!==null&&X(ur),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Zs(Ne),null;case 25:return null;default:return null}}function Lb(i,a){switch(bd(a),a.tag){case 3:Zs(Ne),jt();break;case 26:case 27:case 5:qe(a);break;case 4:jt();break;case 31:a.memoizedState!==null&&In(a);break;case 13:In(a);break;case 19:X(Ce);break;case 10:Zs(a.type);break;case 22:case 23:In(a),Nd(),i!==null&&X(ur);break;case 24:Zs(Ne)}}function zo(i,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&i)===i){d=void 0;var y=c.create,x=c.inst;d=y(),x.destroy=d}c=c.next}while(c!==g)}}catch(C){ee(a,a.return,C)}}function Di(i,a,c){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&i)===i){var x=d.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,g=a;var P=c,G=C;try{G()}catch(tt){ee(g,P,tt)}}}d=d.next}while(d!==y)}}catch(tt){ee(a,a.return,tt)}}function Pb(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{_y(a,c)}catch(d){ee(i,i.return,d)}}}function Fb(i,a,c){c.props=mr(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){ee(i,a,d)}}function jo(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(g){ee(i,a,g)}}function Ds(i,a){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){ee(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){ee(i,a,g)}else c.current=null}function zb(i){var a=i.type,c=i.memoizedProps,d=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){ee(i,i.return,g)}}function df(i,a,c){try{var d=i.stateNode;_1(d,i.type,c,a),d[An]=a}catch(g){ee(i,i.return,g)}}function jb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&zi(i.type)||i.tag===4}function ff(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||jb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&zi(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function pf(i,a,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Vs));else if(d!==4&&(d===27&&zi(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(pf(i,a,c),i=i.sibling;i!==null;)pf(i,a,c),i=i.sibling}function Vc(i,a,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(d!==4&&(d===27&&zi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Vc(i,a,c),i=i.sibling;i!==null;)Vc(i,a,c),i=i.sibling}function Bb(i){var a=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);rn(a,d,c),a[tn]=i,a[An]=c}catch(y){ee(i,i.return,y)}}var ti=!1,Fe=!1,mf=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function i1(i,a){if(i=i.containerInfo,Ff=hu,i=Qg(i),od(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var x=0,C=-1,P=-1,G=0,tt=0,st=i,Z=null;e:for(;;){for(var Q;st!==c||g!==0&&st.nodeType!==3||(C=x+g),st!==y||d!==0&&st.nodeType!==3||(P=x+d),st.nodeType===3&&(x+=st.nodeValue.length),(Q=st.firstChild)!==null;)Z=st,st=Q;for(;;){if(st===i)break e;if(Z===c&&++G===g&&(C=x),Z===y&&++tt===d&&(P=x),(Q=st.nextSibling)!==null)break;st=Z,Z=st.parentNode}st=Q}c=C===-1||P===-1?null:{start:C,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(zf={focusedElem:i,selectionRange:c},hu=!1,Ye=a;Ye!==null;)if(a=Ye,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Ye=i;else for(;Ye!==null;){switch(a=Ye,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=a,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var yt=mr(c.type,g);i=d.getSnapshotBeforeUpdate(yt,y),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){ee(c,c.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)If(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":If(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,Ye=i;break}Ye=a.return}}function Ub(i,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ni(i,c),d&4&&zo(5,c);break;case 1:if(ni(i,c),d&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(x){ee(c,c.return,x)}else{var g=mr(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(x){ee(c,c.return,x)}}d&64&&Pb(c),d&512&&jo(c,c.return);break;case 3:if(ni(i,c),d&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{_y(i,a)}catch(x){ee(c,c.return,x)}}break;case 27:a===null&&d&4&&Bb(c);case 26:case 5:ni(i,c),a===null&&d&4&&zb(c),d&512&&jo(c,c.return);break;case 12:ni(i,c);break;case 31:ni(i,c),d&4&&Vb(i,c);break;case 13:ni(i,c),d&4&&qb(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=f1.bind(null,c),N1(i,c))));break;case 22:if(d=c.memoizedState!==null||ti,!d){a=a!==null&&a.memoizedState!==null||Fe,g=ti;var y=Fe;ti=d,(Fe=a)&&!y?si(i,c,(c.subtreeFlags&8772)!==0):ni(i,c),ti=g,Fe=y}break;case 30:break;default:ni(i,c)}}function Hb(i){var a=i.alternate;a!==null&&(i.alternate=null,Hb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Vh(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ge=null,_n=!1;function ei(i,a,c){for(c=c.child;c!==null;)$b(i,a,c),c=c.sibling}function $b(i,a,c){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Ji,c)}catch{}switch(c.tag){case 26:Fe||Ds(c,a),ei(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Fe||Ds(c,a);var d=ge,g=_n;zi(c.type)&&(ge=c.stateNode,_n=!1),ei(i,a,c),Yo(c.stateNode),ge=d,_n=g;break;case 5:Fe||Ds(c,a);case 6:if(d=ge,g=_n,ge=null,ei(i,a,c),ge=d,_n=g,ge!==null)if(_n)try{(ge.nodeType===9?ge.body:ge.nodeName==="HTML"?ge.ownerDocument.body:ge).removeChild(c.stateNode)}catch(y){ee(c,a,y)}else try{ge.removeChild(c.stateNode)}catch(y){ee(c,a,y)}break;case 18:ge!==null&&(_n?(i=ge,P0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ca(i)):P0(ge,c.stateNode));break;case 4:d=ge,g=_n,ge=c.stateNode.containerInfo,_n=!0,ei(i,a,c),ge=d,_n=g;break;case 0:case 11:case 14:case 15:Di(2,c,a),Fe||Di(4,c,a),ei(i,a,c);break;case 1:Fe||(Ds(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Fb(c,a,d)),ei(i,a,c);break;case 21:ei(i,a,c);break;case 22:Fe=(d=Fe)||c.memoizedState!==null,ei(i,a,c),Fe=d;break;default:ei(i,a,c)}}function Vb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ca(i)}catch(c){ee(a,a.return,c)}}}function qb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ca(i)}catch(c){ee(a,a.return,c)}}function r1(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Ib),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Ib),a;default:throw Error(s(435,i.tag))}}function qc(i,a){var c=r1(i);a.forEach(function(d){if(!c.has(d)){c.add(d);var g=p1.bind(null,i,d);d.then(g,g)}})}function Tn(i,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=i,x=a,C=x;t:for(;C!==null;){switch(C.tag){case 27:if(zi(C.type)){ge=C.stateNode,_n=!1;break t}break;case 5:ge=C.stateNode,_n=!1;break t;case 3:case 4:ge=C.stateNode.containerInfo,_n=!0;break t}C=C.return}if(ge===null)throw Error(s(160));$b(y,x,g),ge=null,_n=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Gb(a,i),a=a.sibling}var gs=null;function Gb(i,a){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Tn(a,i),Cn(i),d&4&&(Di(3,i,i.return),zo(3,i),Di(5,i,i.return));break;case 1:Tn(a,i),Cn(i),d&512&&(Fe||c===null||Ds(c,c.return)),d&64&&ti&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=gs;if(Tn(a,i),Cn(i),d&512&&(Fe||c===null||Ds(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){t:{d=i.type,c=i.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[uo]||y[tn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),rn(y,d,c),y[tn]=i,Ge(y),d=y;break t;case"link":var x=G0("link","href",g).get(d+(c.href||""));if(x){for(var C=0;C<x.length;C++)if(y=x[C],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(C,1);break e}}y=g.createElement(d),rn(y,d,c),g.head.appendChild(y);break;case"meta":if(x=G0("meta","content",g).get(d+(c.content||""))){for(C=0;C<x.length;C++)if(y=x[C],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(C,1);break e}}y=g.createElement(d),rn(y,d,c),g.head.appendChild(y);break;default:throw Error(s(468,d))}y[tn]=i,Ge(y),d=y}i.stateNode=d}else Y0(g,i.type,i.stateNode);else i.stateNode=q0(g,d,i.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?Y0(g,i.type,i.stateNode):q0(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&df(i,i.memoizedProps,c.memoizedProps)}break;case 27:Tn(a,i),Cn(i),d&512&&(Fe||c===null||Ds(c,c.return)),c!==null&&d&4&&df(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Tn(a,i),Cn(i),d&512&&(Fe||c===null||Ds(c,c.return)),i.flags&32){g=i.stateNode;try{Kr(g,"")}catch(yt){ee(i,i.return,yt)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,df(i,g,c!==null?c.memoizedProps:g)),d&1024&&(mf=!0);break;case 6:if(Tn(a,i),Cn(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(yt){ee(i,i.return,yt)}}break;case 3:if(ou=null,g=gs,gs=ru(a.containerInfo),Tn(a,i),gs=g,Cn(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ca(a.containerInfo)}catch(yt){ee(i,i.return,yt)}mf&&(mf=!1,Yb(i));break;case 4:d=gs,gs=ru(i.stateNode.containerInfo),Tn(a,i),Cn(i),gs=d;break;case 12:Tn(a,i),Cn(i);break;case 31:Tn(a,i),Cn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,qc(i,d)));break;case 13:Tn(a,i),Cn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Yc=ut()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,qc(i,d)));break;case 22:g=i.memoizedState!==null;var P=c!==null&&c.memoizedState!==null,G=ti,tt=Fe;if(ti=G||g,Fe=tt||P,Tn(a,i),Fe=tt,ti=G,Cn(i),d&8192)t:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||P||ti||Fe||gr(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){P=c=a;try{if(y=P.stateNode,g)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=P.stateNode;var st=P.memoizedProps.style,Z=st!=null&&st.hasOwnProperty("display")?st.display:null;C.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(yt){ee(P,P.return,yt)}}}else if(a.tag===6){if(c===null){P=a;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(yt){ee(P,P.return,yt)}}}else if(a.tag===18){if(c===null){P=a;try{var Q=P.stateNode;g?F0(Q,!0):F0(P.stateNode,!1)}catch(yt){ee(P,P.return,yt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,qc(i,c))));break;case 19:Tn(a,i),Cn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,qc(i,d)));break;case 30:break;case 21:break;default:Tn(a,i),Cn(i)}}function Cn(i){var a=i.flags;if(a&2){try{for(var c,d=i.return;d!==null;){if(jb(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var g=c.stateNode,y=ff(i);Vc(i,y,g);break;case 5:var x=c.stateNode;c.flags&32&&(Kr(x,""),c.flags&=-33);var C=ff(i);Vc(i,C,x);break;case 3:case 4:var P=c.stateNode.containerInfo,G=ff(i);pf(i,G,P);break;default:throw Error(s(161))}}catch(tt){ee(i,i.return,tt)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Yb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Yb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ni(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ub(i,a.alternate,a),a=a.sibling}function gr(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Di(4,a,a.return),gr(a);break;case 1:Ds(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Fb(a,a.return,c),gr(a);break;case 27:Yo(a.stateNode);case 26:case 5:Ds(a,a.return),gr(a);break;case 22:a.memoizedState===null&&gr(a);break;case 30:gr(a);break;default:gr(a)}i=i.sibling}}function si(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=i,y=a,x=y.flags;switch(y.tag){case 0:case 11:case 15:si(g,y,c),zo(4,y);break;case 1:if(si(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(G){ee(d,d.return,G)}if(d=y,g=d.updateQueue,g!==null){var C=d.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)Ey(P[g],C)}catch(G){ee(d,d.return,G)}}c&&x&64&&Pb(y),jo(y,y.return);break;case 27:Bb(y);case 26:case 5:si(g,y,c),c&&d===null&&x&4&&zb(y),jo(y,y.return);break;case 12:si(g,y,c);break;case 31:si(g,y,c),c&&x&4&&Vb(g,y);break;case 13:si(g,y,c),c&&x&4&&qb(g,y);break;case 22:y.memoizedState===null&&si(g,y,c),jo(y,y.return);break;case 30:break;default:si(g,y,c)}a=a.sibling}}function gf(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Eo(c))}function yf(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Eo(i))}function ys(i,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Xb(i,a,c,d),a=a.sibling}function Xb(i,a,c,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ys(i,a,c,d),g&2048&&zo(9,a);break;case 1:ys(i,a,c,d);break;case 3:ys(i,a,c,d),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Eo(i)));break;case 12:if(g&2048){ys(i,a,c,d),i=a.stateNode;try{var y=a.memoizedProps,x=y.id,C=y.onPostCommit;typeof C=="function"&&C(x,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){ee(a,a.return,P)}}else ys(i,a,c,d);break;case 31:ys(i,a,c,d);break;case 13:ys(i,a,c,d);break;case 23:break;case 22:y=a.stateNode,x=a.alternate,a.memoizedState!==null?y._visibility&2?ys(i,a,c,d):Bo(i,a):y._visibility&2?ys(i,a,c,d):(y._visibility|=2,ga(i,a,c,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&gf(x,a);break;case 24:ys(i,a,c,d),g&2048&&yf(a.alternate,a);break;default:ys(i,a,c,d)}}function ga(i,a,c,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,x=a,C=c,P=d,G=x.flags;switch(x.tag){case 0:case 11:case 15:ga(y,x,C,P,g),zo(8,x);break;case 23:break;case 22:var tt=x.stateNode;x.memoizedState!==null?tt._visibility&2?ga(y,x,C,P,g):Bo(y,x):(tt._visibility|=2,ga(y,x,C,P,g)),g&&G&2048&&gf(x.alternate,x);break;case 24:ga(y,x,C,P,g),g&&G&2048&&yf(x.alternate,x);break;default:ga(y,x,C,P,g)}a=a.sibling}}function Bo(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,d=a,g=d.flags;switch(d.tag){case 22:Bo(c,d),g&2048&&gf(d.alternate,d);break;case 24:Bo(c,d),g&2048&&yf(d.alternate,d);break;default:Bo(c,d)}a=a.sibling}}var Io=8192;function ya(i,a,c){if(i.subtreeFlags&Io)for(i=i.child;i!==null;)Zb(i,a,c),i=i.sibling}function Zb(i,a,c){switch(i.tag){case 26:ya(i,a,c),i.flags&Io&&i.memoizedState!==null&&q1(c,gs,i.memoizedState,i.memoizedProps);break;case 5:ya(i,a,c);break;case 3:case 4:var d=gs;gs=ru(i.stateNode.containerInfo),ya(i,a,c),gs=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Io,Io=16777216,ya(i,a,c),Io=d):ya(i,a,c));break;default:ya(i,a,c)}}function Kb(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Uo(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];Ye=d,Qb(d,i)}Kb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Wb(i),i=i.sibling}function Wb(i){switch(i.tag){case 0:case 11:case 15:Uo(i),i.flags&2048&&Di(9,i,i.return);break;case 3:Uo(i);break;case 12:Uo(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Gc(i)):Uo(i);break;default:Uo(i)}}function Gc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];Ye=d,Qb(d,i)}Kb(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Di(8,a,a.return),Gc(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Gc(a));break;default:Gc(a)}i=i.sibling}}function Qb(i,a){for(;Ye!==null;){var c=Ye;switch(c.tag){case 0:case 11:case 15:Di(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Eo(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Ye=d;else t:for(c=i;Ye!==null;){d=Ye;var g=d.sibling,y=d.return;if(Hb(d),d===c){Ye=null;break t}if(g!==null){g.return=y,Ye=g;break t}Ye=y}}}var a1={getCacheForType:function(i){var a=nn(Ne),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return nn(Ne).controller.signal}},o1=typeof WeakMap=="function"?WeakMap:Map,Qt=0,oe=null,Ut=null,$t=0,te=0,Un=null,ki=!1,ba=!1,bf=!1,ii=0,Te=0,Mi=0,yr=0,vf=0,Hn=0,va=0,Ho=null,Rn=null,wf=!1,Yc=0,Jb=0,Xc=1/0,Zc=null,Ni=null,He=0,Li=null,wa=null,ri=0,Sf=0,xf=null,t0=null,$o=0,Af=null;function $n(){return(Qt&2)!==0&&$t!==0?$t&-$t:L.T!==null?Of():gg()}function e0(){if(Hn===0)if(($t&536870912)===0||Gt){var i=sc;sc<<=1,(sc&3932160)===0&&(sc=262144),Hn=i}else Hn=536870912;return i=Bn.current,i!==null&&(i.flags|=32),Hn}function On(i,a,c){(i===oe&&(te===2||te===9)||i.cancelPendingCommit!==null)&&(Sa(i,0),Pi(i,$t,Hn,!1)),co(i,c),((Qt&2)===0||i!==oe)&&(i===oe&&((Qt&2)===0&&(yr|=c),Te===4&&Pi(i,$t,Hn,!1)),ks(i))}function n0(i,a,c){if((Qt&6)!==0)throw Error(s(327));var d=!c&&(a&127)===0&&(a&i.expiredLanes)===0||lo(i,a),g=d?u1(i,a):_f(i,a,!0),y=d;do{if(g===0){ba&&!d&&Pi(i,a,0,!1);break}else{if(c=i.current.alternate,y&&!l1(c)){g=_f(i,a,!1),y=!1;continue}if(g===2){if(y=a,i.errorRecoveryDisabledLanes&y)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;t:{var C=i;g=Ho;var P=C.current.memoizedState.isDehydrated;if(P&&(Sa(C,x).flags|=256),x=_f(C,x,!1),x!==2){if(bf&&!P){C.errorRecoveryDisabledLanes|=y,yr|=y,g=4;break t}y=Rn,Rn=g,y!==null&&(Rn===null?Rn=y:Rn.push.apply(Rn,y))}g=x}if(y=!1,g!==2)continue}}if(g===1){Sa(i,0),Pi(i,a,0,!0);break}t:{switch(d=i,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Pi(d,a,Hn,!ki);break t;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(g=Yc+300-ut(),10<g)){if(Pi(d,a,Hn,!ki),rc(d,0,!0)!==0)break t;ri=a,d.timeoutHandle=N0(s0.bind(null,d,c,Rn,Zc,wf,a,Hn,yr,va,ki,y,"Throttled",-0,0),g);break t}s0(d,c,Rn,Zc,wf,a,Hn,yr,va,ki,y,null,-0,0)}}break}while(!0);ks(i)}function s0(i,a,c,d,g,y,x,C,P,G,tt,st,Z,Q){if(i.timeoutHandle=-1,st=a.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vs},Zb(a,y,st);var yt=(y&62914560)===y?Yc-ut():(y&4194048)===y?Jb-ut():0;if(yt=G1(st,yt),yt!==null){ri=y,i.cancelPendingCommit=yt(h0.bind(null,i,a,y,c,d,g,x,C,P,tt,st,null,Z,Q)),Pi(i,y,x,!G);return}}h0(i,a,y,c,d,g,x,C,P)}function l1(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!zn(y(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Pi(i,a,c,d){a&=~vf,a&=~yr,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var g=a;0<g;){var y=31-pn(g),x=1<<y;d[y]=-1,g&=~x}c!==0&&fg(i,c,a)}function Kc(){return(Qt&6)===0?(Vo(0),!1):!0}function Ef(){if(Ut!==null){if(te===0)var i=Ut.return;else i=Ut,Xs=lr=null,Bd(i),ha=null,To=0,i=Ut;for(;i!==null;)Lb(i.alternate,i),i=i.return;Ut=null}}function Sa(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,R1(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ri=0,Ef(),oe=i,Ut=c=Gs(i.current,null),$t=a,te=0,Un=null,ki=!1,ba=lo(i,a),bf=!1,va=Hn=vf=yr=Mi=Te=0,Rn=Ho=null,wf=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var g=31-pn(d),y=1<<g;a|=i[g],d&=~y}return ii=a,yc(),c}function i0(i,a){Nt=null,L.H=Lo,a===ua||a===_c?(a=wy(),te=3):a===Cd?(a=wy(),te=4):te=a===ef?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Un=a,Ut===null&&(Te=1,Bc(i,ns(a,i.current)))}function r0(){var i=Bn.current;return i===null?!0:($t&4194048)===$t?as===null:($t&62914560)===$t||($t&536870912)!==0?i===as:!1}function a0(){var i=L.H;return L.H=Lo,i===null?Lo:i}function o0(){var i=L.A;return L.A=a1,i}function Wc(){Te=4,ki||($t&4194048)!==$t&&Bn.current!==null||(ba=!0),(Mi&134217727)===0&&(yr&134217727)===0||oe===null||Pi(oe,$t,Hn,!1)}function _f(i,a,c){var d=Qt;Qt|=2;var g=a0(),y=o0();(oe!==i||$t!==a)&&(Zc=null,Sa(i,a)),a=!1;var x=Te;t:do try{if(te!==0&&Ut!==null){var C=Ut,P=Un;switch(te){case 8:Ef(),x=6;break t;case 3:case 2:case 9:case 6:Bn.current===null&&(a=!0);var G=te;if(te=0,Un=null,xa(i,C,P,G),c&&ba){x=0;break t}break;default:G=te,te=0,Un=null,xa(i,C,P,G)}}c1(),x=Te;break}catch(tt){i0(i,tt)}while(!0);return a&&i.shellSuspendCounter++,Xs=lr=null,Qt=d,L.H=g,L.A=y,Ut===null&&(oe=null,$t=0,yc()),x}function c1(){for(;Ut!==null;)l0(Ut)}function u1(i,a){var c=Qt;Qt|=2;var d=a0(),g=o0();oe!==i||$t!==a?(Zc=null,Xc=ut()+500,Sa(i,a)):ba=lo(i,a);t:do try{if(te!==0&&Ut!==null){a=Ut;var y=Un;e:switch(te){case 1:te=0,Un=null,xa(i,a,y,1);break;case 2:case 9:if(by(y)){te=0,Un=null,c0(a);break}a=function(){te!==2&&te!==9||oe!==i||(te=7),ks(i)},y.then(a,a);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:by(y)?(te=0,Un=null,c0(a)):(te=0,Un=null,xa(i,a,y,7));break;case 5:var x=null;switch(Ut.tag){case 26:x=Ut.memoizedState;case 5:case 27:var C=Ut;if(x?X0(x):C.stateNode.complete){te=0,Un=null;var P=C.sibling;if(P!==null)Ut=P;else{var G=C.return;G!==null?(Ut=G,Qc(G)):Ut=null}break e}}te=0,Un=null,xa(i,a,y,5);break;case 6:te=0,Un=null,xa(i,a,y,6);break;case 8:Ef(),Te=6;break t;default:throw Error(s(462))}}h1();break}catch(tt){i0(i,tt)}while(!0);return Xs=lr=null,L.H=d,L.A=g,Qt=c,Ut!==null?0:(oe=null,$t=0,yc(),Te)}function h1(){for(;Ut!==null&&!Y();)l0(Ut)}function l0(i){var a=Mb(i.alternate,i,ii);i.memoizedProps=i.pendingProps,a===null?Qc(i):Ut=a}function c0(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Tb(c,a,a.pendingProps,a.type,void 0,$t);break;case 11:a=Tb(c,a,a.pendingProps,a.type.render,a.ref,$t);break;case 5:Bd(a);default:Lb(c,a),a=Ut=oy(a,ii),a=Mb(c,a,ii)}i.memoizedProps=i.pendingProps,a===null?Qc(i):Ut=a}function xa(i,a,c,d){Xs=lr=null,Bd(a),ha=null,To=0;var g=a.return;try{if(J_(i,g,a,c,$t)){Te=1,Bc(i,ns(c,i.current)),Ut=null;return}}catch(y){if(g!==null)throw Ut=g,y;Te=1,Bc(i,ns(c,i.current)),Ut=null;return}a.flags&32768?(Gt||d===1?i=!0:ba||($t&536870912)!==0?i=!1:(ki=i=!0,(d===2||d===9||d===3||d===6)&&(d=Bn.current,d!==null&&d.tag===13&&(d.flags|=16384))),u0(a,i)):Qc(a)}function Qc(i){var a=i;do{if((a.flags&32768)!==0){u0(a,ki);return}i=a.return;var c=n1(a.alternate,a,ii);if(c!==null){Ut=c;return}if(a=a.sibling,a!==null){Ut=a;return}Ut=a=i}while(a!==null);Te===0&&(Te=5)}function u0(i,a){do{var c=s1(i.alternate,i);if(c!==null){c.flags&=32767,Ut=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){Ut=i;return}Ut=i=c}while(i!==null);Te=6,Ut=null}function h0(i,a,c,d,g,y,x,C,P){i.cancelPendingCommit=null;do Jc();while(He!==0);if((Qt&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(y=a.lanes|a.childLanes,y|=dd,VE(i,c,y,x,C,P),i===oe&&(Ut=oe=null,$t=0),wa=a,Li=i,ri=c,Sf=y,xf=g,t0=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,m1(Pt,function(){return g0(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=L.T,L.T=null,g=$.p,$.p=2,x=Qt,Qt|=4;try{i1(i,a,c)}finally{Qt=x,$.p=g,L.T=d}}He=1,d0(),f0(),p0()}}function d0(){if(He===1){He=0;var i=Li,a=wa,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var d=$.p;$.p=2;var g=Qt;Qt|=4;try{Gb(a,i);var y=zf,x=Qg(i.containerInfo),C=y.focusedElem,P=y.selectionRange;if(x!==C&&C&&C.ownerDocument&&Wg(C.ownerDocument.documentElement,C)){if(P!==null&&od(C)){var G=P.start,tt=P.end;if(tt===void 0&&(tt=G),"selectionStart"in C)C.selectionStart=G,C.selectionEnd=Math.min(tt,C.value.length);else{var st=C.ownerDocument||document,Z=st&&st.defaultView||window;if(Z.getSelection){var Q=Z.getSelection(),yt=C.textContent.length,Ct=Math.min(P.start,yt),re=P.end===void 0?Ct:Math.min(P.end,yt);!Q.extend&&Ct>re&&(x=re,re=Ct,Ct=x);var I=Kg(C,Ct),j=Kg(C,re);if(I&&j&&(Q.rangeCount!==1||Q.anchorNode!==I.node||Q.anchorOffset!==I.offset||Q.focusNode!==j.node||Q.focusOffset!==j.offset)){var q=st.createRange();q.setStart(I.node,I.offset),Q.removeAllRanges(),Ct>re?(Q.addRange(q),Q.extend(j.node,j.offset)):(q.setEnd(j.node,j.offset),Q.addRange(q))}}}}for(st=[],Q=C;Q=Q.parentNode;)Q.nodeType===1&&st.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<st.length;C++){var et=st[C];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}hu=!!Ff,zf=Ff=null}finally{Qt=g,$.p=d,L.T=c}}i.current=a,He=2}}function f0(){if(He===2){He=0;var i=Li,a=wa,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var d=$.p;$.p=2;var g=Qt;Qt|=4;try{Ub(i,a.alternate,a)}finally{Qt=g,$.p=d,L.T=c}}He=3}}function p0(){if(He===4||He===3){He=0,J();var i=Li,a=wa,c=ri,d=t0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?He=5:(He=0,wa=Li=null,m0(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ni=null),Hh(c),a=a.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Ji,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=L.T,g=$.p,$.p=2,L.T=null;try{for(var y=i.onRecoverableError,x=0;x<d.length;x++){var C=d[x];y(C.value,{componentStack:C.stack})}}finally{L.T=a,$.p=g}}(ri&3)!==0&&Jc(),ks(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===Af?$o++:($o=0,Af=i):$o=0,Vo(0)}}function m0(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Eo(a)))}function Jc(){return d0(),f0(),p0(),g0()}function g0(){if(He!==5)return!1;var i=Li,a=Sf;Sf=0;var c=Hh(ri),d=L.T,g=$.p;try{$.p=32>c?32:c,L.T=null,c=xf,xf=null;var y=Li,x=ri;if(He=0,wa=Li=null,ri=0,(Qt&6)!==0)throw Error(s(331));var C=Qt;if(Qt|=4,Wb(y.current),Xb(y,y.current,x,c),Qt=C,Vo(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Ji,y)}catch{}return!0}finally{$.p=g,L.T=d,m0(i,a)}}function y0(i,a,c){a=ns(c,a),a=tf(i.stateNode,a,2),i=Ci(i,a,2),i!==null&&(co(i,2),ks(i))}function ee(i,a,c){if(i.tag===3)y0(i,i,c);else for(;a!==null;){if(a.tag===3){y0(a,i,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ni===null||!Ni.has(d))){i=ns(c,i),c=bb(2),d=Ci(a,c,2),d!==null&&(vb(c,d,a,i),co(d,2),ks(d));break}}a=a.return}}function Tf(i,a,c){var d=i.pingCache;if(d===null){d=i.pingCache=new o1;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(c)||(bf=!0,g.add(c),i=d1.bind(null,i,a,c),a.then(i,i))}function d1(i,a,c){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,oe===i&&($t&c)===c&&(Te===4||Te===3&&($t&62914560)===$t&&300>ut()-Yc?(Qt&2)===0&&Sa(i,0):vf|=c,va===$t&&(va=0)),ks(i)}function b0(i,a){a===0&&(a=dg()),i=rr(i,a),i!==null&&(co(i,a),ks(i))}function f1(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),b0(i,c)}function p1(i,a){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(a),b0(i,c)}function m1(i,a){return bi(i,a)}var tu=null,Aa=null,Cf=!1,eu=!1,Rf=!1,Fi=0;function ks(i){i!==Aa&&i.next===null&&(Aa===null?tu=Aa=i:Aa=Aa.next=i),eu=!0,Cf||(Cf=!0,y1())}function Vo(i,a){if(!Rf&&eu){Rf=!0;do for(var c=!1,d=tu;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var x=d.suspendedLanes,C=d.pingedLanes;y=(1<<31-pn(42|i)+1)-1,y&=g&~(x&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,x0(d,y))}else y=$t,y=rc(d,d===oe?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||lo(d,y)||(c=!0,x0(d,y));d=d.next}while(c);Rf=!1}}function g1(){v0()}function v0(){eu=Cf=!1;var i=0;Fi!==0&&C1()&&(i=Fi);for(var a=ut(),c=null,d=tu;d!==null;){var g=d.next,y=w0(d,a);y===0?(d.next=null,c===null?tu=g:c.next=g,g===null&&(Aa=c)):(c=d,(i!==0||(y&3)!==0)&&(eu=!0)),d=g}He!==0&&He!==5||Vo(i),Fi!==0&&(Fi=0)}function w0(i,a){for(var c=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var x=31-pn(y),C=1<<x,P=g[x];P===-1?((C&c)===0||(C&d)!==0)&&(g[x]=$E(C,a)):P<=a&&(i.expiredLanes|=C),y&=~C}if(a=oe,c=$t,c=rc(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===a&&(te===2||te===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&F(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||lo(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(d!==null&&F(d),Hh(c)){case 2:case 8:c=pt;break;case 32:c=Pt;break;case 268435456:c=Ue;break;default:c=Pt}return d=S0.bind(null,i),c=bi(c,d),i.callbackPriority=a,i.callbackNode=c,a}return d!==null&&d!==null&&F(d),i.callbackPriority=2,i.callbackNode=null,2}function S0(i,a){if(He!==0&&He!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Jc()&&i.callbackNode!==c)return null;var d=$t;return d=rc(i,i===oe?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(n0(i,d,a),w0(i,ut()),i.callbackNode!=null&&i.callbackNode===c?S0.bind(null,i):null)}function x0(i,a){if(Jc())return null;n0(i,a,!0)}function y1(){O1(function(){(Qt&6)!==0?bi(lt,g1):v0()})}function Of(){if(Fi===0){var i=la;i===0&&(i=nc,nc<<=1,(nc&261888)===0&&(nc=256)),Fi=i}return Fi}function A0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:cc(""+i)}function E0(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function b1(i,a,c,d,g){if(a==="submit"&&c&&c.stateNode===g){var y=A0((g[An]||null).action),x=d.submitter;x&&(a=(a=x[An]||null)?A0(a.formAction):x.getAttribute("formAction"),a!==null&&(y=a,x=null));var C=new fc("action","action",null,d,g);i.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Fi!==0){var P=x?E0(g,x):new FormData(g);Xd(c,{pending:!0,data:P,method:g.method,action:y},null,P)}}else typeof y=="function"&&(C.preventDefault(),P=x?E0(g,x):new FormData(g),Xd(c,{pending:!0,data:P,method:g.method,action:y},y,P))},currentTarget:g}]})}}for(var Df=0;Df<hd.length;Df++){var kf=hd[Df],v1=kf.toLowerCase(),w1=kf[0].toUpperCase()+kf.slice(1);ms(v1,"on"+w1)}ms(ey,"onAnimationEnd"),ms(ny,"onAnimationIteration"),ms(sy,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(F_,"onTransitionRun"),ms(z_,"onTransitionStart"),ms(j_,"onTransitionCancel"),ms(iy,"onTransitionEnd"),Xr("onMouseEnter",["mouseout","mouseover"]),Xr("onMouseLeave",["mouseout","mouseover"]),Xr("onPointerEnter",["pointerout","pointerover"]),Xr("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function _0(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],g=d.event;d=d.listeners;t:{var y=void 0;if(a)for(var x=d.length-1;0<=x;x--){var C=d[x],P=C.instance,G=C.currentTarget;if(C=C.listener,P!==y&&g.isPropagationStopped())break t;y=C,g.currentTarget=G;try{y(g)}catch(tt){gc(tt)}g.currentTarget=null,y=P}else for(x=0;x<d.length;x++){if(C=d[x],P=C.instance,G=C.currentTarget,C=C.listener,P!==y&&g.isPropagationStopped())break t;y=C,g.currentTarget=G;try{y(g)}catch(tt){gc(tt)}g.currentTarget=null,y=P}}}}function Ht(i,a){var c=a[$h];c===void 0&&(c=a[$h]=new Set);var d=i+"__bubble";c.has(d)||(T0(a,i,2,!1),c.add(d))}function Mf(i,a,c){var d=0;a&&(d|=4),T0(c,i,d,a)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Nf(i){if(!i[nu]){i[nu]=!0,vg.forEach(function(c){c!=="selectionchange"&&(S1.has(c)||Mf(c,!1,i),Mf(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[nu]||(a[nu]=!0,Mf("selectionchange",!1,a))}}function T0(i,a,c,d){switch(ev(a)){case 2:var g=Z1;break;case 8:g=K1;break;default:g=Xf}c=g.bind(null,a,c,i),g=void 0,!Qh||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function Lf(i,a,c,d,g){var y=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var C=d.stateNode.containerInfo;if(C===g)break;if(x===4)for(x=d.return;x!==null;){var P=x.tag;if((P===3||P===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;C!==null;){if(x=qr(C),x===null)return;if(P=x.tag,P===5||P===6||P===26||P===27){d=y=x;continue t}C=C.parentNode}}d=d.return}kg(function(){var G=y,tt=Kh(c),st=[];t:{var Z=ry.get(i);if(Z!==void 0){var Q=fc,yt=i;switch(i){case"keypress":if(hc(c)===0)break t;case"keydown":case"keyup":Q=p_;break;case"focusin":yt="focus",Q=nd;break;case"focusout":yt="blur",Q=nd;break;case"beforeblur":case"afterblur":Q=nd;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=n_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=y_;break;case ey:case ny:case sy:Q=r_;break;case iy:Q=v_;break;case"scroll":case"scrollend":Q=t_;break;case"wheel":Q=S_;break;case"copy":case"cut":case"paste":Q=o_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Fg;break;case"toggle":case"beforetoggle":Q=A_}var Ct=(a&4)!==0,re=!Ct&&(i==="scroll"||i==="scrollend"),I=Ct?Z!==null?Z+"Capture":null:Z;Ct=[];for(var j=G,q;j!==null;){var et=j;if(q=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||q===null||I===null||(et=fo(j,I),et!=null&&Ct.push(Go(j,et,q))),re)break;j=j.return}0<Ct.length&&(Z=new Q(Z,yt,null,c,tt),st.push({event:Z,listeners:Ct}))}}if((a&7)===0){t:{if(Z=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",Z&&c!==Zh&&(yt=c.relatedTarget||c.fromElement)&&(qr(yt)||yt[Vr]))break t;if((Q||Z)&&(Z=tt.window===tt?tt:(Z=tt.ownerDocument)?Z.defaultView||Z.parentWindow:window,Q?(yt=c.relatedTarget||c.toElement,Q=G,yt=yt?qr(yt):null,yt!==null&&(re=o(yt),Ct=yt.tag,yt!==re||Ct!==5&&Ct!==27&&Ct!==6)&&(yt=null)):(Q=null,yt=G),Q!==yt)){if(Ct=Lg,et="onMouseLeave",I="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=Fg,et="onPointerLeave",I="onPointerEnter",j="pointer"),re=Q==null?Z:ho(Q),q=yt==null?Z:ho(yt),Z=new Ct(et,j+"leave",Q,c,tt),Z.target=re,Z.relatedTarget=q,et=null,qr(tt)===G&&(Ct=new Ct(I,j+"enter",yt,c,tt),Ct.target=q,Ct.relatedTarget=re,et=Ct),re=et,Q&&yt)e:{for(Ct=x1,I=Q,j=yt,q=0,et=I;et;et=Ct(et))q++;et=0;for(var At=j;At;At=Ct(At))et++;for(;0<q-et;)I=Ct(I),q--;for(;0<et-q;)j=Ct(j),et--;for(;q--;){if(I===j||j!==null&&I===j.alternate){Ct=I;break e}I=Ct(I),j=Ct(j)}Ct=null}else Ct=null;Q!==null&&C0(st,Z,Q,Ct,!1),yt!==null&&re!==null&&C0(st,re,yt,Ct,!0)}}t:{if(Z=G?ho(G):window,Q=Z.nodeName&&Z.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Z.type==="file")var Kt=Vg;else if(Hg(Z))if(qg)Kt=N_;else{Kt=k_;var wt=D_}else Q=Z.nodeName,!Q||Q.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?G&&Xh(G.elementType)&&(Kt=Vg):Kt=M_;if(Kt&&(Kt=Kt(i,G))){$g(st,Kt,c,tt);break t}wt&&wt(i,Z,G),i==="focusout"&&G&&Z.type==="number"&&G.memoizedProps.value!=null&&Yh(Z,"number",Z.value)}switch(wt=G?ho(G):window,i){case"focusin":(Hg(wt)||wt.contentEditable==="true")&&(ta=wt,ld=G,So=null);break;case"focusout":So=ld=ta=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,Jg(st,c,tt);break;case"selectionchange":if(P_)break;case"keydown":case"keyup":Jg(st,c,tt)}var Ft;if(id)t:{switch(i){case"compositionstart":var Vt="onCompositionStart";break t;case"compositionend":Vt="onCompositionEnd";break t;case"compositionupdate":Vt="onCompositionUpdate";break t}Vt=void 0}else Jr?Ig(i,c)&&(Vt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Vt="onCompositionStart");Vt&&(zg&&c.locale!=="ko"&&(Jr||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&Jr&&(Ft=Mg()):(wi=tt,Jh="value"in wi?wi.value:wi.textContent,Jr=!0)),wt=su(G,Vt),0<wt.length&&(Vt=new Pg(Vt,i,null,c,tt),st.push({event:Vt,listeners:wt}),Ft?Vt.data=Ft:(Ft=Ug(c),Ft!==null&&(Vt.data=Ft)))),(Ft=__?T_(i,c):C_(i,c))&&(Vt=su(G,"onBeforeInput"),0<Vt.length&&(wt=new Pg("onBeforeInput","beforeinput",null,c,tt),st.push({event:wt,listeners:Vt}),wt.data=Ft)),b1(st,i,G,c,tt)}_0(st,a)})}function Go(i,a,c){return{instance:i,listener:a,currentTarget:c}}function su(i,a){for(var c=a+"Capture",d=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=fo(i,c),g!=null&&d.unshift(Go(i,g,y)),g=fo(i,a),g!=null&&d.push(Go(i,g,y))),i.tag===3)return d;i=i.return}return[]}function x1(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function C0(i,a,c,d,g){for(var y=a._reactName,x=[];c!==null&&c!==d;){var C=c,P=C.alternate,G=C.stateNode;if(C=C.tag,P!==null&&P===d)break;C!==5&&C!==26&&C!==27||G===null||(P=G,g?(G=fo(c,y),G!=null&&x.unshift(Go(c,G,P))):g||(G=fo(c,y),G!=null&&x.push(Go(c,G,P)))),c=c.return}x.length!==0&&i.push({event:a,listeners:x})}var A1=/\r\n?/g,E1=/\u0000|\uFFFD/g;function R0(i){return(typeof i=="string"?i:""+i).replace(A1,`
`).replace(E1,"")}function O0(i,a){return a=R0(a),R0(i)===a}function ie(i,a,c,d,g,y){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Kr(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Kr(i,""+d);break;case"className":oc(i,"class",d);break;case"tabIndex":oc(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":oc(i,c,d);break;case"style":Og(i,d,y);break;case"data":if(a!=="object"){oc(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=cc(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ie(i,a,"name",g.name,g,null),ie(i,a,"formEncType",g.formEncType,g,null),ie(i,a,"formMethod",g.formMethod,g,null),ie(i,a,"formTarget",g.formTarget,g,null)):(ie(i,a,"encType",g.encType,g,null),ie(i,a,"method",g.method,g,null),ie(i,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=cc(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Vs);break;case"onScroll":d!=null&&Ht("scroll",i);break;case"onScrollEnd":d!=null&&Ht("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=cc(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":Ht("beforetoggle",i),Ht("toggle",i),ac(i,"popover",d);break;case"xlinkActuate":$s(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":$s(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":$s(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":$s(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":$s(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":$s(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":$s(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":$s(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":$s(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ac(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=QE.get(c)||c,ac(i,c,d))}}function Pf(i,a,c,d,g,y){switch(c){case"style":Og(i,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?Kr(i,d):(typeof d=="number"||typeof d=="bigint")&&Kr(i,""+d);break;case"onScroll":d!=null&&Ht("scroll",i);break;case"onScrollEnd":d!=null&&Ht("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wg.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),y=i[An]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(a,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,d,g);break t}c in i?i[c]=d:d===!0?i.setAttribute(c,""):ac(i,c,d)}}}function rn(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",i),Ht("load",i);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var x=c[y];if(x!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ie(i,a,y,x,c,null)}}g&&ie(i,a,"srcSet",c.srcSet,c,null),d&&ie(i,a,"src",c.src,c,null);return;case"input":Ht("invalid",i);var C=y=x=g=null,P=null,G=null;for(d in c)if(c.hasOwnProperty(d)){var tt=c[d];if(tt!=null)switch(d){case"name":g=tt;break;case"type":x=tt;break;case"checked":P=tt;break;case"defaultChecked":G=tt;break;case"value":y=tt;break;case"defaultValue":C=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(s(137,a));break;default:ie(i,a,d,tt,c,null)}}_g(i,y,C,P,G,x,g,!1);return;case"select":Ht("invalid",i),d=x=y=null;for(g in c)if(c.hasOwnProperty(g)&&(C=c[g],C!=null))switch(g){case"value":y=C;break;case"defaultValue":x=C;break;case"multiple":d=C;default:ie(i,a,g,C,c,null)}a=y,c=x,i.multiple=!!d,a!=null?Zr(i,!!d,a,!1):c!=null&&Zr(i,!!d,c,!0);return;case"textarea":Ht("invalid",i),y=g=d=null;for(x in c)if(c.hasOwnProperty(x)&&(C=c[x],C!=null))switch(x){case"value":d=C;break;case"defaultValue":g=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:ie(i,a,x,C,c,null)}Cg(i,d,g,y);return;case"option":for(P in c)c.hasOwnProperty(P)&&(d=c[P],d!=null)&&(P==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":ie(i,a,P,d,c,null));return;case"dialog":Ht("beforetoggle",i),Ht("toggle",i),Ht("cancel",i),Ht("close",i);break;case"iframe":case"object":Ht("load",i);break;case"video":case"audio":for(d=0;d<qo.length;d++)Ht(qo[d],i);break;case"image":Ht("error",i),Ht("load",i);break;case"details":Ht("toggle",i);break;case"embed":case"source":case"link":Ht("error",i),Ht("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in c)if(c.hasOwnProperty(G)&&(d=c[G],d!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ie(i,a,G,d,c,null)}return;default:if(Xh(a)){for(tt in c)c.hasOwnProperty(tt)&&(d=c[tt],d!==void 0&&Pf(i,a,tt,d,c,void 0));return}}for(C in c)c.hasOwnProperty(C)&&(d=c[C],d!=null&&ie(i,a,C,d,c,null))}function _1(i,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,x=null,C=null,P=null,G=null,tt=null;for(Q in c){var st=c[Q];if(c.hasOwnProperty(Q)&&st!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=st;default:d.hasOwnProperty(Q)||ie(i,a,Q,null,d,st)}}for(var Z in d){var Q=d[Z];if(st=c[Z],d.hasOwnProperty(Z)&&(Q!=null||st!=null))switch(Z){case"type":y=Q;break;case"name":g=Q;break;case"checked":G=Q;break;case"defaultChecked":tt=Q;break;case"value":x=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,a));break;default:Q!==st&&ie(i,a,Z,Q,d,st)}}Gh(i,x,C,P,G,tt,y,g);return;case"select":Q=x=C=Z=null;for(y in c)if(P=c[y],c.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":Q=P;default:d.hasOwnProperty(y)||ie(i,a,y,null,d,P)}for(g in d)if(y=d[g],P=c[g],d.hasOwnProperty(g)&&(y!=null||P!=null))switch(g){case"value":Z=y;break;case"defaultValue":C=y;break;case"multiple":x=y;default:y!==P&&ie(i,a,g,y,d,P)}a=C,c=x,d=Q,Z!=null?Zr(i,!!c,Z,!1):!!d!=!!c&&(a!=null?Zr(i,!!c,a,!0):Zr(i,!!c,c?[]:"",!1));return;case"textarea":Q=Z=null;for(C in c)if(g=c[C],c.hasOwnProperty(C)&&g!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ie(i,a,C,null,d,g)}for(x in d)if(g=d[x],y=c[x],d.hasOwnProperty(x)&&(g!=null||y!=null))switch(x){case"value":Z=g;break;case"defaultValue":Q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&ie(i,a,x,g,d,y)}Tg(i,Z,Q);return;case"option":for(var yt in c)Z=c[yt],c.hasOwnProperty(yt)&&Z!=null&&!d.hasOwnProperty(yt)&&(yt==="selected"?i.selected=!1:ie(i,a,yt,null,d,Z));for(P in d)Z=d[P],Q=c[P],d.hasOwnProperty(P)&&Z!==Q&&(Z!=null||Q!=null)&&(P==="selected"?i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":ie(i,a,P,Z,d,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in c)Z=c[Ct],c.hasOwnProperty(Ct)&&Z!=null&&!d.hasOwnProperty(Ct)&&ie(i,a,Ct,null,d,Z);for(G in d)if(Z=d[G],Q=c[G],d.hasOwnProperty(G)&&Z!==Q&&(Z!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,a));break;default:ie(i,a,G,Z,d,Q)}return;default:if(Xh(a)){for(var re in c)Z=c[re],c.hasOwnProperty(re)&&Z!==void 0&&!d.hasOwnProperty(re)&&Pf(i,a,re,void 0,d,Z);for(tt in d)Z=d[tt],Q=c[tt],!d.hasOwnProperty(tt)||Z===Q||Z===void 0&&Q===void 0||Pf(i,a,tt,Z,d,Q);return}}for(var I in c)Z=c[I],c.hasOwnProperty(I)&&Z!=null&&!d.hasOwnProperty(I)&&ie(i,a,I,null,d,Z);for(st in d)Z=d[st],Q=c[st],!d.hasOwnProperty(st)||Z===Q||Z==null&&Q==null||ie(i,a,st,Z,d,Q)}function D0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function T1(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],y=g.transferSize,x=g.initiatorType,C=g.duration;if(y&&C&&D0(x)){for(x=0,C=g.responseEnd,d+=1;d<c.length;d++){var P=c[d],G=P.startTime;if(G>C)break;var tt=P.transferSize,st=P.initiatorType;tt&&D0(st)&&(P=P.responseEnd,x+=tt*(P<C?1:(C-G)/(P-G)))}if(--d,a+=8*(y+x)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ff=null,zf=null;function iu(i){return i.nodeType===9?i:i.ownerDocument}function k0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M0(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function jf(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bf=null;function C1(){var i=window.event;return i&&i.type==="popstate"?i===Bf?!1:(Bf=i,!0):(Bf=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,R1=typeof clearTimeout=="function"?clearTimeout:void 0,L0=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof L0<"u"?function(i){return L0.resolve(null).then(i).catch(D1)}:N0;function D1(i){setTimeout(function(){throw i})}function zi(i){return i==="head"}function P0(i,a){var c=a,d=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(g),Ca(a);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Yo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Yo(c);for(var y=c.firstChild;y;){var x=y.nextSibling,C=y.nodeName;y[uo]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=x}}else c==="body"&&Yo(i.ownerDocument.body);c=g}while(c);Ca(a)}function F0(i,a){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function If(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":If(c),Vh(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function k1(i,a,c,d){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[uo])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=os(i.nextSibling),i===null)break}return null}function M1(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=os(i.nextSibling),i===null))return null;return i}function z0(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=os(i.nextSibling),i===null))return null;return i}function Uf(i){return i.data==="$?"||i.data==="$~"}function Hf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function N1(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function os(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var $f=null;function j0(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return os(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function B0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function I0(i,a,c){switch(a=iu(c),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Yo(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Vh(i)}var ls=new Map,U0=new Set;function ru(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ai=$.d;$.d={f:L1,r:P1,D:F1,C:z1,L:j1,m:B1,X:U1,S:I1,M:H1};function L1(){var i=ai.f(),a=Kc();return i||a}function P1(i){var a=Gr(i);a!==null&&a.tag===5&&a.type==="form"?ib(a):ai.r(i)}var Ea=typeof document>"u"?null:document;function H0(i,a,c){var d=Ea;if(d&&typeof a=="string"&&a){var g=ts(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),U0.has(g)||(U0.add(g),i={rel:i,crossOrigin:c,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),rn(a,"link",i),Ge(a),d.head.appendChild(a)))}}function F1(i){ai.D(i),H0("dns-prefetch",i,null)}function z1(i,a){ai.C(i,a),H0("preconnect",i,a)}function j1(i,a,c){ai.L(i,a,c);var d=Ea;if(d&&i&&a){var g='link[rel="preload"][as="'+ts(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+ts(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+ts(c.imageSizes)+'"]')):g+='[href="'+ts(i)+'"]';var y=g;switch(a){case"style":y=_a(i);break;case"script":y=Ta(i)}ls.has(y)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),ls.set(y,i),d.querySelector(g)!==null||a==="style"&&d.querySelector(Xo(y))||a==="script"&&d.querySelector(Zo(y))||(a=d.createElement("link"),rn(a,"link",i),Ge(a),d.head.appendChild(a)))}}function B1(i,a){ai.m(i,a);var c=Ea;if(c&&i){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+ts(d)+'"][href="'+ts(i)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ta(i)}if(!ls.has(y)&&(i=m({rel:"modulepreload",href:i},a),ls.set(y,i),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Zo(y)))return}d=c.createElement("link"),rn(d,"link",i),Ge(d),c.head.appendChild(d)}}}function I1(i,a,c){ai.S(i,a,c);var d=Ea;if(d&&i){var g=Yr(d).hoistableStyles,y=_a(i);a=a||"default";var x=g.get(y);if(!x){var C={loading:0,preload:null};if(x=d.querySelector(Xo(y)))C.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=ls.get(y))&&Vf(i,c);var P=x=d.createElement("link");Ge(P),rn(P,"link",i),P._p=new Promise(function(G,tt){P.onload=G,P.onerror=tt}),P.addEventListener("load",function(){C.loading|=1}),P.addEventListener("error",function(){C.loading|=2}),C.loading|=4,au(x,a,d)}x={type:"stylesheet",instance:x,count:1,state:C},g.set(y,x)}}}function U1(i,a){ai.X(i,a);var c=Ea;if(c&&i){var d=Yr(c).hoistableScripts,g=Ta(i),y=d.get(g);y||(y=c.querySelector(Zo(g)),y||(i=m({src:i,async:!0},a),(a=ls.get(g))&&qf(i,a),y=c.createElement("script"),Ge(y),rn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function H1(i,a){ai.M(i,a);var c=Ea;if(c&&i){var d=Yr(c).hoistableScripts,g=Ta(i),y=d.get(g);y||(y=c.querySelector(Zo(g)),y||(i=m({src:i,async:!0,type:"module"},a),(a=ls.get(g))&&qf(i,a),y=c.createElement("script"),Ge(y),rn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function $0(i,a,c,d){var g=(g=xt.current)?ru(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=_a(c.href),c=Yr(g).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=_a(c.href);var y=Yr(g).hoistableStyles,x=y.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,x),(y=g.querySelector(Xo(i)))&&!y._p&&(x.instance=y,x.state.loading=5),ls.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ls.set(i,c),y||$1(g,i,c,x.state))),a&&d===null)throw Error(s(528,""));return x}if(a&&d!==null)throw Error(s(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ta(c),c=Yr(g).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function _a(i){return'href="'+ts(i)+'"'}function Xo(i){return'link[rel="stylesheet"]['+i+"]"}function V0(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function $1(i,a,c,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),rn(a,"link",c),Ge(a),i.head.appendChild(a))}function Ta(i){return'[src="'+ts(i)+'"]'}function Zo(i){return"script[async]"+i}function q0(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+ts(c.href)+'"]');if(d)return a.instance=d,Ge(d),d;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Ge(d),rn(d,"style",g),au(d,c.precedence,i),a.instance=d;case"stylesheet":g=_a(c.href);var y=i.querySelector(Xo(g));if(y)return a.state.loading|=4,a.instance=y,Ge(y),y;d=V0(c),(g=ls.get(g))&&Vf(d,g),y=(i.ownerDocument||i).createElement("link"),Ge(y);var x=y;return x._p=new Promise(function(C,P){x.onload=C,x.onerror=P}),rn(y,"link",d),a.state.loading|=4,au(y,c.precedence,i),a.instance=y;case"script":return y=Ta(c.src),(g=i.querySelector(Zo(y)))?(a.instance=g,Ge(g),g):(d=c,(g=ls.get(y))&&(d=m({},c),qf(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),Ge(g),rn(g,"link",d),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,au(d,c.precedence,i));return a.instance}function au(i,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,x=0;x<d.length;x++){var C=d[x];if(C.dataset.precedence===a)y=C;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Vf(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function qf(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var ou=null;function G0(i,a,c){if(ou===null){var d=new Map,g=ou=new Map;g.set(c,d)}else g=ou,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var y=c[g];if(!(y[uo]||y[tn]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(a)||"";x=i+x;var C=d.get(x);C?C.push(y):d.set(x,[y])}}return d}function Y0(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function V1(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(i=a.disabled,typeof a.precedence=="string"&&i==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function X0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function q1(i,a,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=_a(d.href),y=a.querySelector(Xo(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=lu.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=y,Ge(y);return}y=a.ownerDocument||a,d=V0(d),(g=ls.get(g))&&Vf(d,g),y=y.createElement("link"),Ge(y);var x=y;x._p=new Promise(function(C,P){x.onload=C,x.onerror=P}),rn(y,"link",d),c.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=lu.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var Gf=0;function G1(i,a){return i.stylesheets&&i.count===0&&uu(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&uu(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&Gf===0&&(Gf=62500*T1());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&uu(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Gf?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function lu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var cu=null;function uu(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,cu=new Map,a.forEach(Y1,i),cu=null,lu.call(i))}function Y1(i,a){if(!(a.state.loading&4)){var c=cu.get(i);if(c)var d=c.get(null);else{c=new Map,cu.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var x=g[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),d=x)}d&&c.set(null,d)}g=a.instance,x=g.getAttribute("data-precedence"),y=c.get(x)||d,y===d&&c.set(null,g),c.set(x,g),this.count++,d=lu.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var Ko={$$typeof:R,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function X1(i,a,c,d,g,y,x,C,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ih(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.hiddenUpdates=Ih(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Z0(i,a,c,d,g,y,x,C,P,G,tt,st){return i=new X1(i,a,c,x,P,G,tt,st,C),a=1,y===!0&&(a|=24),y=jn(3,null,null,a),i.current=y,y.stateNode=i,a=Ed(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:a},Rd(y),i}function K0(i){return i?(i=sa,i):sa}function W0(i,a,c,d,g,y){g=K0(g),d.context===null?d.context=g:d.pendingContext=g,d=Ti(a),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Ci(i,d,a),c!==null&&(On(c,i,a),Ro(c,i,a))}function Q0(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Yf(i,a){Q0(i,a),(i=i.alternate)&&Q0(i,a)}function J0(i){if(i.tag===13||i.tag===31){var a=rr(i,67108864);a!==null&&On(a,i,67108864),Yf(i,67108864)}}function tv(i){if(i.tag===13||i.tag===31){var a=$n();a=Uh(a);var c=rr(i,a);c!==null&&On(c,i,a),Yf(i,a)}}var hu=!0;function Z1(i,a,c,d){var g=L.T;L.T=null;var y=$.p;try{$.p=2,Xf(i,a,c,d)}finally{$.p=y,L.T=g}}function K1(i,a,c,d){var g=L.T;L.T=null;var y=$.p;try{$.p=8,Xf(i,a,c,d)}finally{$.p=y,L.T=g}}function Xf(i,a,c,d){if(hu){var g=Zf(d);if(g===null)Lf(i,a,d,du,c),nv(i,d);else if(Q1(g,i,a,c,d))d.stopPropagation();else if(nv(i,d),a&4&&-1<W1.indexOf(i)){for(;g!==null;){var y=Gr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=tr(y.pendingLanes);if(x!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var P=1<<31-pn(x);C.entanglements[1]|=P,x&=~P}ks(y),(Qt&6)===0&&(Xc=ut()+500,Vo(0))}}break;case 31:case 13:C=rr(y,2),C!==null&&On(C,y,2),Kc(),Yf(y,2)}if(y=Zf(d),y===null&&Lf(i,a,d,du,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else Lf(i,a,d,null,c)}}function Zf(i){return i=Kh(i),Kf(i)}var du=null;function Kf(i){if(du=null,i=qr(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=u(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return du=i,null}function ev(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ht()){case lt:return 2;case pt:return 8;case Pt:case It:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var Wf=!1,ji=null,Bi=null,Ii=null,Wo=new Map,Qo=new Map,Ui=[],W1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nv(i,a){switch(i){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Wo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(a.pointerId)}}function Jo(i,a,c,d,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},a!==null&&(a=Gr(a),a!==null&&J0(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Q1(i,a,c,d,g){switch(a){case"focusin":return ji=Jo(ji,i,a,c,d,g),!0;case"dragenter":return Bi=Jo(Bi,i,a,c,d,g),!0;case"mouseover":return Ii=Jo(Ii,i,a,c,d,g),!0;case"pointerover":var y=g.pointerId;return Wo.set(y,Jo(Wo.get(y)||null,i,a,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,Qo.set(y,Jo(Qo.get(y)||null,i,a,c,d,g)),!0}return!1}function sv(i){var a=qr(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,yg(i.priority,function(){tv(c)});return}}else if(a===31){if(a=u(c),a!==null){i.blockedOn=a,yg(i.priority,function(){tv(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function fu(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Zf(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Zh=d,c.target.dispatchEvent(d),Zh=null}else return a=Gr(c),a!==null&&J0(a),i.blockedOn=c,!1;a.shift()}return!0}function iv(i,a,c){fu(i)&&c.delete(a)}function J1(){Wf=!1,ji!==null&&fu(ji)&&(ji=null),Bi!==null&&fu(Bi)&&(Bi=null),Ii!==null&&fu(Ii)&&(Ii=null),Wo.forEach(iv),Qo.forEach(iv)}function pu(i,a){i.blockedOn===a&&(i.blockedOn=null,Wf||(Wf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,J1)))}var mu=null;function rv(i){mu!==i&&(mu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mu===i&&(mu=null);for(var a=0;a<i.length;a+=3){var c=i[a],d=i[a+1],g=i[a+2];if(typeof d!="function"){if(Kf(d||c)===null)continue;break}var y=Gr(c);y!==null&&(i.splice(a,3),a-=3,Xd(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function Ca(i){function a(P){return pu(P,i)}ji!==null&&pu(ji,i),Bi!==null&&pu(Bi,i),Ii!==null&&pu(Ii,i),Wo.forEach(a),Qo.forEach(a);for(var c=0;c<Ui.length;c++){var d=Ui[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Ui.length&&(c=Ui[0],c.blockedOn===null);)sv(c),c.blockedOn===null&&Ui.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],x=g[An]||null;if(typeof y=="function")x||rv(c);else if(x){var C=null;if(y&&y.hasAttribute("formAction")){if(g=y,x=y[An]||null)C=x.formAction;else if(Kf(g)!==null)continue}else C=x.action;typeof C=="function"?c[d+1]=C:(c.splice(d,3),d-=3),rv(c)}}}function av(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(x){return g=x})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Qf(i){this._internalRoot=i}gu.prototype.render=Qf.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var c=a.current,d=$n();W0(c,d,i,a,null,null)},gu.prototype.unmount=Qf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;W0(i.current,2,null,i,null,null),Kc(),a[Vr]=null}};function gu(i){this._internalRoot=i}gu.prototype.unstable_scheduleHydration=function(i){if(i){var a=gg();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Ui.length&&a!==0&&a<Ui[c].priority;c++);Ui.splice(c,0,i),c===0&&sv(i)}};var ov=t.version;if(ov!=="19.2.3")throw Error(s(527,ov,"19.2.3"));$.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var tT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{Ji=yu.inject(tT),Je=yu}catch{}}return el.createRoot=function(i,a){if(!r(i))throw Error(s(299));var c=!1,d="",g=pb,y=mb,x=gb;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Z0(i,1,!1,null,null,c,d,null,g,y,x,av),i[Vr]=a.current,Nf(i),new Qf(a)},el.hydrateRoot=function(i,a,c){if(!r(i))throw Error(s(299));var d=!1,g="",y=pb,x=mb,C=gb,P=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.formState!==void 0&&(P=c.formState)),a=Z0(i,1,!0,a,c??null,d,g,P,y,x,C,av),a.context=K0(null),c=a.current,d=$n(),d=Uh(d),g=Ti(d),g.callback=null,Ci(c,g,d),c=d,a.current.lanes=c,co(a,c),ks(a),i[Vr]=a.current,Nf(i),new gu(a)},el.version="19.2.3",el}var vv;function uT(){if(vv)return np.exports;vv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),np.exports=cT(),np.exports}var hT=uT();const Ot=n=>typeof n=="string",nl=()=>{let n,t;const e=new Promise((s,r)=>{n=s,t=r});return e.resolve=n,e.reject=t,e},wv=n=>n==null?"":""+n,dT=(n,t,e)=>{n.forEach(s=>{t[s]&&(e[s]=t[s])})},fT=/###/g,Sv=n=>n&&n.indexOf("###")>-1?n.replace(fT,"."):n,xv=n=>!n||Ot(n),yl=(n,t,e)=>{const s=Ot(t)?t.split("."):t;let r=0;for(;r<s.length-1;){if(xv(n))return{};const o=Sv(s[r]);!n[o]&&e&&(n[o]=new e),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return xv(n)?{}:{obj:n,k:Sv(s[r])}},Av=(n,t,e)=>{const{obj:s,k:r}=yl(n,t,Object);if(s!==void 0||t.length===1){s[r]=e;return}let o=t[t.length-1],l=t.slice(0,t.length-1),u=yl(n,l,Object);for(;u.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),u=yl(n,l,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=e},pT=(n,t,e,s)=>{const{obj:r,k:o}=yl(n,t,Object);r[o]=r[o]||[],r[o].push(e)},Vu=(n,t)=>{const{obj:e,k:s}=yl(n,t);if(e&&Object.prototype.hasOwnProperty.call(e,s))return e[s]},mT=(n,t,e)=>{const s=Vu(n,e);return s!==void 0?s:Vu(t,e)},KS=(n,t,e)=>{for(const s in t)s!=="__proto__"&&s!=="constructor"&&(s in n?Ot(n[s])||n[s]instanceof String||Ot(t[s])||t[s]instanceof String?e&&(n[s]=t[s]):KS(n[s],t[s],e):n[s]=t[s]);return n},Ra=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var gT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const yT=n=>Ot(n)?n.replace(/[&<>"'\/]/g,t=>gT[t]):n;class bT{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}}const vT=[" ",",","?","!",";"],wT=new bT(20),ST=(n,t,e)=>{t=t||"",e=e||"";const s=vT.filter(l=>t.indexOf(l)<0&&e.indexOf(l)<0);if(s.length===0)return!0;const r=wT.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!r.test(n);if(!o){const l=n.indexOf(e);l>0&&!r.test(n.substring(0,l))&&(o=!0)}return o},Dp=(n,t,e=".")=>{if(!n)return;if(n[t])return Object.prototype.hasOwnProperty.call(n,t)?n[t]:void 0;const s=t.split(e);let r=n;for(let o=0;o<s.length;){if(!r||typeof r!="object")return;let l,u="";for(let h=o;h<s.length;++h)if(h!==o&&(u+=e),u+=s[h],l=r[u],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&h<s.length-1)continue;o+=h-o+1;break}r=l}return r},Al=n=>n?.replace("_","-"),xT={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,t){console?.[n]?.apply?.(console,t)}};class qu{constructor(t,e={}){this.init(t,e)}init(t,e={}){this.prefix=e.prefix||"i18next:",this.logger=t||xT,this.options=e,this.debug=e.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,s,r){return r&&!this.debug?null:(Ot(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new qu(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new qu(this.logger,t)}}var Hs=new qu;class hh{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(e)||0;this.observers[s].set(e,r+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t,...e){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([r,o])=>{for(let l=0;l<o;l++)r(...e)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let l=0;l<o;l++)r.apply(r,[t,...e])})}}class Ev extends hh{constructor(t,e={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,s,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,l=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;t.indexOf(".")>-1?u=t.split("."):(u=[t,e],s&&(Array.isArray(s)?u.push(...s):Ot(s)&&o?u.push(...s.split(o)):u.push(s)));const h=Vu(this.data,u);return!h&&!e&&!s&&t.indexOf(".")>-1&&(t=u[0],e=u[1],s=u.slice(2).join(".")),h||!l||!Ot(s)?h:Dp(this.data?.[t]?.[e],s,o)}addResource(t,e,s,r,o={silent:!1}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[t,e];s&&(u=u.concat(l?s.split(l):s)),t.indexOf(".")>-1&&(u=t.split("."),r=e,e=u[1]),this.addNamespaces(e),Av(this.data,u,r),o.silent||this.emit("added",t,e,s,r)}addResources(t,e,s,r={silent:!1}){for(const o in s)(Ot(s[o])||Array.isArray(s[o]))&&this.addResource(t,e,o,s[o],{silent:!0});r.silent||this.emit("added",t,e,s)}addResourceBundle(t,e,s,r,o,l={silent:!1,skipCopy:!1}){let u=[t,e];t.indexOf(".")>-1&&(u=t.split("."),r=s,s=e,e=u[1]),this.addNamespaces(e);let h=Vu(this.data,u)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?KS(h,s,o):h={...h,...s},Av(this.data,u,h),l.silent||this.emit("added",t,e,s)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(r=>e[r]&&Object.keys(e[r]).length>0)}toJSON(){return this.data}}var WS={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,t,e,s,r){return n.forEach(o=>{t=this.processors[o]?.process(t,e,s,r)??t}),t}};const QS=Symbol("i18next/PATH_KEY");function AT(){const n=[],t=Object.create(null);let e;return t.get=(s,r)=>(e?.revoke?.(),r===QS?n:(n.push(r),e=Proxy.revocable(s,t),e.proxy)),Proxy.revocable(Object.create(null),t).proxy}function kp(n,t){const{[QS]:e}=n(AT());return e.join(t?.keySeparator??".")}const _v={},ap=n=>!Ot(n)&&typeof n!="boolean"&&typeof n!="number";class Gu extends hh{constructor(t,e={}){super(),dT(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Hs.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,e={interpolation:{}}){const s={...e};if(t==null)return!1;const r=this.resolve(t,s);if(r?.res===void 0)return!1;const o=ap(r.res);return!(s.returnObjects===!1&&o)}extractFromKey(t,e){let s=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let o=e.ns||this.options.defaultNS||[];const l=s&&t.indexOf(s)>-1,u=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!ST(t,s,r);if(l&&!u){const h=t.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:t,namespaces:Ot(o)?[o]:o};const f=t.split(s);(s!==r||s===r&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),t=f.join(r)}return{key:t,namespaces:Ot(o)?[o]:o}}translate(t,e,s){let r=typeof e=="object"?{...e}:e;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),t==null)return"";typeof t=="function"&&(t=kp(t,{...this.options,...r})),Array.isArray(t)||(t=[String(t)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:u,namespaces:h}=this.extractFromKey(t[t.length-1],r),f=h[h.length-1];let p=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const m=r.lng||this.language,b=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m?.toLowerCase()==="cimode")return b?o?{res:`${f}${p}${u}`,usedKey:u,exactUsedKey:u,usedLng:m,usedNS:f,usedParams:this.getUsedParamsDetails(r)}:`${f}${p}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:m,usedNS:f,usedParams:this.getUsedParamsDetails(r)}:u;const v=this.resolve(t,r);let w=v?.res;const S=v?.usedKey||u,A=v?.exactUsedKey||u,E=["[object Number]","[object Function]","[object RegExp]"],T=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,R=!this.i18nFormat||this.i18nFormat.handleAsObject,O=r.count!==void 0&&!Ot(r.count),D=Gu.hasDefaultValue(r),z=O?this.pluralResolver.getSuffix(m,r.count,r):"",N=r.ordinal&&O?this.pluralResolver.getSuffix(m,r.count,{ordinal:!1}):"",U=O&&!r.ordinal&&r.count===0,H=U&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${z}`]||r[`defaultValue${N}`]||r.defaultValue;let V=w;R&&!w&&D&&(V=H);const B=ap(V),W=Object.prototype.toString.apply(V);if(R&&V&&B&&E.indexOf(W)<0&&!(Ot(T)&&Array.isArray(V))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const at=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,V,{...r,ns:h}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(v.res=at,v.usedParams=this.getUsedParamsDetails(r),v):at}if(l){const at=Array.isArray(V),ot=at?[]:{},dt=at?A:S;for(const L in V)if(Object.prototype.hasOwnProperty.call(V,L)){const $=`${dt}${l}${L}`;D&&!w?ot[L]=this.translate($,{...r,defaultValue:ap(H)?H[L]:void 0,joinArrays:!1,ns:h}):ot[L]=this.translate($,{...r,joinArrays:!1,ns:h}),ot[L]===$&&(ot[L]=V[L])}w=ot}}else if(R&&Ot(T)&&Array.isArray(w))w=w.join(T),w&&(w=this.extendTranslation(w,t,r,s));else{let at=!1,ot=!1;!this.isValidLookup(w)&&D&&(at=!0,w=H),this.isValidLookup(w)||(ot=!0,w=u);const L=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ot?void 0:w,$=D&&H!==w&&this.options.updateMissing;if(ot||at||$){if(this.logger.log($?"updateKey":"missingKey",m,f,u,$?H:w),l){const M=this.resolve(u,{...r,keySeparator:!1});M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let it=[];const ft=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ft&&ft[0])for(let M=0;M<ft.length;M++)it.push(ft[M]);else this.options.saveMissingTo==="all"?it=this.languageUtils.toResolveHierarchy(r.lng||this.language):it.push(r.lng||this.language);const _t=(M,X,nt)=>{const ct=D&&nt!==w?nt:L;this.options.missingKeyHandler?this.options.missingKeyHandler(M,f,X,ct,$,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(M,f,X,ct,$,r),this.emit("missingKey",M,f,X,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?it.forEach(M=>{const X=this.pluralResolver.getSuffixes(M,r);U&&r[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(nt=>{_t([M],u+nt,r[`defaultValue${nt}`]||H)})}):_t(it,u,H))}w=this.extendTranslation(w,t,r,v,s),ot&&w===u&&this.options.appendNamespaceToMissingKey&&(w=`${f}${p}${u}`),(ot||at)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${p}${u}`:u,at?w:void 0,r))}return o?(v.res=w,v.usedParams=this.getUsedParamsDetails(r),v):w}extendTranslation(t,e,s,r,o){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const h=Ot(t)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(h){const m=t.match(this.interpolator.nestingRegexp);f=m&&m.length}let p=s.replace&&!Ot(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,s.lng||this.language||r.usedLng,s),h){const m=t.match(this.interpolator.nestingRegexp),b=m&&m.length;f<b&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,(...m)=>o?.[0]===m[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${e[0]}`),null):this.translate(...m,e),s)),s.interpolation&&this.interpolator.reset()}const l=s.postProcess||this.options.postProcess,u=Ot(l)?[l]:l;return t!=null&&u?.length&&s.applyPostProcessor!==!1&&(t=WS.handle(u,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t,e={}){let s,r,o,l,u;return Ot(t)&&(t=[t]),t.forEach(h=>{if(this.isValidLookup(s))return;const f=this.extractFromKey(h,e),p=f.key;r=p;let m=f.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const b=e.count!==void 0&&!Ot(e.count),v=b&&!e.ordinal&&e.count===0,w=e.context!==void 0&&(Ot(e.context)||typeof e.context=="number")&&e.context!=="",S=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);m.forEach(A=>{this.isValidLookup(s)||(u=A,!_v[`${S[0]}-${A}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(_v[`${S[0]}-${A}`]=!0,this.logger.warn(`key "${r}" for languages "${S.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(E=>{if(this.isValidLookup(s))return;l=E;const T=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(T,p,E,A,e);else{let O;b&&(O=this.pluralResolver.getSuffix(E,e.count,e));const D=`${this.options.pluralSeparator}zero`,z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(b&&(e.ordinal&&O.indexOf(z)===0&&T.push(p+O.replace(z,this.options.pluralSeparator)),T.push(p+O),v&&T.push(p+D)),w){const N=`${p}${this.options.contextSeparator||"_"}${e.context}`;T.push(N),b&&(e.ordinal&&O.indexOf(z)===0&&T.push(N+O.replace(z,this.options.pluralSeparator)),T.push(N+O),v&&T.push(N+D))}}let R;for(;R=T.pop();)this.isValidLookup(s)||(o=R,s=this.getResource(E,A,R,e))}))})}),{res:s,usedKey:r,exactUsedKey:o,usedLng:l,usedNS:u}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,s,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,e,s,r):this.resourceStore.getResource(t,e,s,r)}getUsedParamsDetails(t={}){const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!Ot(t.replace);let r=s?t.replace:t;if(s&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const o of e)delete r[o]}return r}static hasDefaultValue(t){const e="defaultValue";for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e===s.substring(0,e.length)&&t[s]!==void 0)return!0;return!1}}class Tv{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Hs.create("languageUtils")}getScriptPartFromCode(t){if(t=Al(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=Al(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(Ot(t)&&t.indexOf("-")>-1){let e;try{e=Intl.getCanonicalLocales(t)[0]}catch{}return e&&this.options.lowerCaseLng&&(e=e.toLowerCase()),e||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(s=>{if(e)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(e=r)}),!e&&this.options.supportedLngs&&t.forEach(s=>{if(e)return;const r=this.getScriptPartFromCode(s);if(this.isSupportedCode(r))return e=r;const o=this.getLanguagePartFromCode(s);if(this.isSupportedCode(o))return e=o;e=this.options.supportedLngs.find(l=>{if(l===o)return l;if(!(l.indexOf("-")<0&&o.indexOf("-")<0)&&(l.indexOf("-")>0&&o.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===o||l.indexOf(o)===0&&o.length>1))return l})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),Ot(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let s=t[e];return s||(s=t[this.getScriptPartFromCode(e)]),s||(s=t[this.formatLanguageCode(e)]),s||(s=t[this.getLanguagePartFromCode(e)]),s||(s=t.default),s||[]}toResolveHierarchy(t,e){const s=this.getFallbackCodes((e===!1?[]:e)||this.options.fallbackLng||[],t),r=[],o=l=>{l&&(this.isSupportedCode(l)?r.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Ot(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):Ot(t)&&o(this.formatLanguageCode(t)),s.forEach(l=>{r.indexOf(l)<0&&o(this.formatLanguageCode(l))}),r}}const Cv={zero:0,one:1,two:2,few:3,many:4,other:5},Rv={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ET{constructor(t,e={}){this.languageUtils=t,this.options=e,this.logger=Hs.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t,e={}){const s=Al(t==="dev"?"en":t),r=e.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:s,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let l;try{l=new Intl.PluralRules(s,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Rv;if(!t.match(/-|_/))return Rv;const h=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(h,e)}return this.pluralRulesCache[o]=l,l}needsPlural(t,e={}){let s=this.getRule(t,e);return s||(s=this.getRule("dev",e)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,e,s={}){return this.getSuffixes(t,s).map(r=>`${e}${r}`)}getSuffixes(t,e={}){let s=this.getRule(t,e);return s||(s=this.getRule("dev",e)),s?s.resolvedOptions().pluralCategories.sort((r,o)=>Cv[r]-Cv[o]).map(r=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(t,e,s={}){const r=this.getRule(t,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(e)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",e,s))}}const Ov=(n,t,e,s=".",r=!0)=>{let o=mT(n,t,e);return!o&&r&&Ot(e)&&(o=Dp(n,e,s),o===void 0&&(o=Dp(t,e,s))),o},op=n=>n.replace(/\$/g,"$$$$");class Dv{constructor(t={}){this.logger=Hs.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(e=>e),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:s,useRawValueToEscape:r,prefix:o,prefixEscaped:l,suffix:u,suffixEscaped:h,formatSeparator:f,unescapeSuffix:p,unescapePrefix:m,nestingPrefix:b,nestingPrefixEscaped:v,nestingSuffix:w,nestingSuffixEscaped:S,nestingOptionsSeparator:A,maxReplaces:E,alwaysFormat:T}=t.interpolation;this.escape=e!==void 0?e:yT,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?Ra(o):l||"{{",this.suffix=u?Ra(u):h||"}}",this.formatSeparator=f||",",this.unescapePrefix=p?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=b?Ra(b):v||Ra("$t("),this.nestingSuffix=w?Ra(w):S||Ra(")"),this.nestingOptionsSeparator=A||",",this.maxReplaces=E||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,s)=>e?.source===s?(e.lastIndex=0,e):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,e,s,r){let o,l,u;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=v=>{if(v.indexOf(this.formatSeparator)<0){const E=Ov(e,h,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,s,{...r,...e,interpolationkey:v}):E}const w=v.split(this.formatSeparator),S=w.shift().trim(),A=w.join(this.formatSeparator).trim();return this.format(Ov(e,h,S,this.options.keySeparator,this.options.ignoreJSONStructure),A,s,{...r,...e,interpolationkey:S})};this.resetRegExp();const p=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,m=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>op(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?op(this.escape(v)):op(v)}].forEach(v=>{for(u=0;o=v.regex.exec(t);){const w=o[1].trim();if(l=f(w),l===void 0)if(typeof p=="function"){const A=p(t,o,r);l=Ot(A)?A:""}else if(r&&Object.prototype.hasOwnProperty.call(r,w))l="";else if(m){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${t}`),l="";else!Ot(l)&&!this.useRawValueToEscape&&(l=wv(l));const S=v.safeValue(l);if(t=t.replace(o[0],S),m?(v.regex.lastIndex+=l.length,v.regex.lastIndex-=o[0].length):v.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),t}nest(t,e,s={}){let r,o,l;const u=(h,f)=>{const p=this.nestingOptionsSeparator;if(h.indexOf(p)<0)return h;const m=h.split(new RegExp(`${p}[ ]*{`));let b=`{${m[1]}`;h=m[0],b=this.interpolate(b,l);const v=b.match(/'/g),w=b.match(/"/g);((v?.length??0)%2===0&&!w||w.length%2!==0)&&(b=b.replace(/'/g,'"'));try{l=JSON.parse(b),f&&(l={...f,...l})}catch(S){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,S),`${h}${p}${b}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,h};for(;r=this.nestingRegexp.exec(t);){let h=[];l={...s},l=l.replace&&!Ot(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const f=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(f!==-1&&(h=r[1].slice(f).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),r[1]=r[1].slice(0,f)),o=e(u.call(this,r[1].trim(),l),l),o&&r[0]===t&&!Ot(o))return o;Ot(o)||(o=wv(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),o=""),h.length&&(o=h.reduce((p,m)=>this.format(p,m,s.lng,{...s,interpolationkey:r[1].trim()}),o.trim())),t=t.replace(r[0],o),this.regexp.lastIndex=0}return t}}const _T=n=>{let t=n.toLowerCase().trim();const e={};if(n.indexOf("(")>-1){const s=n.split("(");t=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);t==="currency"&&r.indexOf(":")<0?e.currency||(e.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?e.range||(e.range=r.trim()):r.split(";").forEach(l=>{if(l){const[u,...h]=l.split(":"),f=h.join(":").trim().replace(/^'+|'+$/g,""),p=u.trim();e[p]||(e[p]=f),f==="false"&&(e[p]=!1),f==="true"&&(e[p]=!0),isNaN(f)||(e[p]=parseInt(f,10))}})}return{formatName:t,formatOptions:e}},kv=n=>{const t={};return(e,s,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const l=s+JSON.stringify(o);let u=t[l];return u||(u=n(Al(s),r),t[l]=u),u(e)}},TT=n=>(t,e,s)=>n(Al(e),s)(t);class CT{constructor(t={}){this.logger=Hs.create("formatter"),this.options=t,this.init(t)}init(t,e={interpolation:{}}){this.formatSeparator=e.interpolation.formatSeparator||",";const s=e.cacheInBuiltFormats?kv:TT;this.formats={number:s((r,o)=>{const l=new Intl.NumberFormat(r,{...o});return u=>l.format(u)}),currency:s((r,o)=>{const l=new Intl.NumberFormat(r,{...o,style:"currency"});return u=>l.format(u)}),datetime:s((r,o)=>{const l=new Intl.DateTimeFormat(r,{...o});return u=>l.format(u)}),relativetime:s((r,o)=>{const l=new Intl.RelativeTimeFormat(r,{...o});return u=>l.format(u,o.range||"day")}),list:s((r,o)=>{const l=new Intl.ListFormat(r,{...o});return u=>l.format(u)})}}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=kv(e)}format(t,e,s,r={}){const o=e.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,h)=>{const{formatName:f,formatOptions:p}=_T(h);if(this.formats[f]){let m=u;try{const b=r?.formatParams?.[r.interpolationkey]||{},v=b.locale||b.lng||r.locale||r.lng||s;m=this.formats[f](u,v,{...p,...r,...b})}catch(b){this.logger.warn(b)}return m}else this.logger.warn(`there was no format function for ${f}`);return u},t)}}const RT=(n,t)=>{n.pending[t]!==void 0&&(delete n.pending[t],n.pendingCount--)};class OT extends hh{constructor(t,e,s,r={}){super(),this.backend=t,this.store=e,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=Hs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,r.backend,r)}queueLoad(t,e,s,r){const o={},l={},u={},h={};return t.forEach(f=>{let p=!0;e.forEach(m=>{const b=`${f}|${m}`;!s.reload&&this.store.hasResourceBundle(f,m)?this.state[b]=2:this.state[b]<0||(this.state[b]===1?l[b]===void 0&&(l[b]=!0):(this.state[b]=1,p=!1,l[b]===void 0&&(l[b]=!0),o[b]===void 0&&(o[b]=!0),h[m]===void 0&&(h[m]=!0)))}),p||(u[f]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(h)}}loaded(t,e,s){const r=t.split("|"),o=r[0],l=r[1];e&&this.emit("failedLoading",o,l,e),!e&&s&&this.store.addResourceBundle(o,l,s,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&s&&(this.state[t]=0);const u={};this.queue.forEach(h=>{pT(h.loaded,[o],l),RT(h,t),e&&h.errors.push(e),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(f=>{u[f]||(u[f]={});const p=h.loaded[f];p.length&&p.forEach(m=>{u[f][m]===void 0&&(u[f][m]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(h=>!h.done)}read(t,e,s,r=0,o=this.retryTimeout,l){if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:s,tried:r,wait:o,callback:l});return}this.readingCalls++;const u=(f,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(f&&p&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,s,r+1,o*2,l)},o);return}l(f,p)},h=this.backend[s].bind(this.backend);if(h.length===2){try{const f=h(t,e);f&&typeof f.then=="function"?f.then(p=>u(null,p)).catch(u):u(null,f)}catch(f){u(f)}return}return h(t,e,u)}prepareLoading(t,e,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Ot(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ot(e)&&(e=[e]);const o=this.queueLoad(t,e,s,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(t,e,s){this.prepareLoading(t,e,{},s)}reload(t,e,s){this.prepareLoading(t,e,{reload:!0},s)}loadOne(t,e=""){const s=t.split("|"),r=s[0],o=s[1];this.read(r,o,"read",void 0,void 0,(l,u)=>{l&&this.logger.warn(`${e}loading namespace ${o} for language ${r} failed`,l),!l&&u&&this.logger.log(`${e}loaded namespace ${o} for language ${r}`,u),this.loaded(t,l,u)})}saveMissing(t,e,s,r,o,l={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${s}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const h={...l,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let p;f.length===5?p=f(t,e,s,r,h):p=f(t,e,s,r),p&&typeof p.then=="function"?p.then(m=>u(null,m)).catch(u):u(null,p)}catch(p){u(p)}else f(t,e,s,r,u,h)}!t||!t[0]||this.store.addResource(t[0],e,s,r)}}}const Mv=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let t={};if(typeof n[1]=="object"&&(t=n[1]),Ot(n[1])&&(t.defaultValue=n[1]),Ot(n[2])&&(t.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const e=n[3]||n[2];Object.keys(e).forEach(s=>{t[s]=e[s]})}return t},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Nv=n=>(Ot(n.ns)&&(n.ns=[n.ns]),Ot(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Ot(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),bu=()=>{},DT=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{typeof n[e]=="function"&&(n[e]=n[e].bind(n))})};class bl extends hh{constructor(t={},e){if(super(),this.options=Nv(t),this.services={},this.logger=Hs,this.modules={external:[]},DT(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(t={},e){this.isInitializing=!0,typeof t=="function"&&(e=t,t={}),t.defaultNS==null&&t.ns&&(Ot(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=Mv();this.options={...s,...this.options,...Nv(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler);const r=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Hs.init(r(this.modules.logger),this.options):Hs.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=CT;const p=new Tv(this.options);this.store=new Ev(this.options.resources,this.options);const m=this.services;m.logger=Hs,m.resourceStore=this.store,m.languageUtils=p,m.pluralResolver=new ET(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(m.formatter=r(f),m.formatter.init&&m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new Dv(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new OT(r(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",(v,...w)=>{this.emit(v,...w)}),this.modules.languageDetector&&(m.languageDetector=r(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=r(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new Gu(this.services,this.options),this.translator.on("*",(v,...w)=>{this.emit(v,...w)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,e||(e=bu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...p)=>this.store[f](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...p)=>(this.store[f](...p),this)});const u=nl(),h=()=>{const f=(p,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(m),e(p,m)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),u}loadResources(t,e=bu){let s=e;const r=Ot(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>l(h)),this.options.preload?.forEach?.(u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(u)})}else s(null)}reloadResources(t,e,s){const r=nl();return typeof t=="function"&&(s=t,t=void 0),typeof e=="function"&&(s=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),s||(s=bu),this.services.backendConnector.reload(t,e,o=>{r.resolve(),s(o)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&WS.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let e=0;e<this.languages.length;e++){const s=this.languages[e];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,e){this.isLanguageChangingTo=t;const s=nl();this.emit("languageChanging",t);const r=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,h)=>{h?this.isLanguageChangingTo===t&&(r(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,s.resolve((...f)=>this.t(...f)),e&&e(u,(...f)=>this.t(...f))},l=u=>{!t&&!u&&this.services.languageDetector&&(u=[]);const h=Ot(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(Ot(u)?[u]:u);f&&(this.language||r(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,p=>{o(p,f)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),s}getFixedT(t,e,s){const r=(o,l,...u)=>{let h;typeof l!="object"?h=this.options.overloadTranslationOptionHandler([o,l].concat(u)):h={...l},h.lng=h.lng||r.lng,h.lngs=h.lngs||r.lngs,h.ns=h.ns||r.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||s||r.keyPrefix);const f=this.options.keySeparator||".";let p;return h.keyPrefix&&Array.isArray(o)?p=o.map(m=>(typeof m=="function"&&(m=kp(m,{...this.options,...l})),`${h.keyPrefix}${f}${m}`)):(typeof o=="function"&&(o=kp(o,{...this.options,...l})),p=h.keyPrefix?`${h.keyPrefix}${f}${o}`:o),this.t(p,h)};return Ot(t)?r.lng=t:r.lngs=t,r.ns=e,r.keyPrefix=s,r}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,e={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=e.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(u,h)=>{const f=this.services.backendConnector.state[`${u}|${h}`];return f===-1||f===0||f===2};if(e.precheck){const u=e.precheck(this,l);if(u!==void 0)return u}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,t)&&(!r||l(o,t)))}loadNamespaces(t,e){const s=nl();return this.options.ns?(Ot(t)&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),e&&e(r)}),s):(e&&e(),Promise.resolve())}loadLanguages(t,e){const s=nl();Ot(t)&&(t=[t]);const r=this.options.preload||[],o=t.filter(l=>r.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=r.concat(o),this.loadResources(l=>{s.resolve(),e&&e(l)}),s):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const r=new Intl.Locale(t);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new Tv(Mv());return t.toLowerCase().indexOf("-latn")>1?"ltr":e.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},e){const s=new bl(t,e);return s.createInstance=bl.createInstance,s}cloneInstance(t={},e=bu){const s=t.forkResourceStore;s&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},o=new bl(r);if((t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},s){const u=Object.keys(this.store.data).reduce((h,f)=>(h[f]={...this.store.data[f]},h[f]=Object.keys(h[f]).reduce((p,m)=>(p[m]={...h[f][m]},p),h[f]),h),{});o.store=new Ev(u,r),o.services.resourceStore=o.store}return t.interpolation&&(o.services.interpolator=new Dv(r)),o.translator=new Gu(o.services,r),o.translator.on("*",(u,...h)=>{o.emit(u,...h)}),o.init(r,e),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const xn=bl.createInstance();xn.createInstance;xn.dir;xn.init;xn.loadResources;xn.reloadResources;xn.use;xn.changeLanguage;xn.getFixedT;xn.t;xn.exists;xn.setDefaultNamespace;xn.hasLoadedNamespace;xn.loadNamespaces;xn.loadLanguages;const kT=(n,t,e,s)=>{const r=[e,{code:t,...s||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);Or(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},Lv={},JS=(n,t,e,s)=>{Or(e)&&Lv[e]||(Or(e)&&(Lv[e]=new Date),kT(n,t,e,s))},tx=(n,t)=>()=>{if(n.isInitialized)t();else{const e=()=>{setTimeout(()=>{n.off("initialized",e)},0),t()};n.on("initialized",e)}},Mp=(n,t,e)=>{n.loadNamespaces(t,tx(n,e))},Pv=(n,t,e,s)=>{if(Or(e)&&(e=[e]),n.options.preload&&n.options.preload.indexOf(t)>-1)return Mp(n,e,s);e.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(t,tx(n,s))},MT=(n,t,e={})=>!t.languages||!t.languages.length?(JS(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(n,{lng:e.lng,precheck:(s,r)=>{if(e.bindI18n&&e.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!r(s.isLanguageChangingTo,n))return!1}}),Or=n=>typeof n=="string",NT=n=>typeof n=="object"&&n!==null,LT=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,PT={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},FT=n=>PT[n],zT=n=>n.replace(LT,FT);let Np={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:zT,transDefaultProps:void 0};const jT=(n={})=>{Np={...Np,...n}},BT=()=>Np;let ex;const IT=n=>{ex=n},UT=()=>ex,HT={type:"3rdParty",init(n){jT(n.options.react),IT(n)}},$T=k.createContext();class VT{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var lp={exports:{}},cp={};var Fv;function qT(){if(Fv)return cp;Fv=1;var n=uh();function t(m,b){return m===b&&(m!==0||1/m===1/b)||m!==m&&b!==b}var e=typeof Object.is=="function"?Object.is:t,s=n.useState,r=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(m,b){var v=b(),w=s({inst:{value:v,getSnapshot:b}}),S=w[0].inst,A=w[1];return o(function(){S.value=v,S.getSnapshot=b,h(S)&&A({inst:S})},[m,v,b]),r(function(){return h(S)&&A({inst:S}),m(function(){h(S)&&A({inst:S})})},[m]),l(v),v}function h(m){var b=m.getSnapshot;m=m.value;try{var v=b();return!e(m,v)}catch{return!0}}function f(m,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return cp.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,cp}var zv;function GT(){return zv||(zv=1,lp.exports=qT()),lp.exports}var YT=GT();const XT=(n,t)=>Or(t)?t:NT(t)&&Or(t.defaultValue)?t.defaultValue:Array.isArray(n)?n[n.length-1]:n,ZT={t:XT,ready:!1},KT=()=>()=>{},gi=(n,t={})=>{const{i18n:e}=t,{i18n:s,defaultNS:r}=k.useContext($T)||{},o=e||s||UT();o&&!o.reportNamespaces&&(o.reportNamespaces=new VT),o||JS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=k.useMemo(()=>({...BT(),...o?.options?.react,...t}),[o,t]),{useSuspense:u,keyPrefix:h}=l,f=r||o?.options?.defaultNS,p=Or(f)?[f]:f||["translation"],m=k.useMemo(()=>p,p);o?.reportNamespaces?.addUsedNamespaces?.(m);const b=k.useRef(0),v=k.useCallback(H=>{if(!o)return KT;const{bindI18n:V,bindI18nStore:B}=l,W=()=>{b.current+=1,H()};return V&&o.on(V,W),B&&o.store.on(B,W),()=>{V&&V.split(" ").forEach(at=>o.off(at,W)),B&&B.split(" ").forEach(at=>o.store.off(at,W))}},[o,l]),w=k.useRef(),S=k.useCallback(()=>{if(!o)return ZT;const H=!!(o.isInitialized||o.initializedStoreOnce)&&m.every(dt=>MT(dt,o,l)),V=t.lng||o.language,B=b.current,W=w.current;if(W&&W.ready===H&&W.lng===V&&W.keyPrefix===h&&W.revision===B)return W;const ot={t:o.getFixedT(V,l.nsMode==="fallback"?m:m[0],h),ready:H,lng:V,keyPrefix:h,revision:B};return w.current=ot,ot},[o,m,h,l,t.lng]),[A,E]=k.useState(0),{t:T,ready:R}=YT.useSyncExternalStore(v,S,S);k.useEffect(()=>{if(o&&!R&&!u){const H=()=>E(V=>V+1);t.lng?Pv(o,t.lng,m,H):Mp(o,m,H)}},[o,t.lng,m,R,u,A]);const O=o||{},D=k.useRef(null),z=k.useRef(),N=H=>{const V=Object.getOwnPropertyDescriptors(H);V.__original&&delete V.__original;const B=Object.create(Object.getPrototypeOf(H),V);if(!Object.prototype.hasOwnProperty.call(B,"__original"))try{Object.defineProperty(B,"__original",{value:H,writable:!1,enumerable:!1,configurable:!1})}catch{}return B},U=k.useMemo(()=>{const H=O,V=H?.language;let B=H;H&&(D.current&&D.current.__original===H?z.current!==V?(B=N(H),D.current=B,z.current=V):B=D.current:(B=N(H),D.current=B,z.current=V));const W=[T,B,R];return W.t=T,W.i18n=B,W.ready=R,W},[T,O,R,O.resolvedLanguage,O.language,O.languages]);if(o&&u&&!R)throw new Promise(H=>{const V=()=>H();t.lng?Pv(o,t.lng,m,V):Mp(o,m,V)});return U},{slice:WT,forEach:QT}=[];function JT(n){return QT.call(WT.call(arguments,1),t=>{if(t)for(const e in t)n[e]===void 0&&(n[e]=t[e])}),n}function tC(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(n))}const jv=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,eC=function(n,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(t);let o=`${n}=${r}`;if(s.maxAge>0){const l=s.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(l)}`}if(s.domain){if(!jv.test(s.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${s.domain}`}if(s.path){if(!jv.test(s.path))throw new TypeError("option path is invalid");o+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(o+="; Partitioned"),o},Bv={create(n,t,e,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};e&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+e*60*1e3)),s&&(r.domain=s),document.cookie=eC(n,t,r)},read(n){const t=`${n}=`,e=document.cookie.split(";");for(let s=0;s<e.length;s++){let r=e[s];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null},remove(n,t){this.create(n,"",-1,t)}};var nC={name:"cookie",lookup(n){let{lookupCookie:t}=n;if(t&&typeof document<"u")return Bv.read(t)||void 0},cacheUserLanguage(n,t){let{lookupCookie:e,cookieMinutes:s,cookieDomain:r,cookieOptions:o}=t;e&&typeof document<"u"&&Bv.create(e,n,s,r,o)}},sC={name:"querystring",lookup(n){let{lookupQuerystring:t}=n,e;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1).split("&");for(let l=0;l<o.length;l++){const u=o[l].indexOf("=");u>0&&o[l].substring(0,u)===t&&(e=o[l].substring(u+1))}}return e}},iC={name:"hash",lookup(n){let{lookupHash:t,lookupFromHashIndex:e}=n,s;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(t){const l=o.split("&");for(let u=0;u<l.length;u++){const h=l[u].indexOf("=");h>0&&l[u].substring(0,h)===t&&(s=l[u].substring(h+1))}}if(s)return s;if(!s&&e>-1){const l=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof e=="number"?e:0]?.replace("/",""):void 0}}}return s}};let Oa=null;const Iv=()=>{if(Oa!==null)return Oa;try{if(Oa=typeof window<"u"&&window.localStorage!==null,!Oa)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Oa=!1}return Oa};var rC={name:"localStorage",lookup(n){let{lookupLocalStorage:t}=n;if(t&&Iv())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(n,t){let{lookupLocalStorage:e}=t;e&&Iv()&&window.localStorage.setItem(e,n)}};let Da=null;const Uv=()=>{if(Da!==null)return Da;try{if(Da=typeof window<"u"&&window.sessionStorage!==null,!Da)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Da=!1}return Da};var aC={name:"sessionStorage",lookup(n){let{lookupSessionStorage:t}=n;if(t&&Uv())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(n,t){let{lookupSessionStorage:e}=t;e&&Uv()&&window.sessionStorage.setItem(e,n)}},oC={name:"navigator",lookup(n){const t=[];if(typeof navigator<"u"){const{languages:e,userLanguage:s,language:r}=navigator;if(e)for(let o=0;o<e.length;o++)t.push(e[o]);s&&t.push(s),r&&t.push(r)}return t.length>0?t:void 0}},lC={name:"htmlTag",lookup(n){let{htmlTag:t}=n,e;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(e=s.getAttribute("lang")),e}},cC={name:"path",lookup(n){let{lookupFromPathIndex:t}=n;if(typeof window>"u")return;const e=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(e)?e[typeof t=="number"?t:0]?.replace("/",""):void 0}},uC={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:t}=n;const e=typeof t=="number"?t+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[e]}};let nx=!1;try{document.cookie,nx=!0}catch{}const sx=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];nx||sx.splice(1,1);const hC=()=>({order:sx,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class ix{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,e)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=JT(e,this.options||{},hC()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(nC),this.addDetector(sC),this.addDetector(rC),this.addDetector(aC),this.addDetector(oC),this.addDetector(lC),this.addDetector(cC),this.addDetector(uC),this.addDetector(iC)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,e=[];return t.forEach(s=>{if(this.detectors[s]){let r=this.detectors[s].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(e=e.concat(r))}}),e=e.filter(s=>s!=null&&!tC(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?e:e.length>0?e[0]:null}cacheUserLanguage(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;e&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||e.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}ix.type="languageDetector";const dC={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",search:"Search",filter:"Filter",clear:"Clear",apply:"Apply",loading:"Loading...",error:"Error",success:"Success"},fC={login:"Login",register:"Register",logout:"Logout",email:"Email Address",password:"Password",confirmPassword:"Confirm Password",signIn:"Sign In",signUp:"Sign Up",welcomeBack:"Welcome Back",loginSubtitle:"Please enter your details to access your dashboard.",newAccount:"New to Expense Manager?",createAccount:"Create an account",createAccountTitle:"Create your account",registerSubtitle:"Start managing your expenses and invoices efficiently today.",haveAccount:"Already have an account?",loginHere:"Log in",loginFailed:"Login Failed",registerFailed:"Registration Failed",appTitle:"Expense Manager"},pC={uploadTab:"Upload Invoices",expensesTab:"Expenses Management"},mC={title:"New Document",dragDrop:"Click to upload or drag & drop",fileTypes:"PDF, JPG, PNG up to 10MB",processButton:"Process Invoice",processing:"Processing...",extractedData:"Extracted Data",preview:"Preview",uploadInstruction:"Upload and process an invoice to see extracted data here",uploadError:"Upload Error",successMessage:"Expense saved successfully!"},gC={vendorName:"Vendor Name",date:"Date",totalAmount:"Total Amount",currency:"Currency",category:"Category",description:"Description",descriptionPlaceholder:"Service description or notes...",discard:"Discard",confirmSave:"Confirm & Save",required:"This field is required",invalidEmail:"Invalid email address",passwordMin:"Password must be at least 8 characters",passwordMatch:"Passwords don't match",amountPositive:"Amount must be positive"},yC={title:"Filter Expenses",dateRange:"Date Range",minAmount:"Min Amount",maxAmount:"Max Amount",category:"Category",businessName:"Business Name",searchPlaceholder:"Search by vendor...",applyFilters:"Apply Filters",clearFilters:"Clear",showingTransactions:"Showing",transactions:"transactions",transaction:"transaction",noExpenses:"No expenses found",noExpensesMessage:"Try adjusting your filters or upload a new invoice",noExpensesYet:"No expenses yet",uploadToStart:"Upload and process invoices to start tracking your expenses",vendor:"Vendor",amount:"Amount",invoiceNumber:"Invoice #",actions:"Actions",deleteConfirm:"Are you sure you want to delete this expense?"},bC={all:"All Categories",FOOD:"Food & Drink",VEHICLE:"Vehicle",IT:"IT Services",OPERATIONS:"Operations",TRAINING:"Training/Education",OTHER:"Other"},vC={last30:"Last 30 Days",thisMonth:"This Month",lastQuarter:"Last Quarter",custom:"Custom Range",startDate:"Start Date",endDate:"End Date"},wC={common:dC,auth:fC,dashboard:pC,upload:mC,form:gC,expenses:yC,categories:bC,dateRanges:vC},SC={save:"",cancel:"",delete:"",edit:"",close:"",search:"",filter:"",clear:"",apply:"",loading:"...",error:"",success:""},xC={login:"",register:"",logout:"",email:" ",password:"",confirmPassword:" ",signIn:"",signUp:"",welcomeBack:" ",loginSubtitle:"        .",newAccount:"   ?",createAccount:" ",createAccountTitle:"   ",registerSubtitle:"        .",haveAccount:"   ?",loginHere:"",loginFailed:" ",registerFailed:" ",appTitle:" "},AC={uploadTab:" ",expensesTab:" "},EC={title:" ",dragDrop:"    ",fileTypes:"PDF, JPG, PNG  10MB",processButton:" ",processing:"...",extractedData:" ",preview:" ",uploadInstruction:"        ",uploadError:" ",successMessage:"  !"},_C={vendorName:" ",date:"",totalAmount:" ",currency:"",category:"",description:"",descriptionPlaceholder:"   ...",discard:"",confirmSave:" ",required:"   ",invalidEmail:"   ",passwordMin:"    8 ",passwordMatch:"  ",amountPositive:"   "},TC={title:" ",dateRange:" ",minAmount:" ",maxAmount:" ",category:"",businessName:" ",searchPlaceholder:"  ...",applyFilters:" ",clearFilters:"",showingTransactions:"",transactions:"",transaction:"",noExpenses:"  ",noExpensesMessage:"       ",noExpensesYet:"  ",uploadToStart:"        ",vendor:"",amount:"",invoiceNumber:"' ",actions:"",deleteConfirm:"      ?"},CC={all:" ",FOOD:" ",VEHICLE:"",IT:" IT",OPERATIONS:"",TRAINING:"/",OTHER:""},RC={last30:"30  ",thisMonth:" ",lastQuarter:" ",custom:"  ",startDate:" ",endDate:" "},OC={common:SC,auth:xC,dashboard:AC,upload:EC,form:_C,expenses:TC,categories:CC,dateRanges:RC},DC={en:{translation:wC},he:{translation:OC}};xn.use(ix).use(HT).init({resources:DC,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});var Hv="popstate";function kC(n={}){function t(s,r){let{pathname:o,search:l,hash:u}=s.location;return Lp("",{pathname:o,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(s,r){return typeof r=="string"?r:El(r)}return NC(t,e,null,n)}function ve(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function fs(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function MC(){return Math.random().toString(36).substring(2,10)}function $v(n,t){return{usr:n.state,key:n.key,idx:t}}function Lp(n,t,e=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Qa(t):t,state:e,key:t&&t.key||s||MC()}}function El({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Qa(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let s=n.indexOf("?");s>=0&&(t.search=n.substring(s),n=n.substring(0,s)),n&&(t.pathname=n)}return t}function NC(n,t,e,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,l=r.history,u="POP",h=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let A=p(),E=A==null?null:A-f;f=A,h&&h({action:u,location:S.location,delta:E})}function b(A,E){u="PUSH";let T=Lp(S.location,A,E);f=p()+1;let R=$v(T,f),O=S.createHref(T);try{l.pushState(R,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(O)}o&&h&&h({action:u,location:S.location,delta:1})}function v(A,E){u="REPLACE";let T=Lp(S.location,A,E);f=p();let R=$v(T,f),O=S.createHref(T);l.replaceState(R,"",O),o&&h&&h({action:u,location:S.location,delta:0})}function w(A){return LC(A)}let S={get action(){return u},get location(){return n(r,l)},listen(A){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Hv,m),h=A,()=>{r.removeEventListener(Hv,m),h=null}},createHref(A){return t(r,A)},createURL:w,encodeLocation(A){let E=w(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:v,go(A){return l.go(A)}};return S}function LC(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),ve(e,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:El(n);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=e+s),new URL(s,e)}function rx(n,t,e="/"){return PC(n,t,e,!1)}function PC(n,t,e,s){let r=typeof t=="string"?Qa(t):t,o=di(r.pathname||"/",e);if(o==null)return null;let l=ax(n);FC(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=YC(o);u=qC(l[h],f,s)}return u}function ax(n,t=[],e=[],s="",r=!1){let o=(l,u,h=r,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&h)return;ve(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let m=hi([s,p.relativePath]),b=e.concat(p);l.children&&l.children.length>0&&(ve(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),ax(l.children,t,b,m,h)),!(l.path==null&&!l.index)&&t.push({path:m,score:$C(m,l.index),routesMeta:b})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let h of ox(l.path))o(l,u,!0,h)}),t}function ox(n){let t=n.split("/");if(t.length===0)return[];let[e,...s]=t,r=e.endsWith("?"),o=e.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let l=ox(s.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...l),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function FC(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:VC(t.routesMeta.map(s=>s.childrenIndex),e.routesMeta.map(s=>s.childrenIndex)))}var zC=/^:[\w-]+$/,jC=3,BC=2,IC=1,UC=10,HC=-2,Vv=n=>n==="*";function $C(n,t){let e=n.split("/"),s=e.length;return e.some(Vv)&&(s+=HC),t&&(s+=BC),e.filter(r=>!Vv(r)).reduce((r,o)=>r+(zC.test(o)?jC:o===""?IC:UC),s)}function VC(n,t){return n.length===t.length&&n.slice(0,-1).every((s,r)=>s===t[r])?n[n.length-1]-t[t.length-1]:0}function qC(n,t,e=!1){let{routesMeta:s}=n,r={},o="/",l=[];for(let u=0;u<s.length;++u){let h=s[u],f=u===s.length-1,p=o==="/"?t:t.slice(o.length)||"/",m=Yu({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),b=h.route;if(!m&&f&&e&&!s[s.length-1].route.index&&(m=Yu({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!m)return null;Object.assign(r,m.params),l.push({params:r,pathname:hi([o,m.pathname]),pathnameBase:WC(hi([o,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(o=hi([o,m.pathnameBase]))}return l}function Yu(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,s]=GC(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((f,{paramName:p,isOptional:m},b)=>{if(p==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[b];return m&&!v?f[p]=void 0:f[p]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function GC(n,t=!1,e=!0){fs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function YC(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function di(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,s=n.charAt(e);return s&&s!=="/"?null:n.slice(e)||"/"}var lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XC=n=>lx.test(n);function ZC(n,t="/"){let{pathname:e,search:s="",hash:r=""}=typeof n=="string"?Qa(n):n,o;if(e)if(XC(e))o=e;else{if(e.includes("//")){let l=e;e=e.replace(/\/\/+/g,"/"),fs(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${e}`)}e.startsWith("/")?o=qv(e.substring(1),"/"):o=qv(e,t)}else o=t;return{pathname:o,search:QC(s),hash:JC(r)}}function qv(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function up(n,t,e,s){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KC(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function hm(n){let t=KC(n);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function dm(n,t,e,s=!1){let r;typeof n=="string"?r=Qa(n):(r={...n},ve(!r.pathname||!r.pathname.includes("?"),up("?","pathname","search",r)),ve(!r.pathname||!r.pathname.includes("#"),up("#","pathname","hash",r)),ve(!r.search||!r.search.includes("#"),up("#","search","hash",r)));let o=n===""||r.pathname==="",l=o?"/":r.pathname,u;if(l==null)u=e;else{let m=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),m-=1;r.pathname=b.join("/")}u=m>=0?t[m]:"/"}let h=ZC(r,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var hi=n=>n.join("/").replace(/\/\/+/g,"/"),WC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,JC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,tR=class{constructor(n,t,e,s=!1){this.status=n,this.statusText=t||"",this.internal=s,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function eR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function nR(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var cx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ux(n,t){let e=n;if(typeof e!="string"||!lx.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let s=e,r=!1;if(cx)try{let o=new URL(window.location.href),l=e.startsWith("//")?new URL(o.protocol+e):new URL(e),u=di(l.pathname,t);l.origin===o.origin&&u!=null?e=u+l.search+l.hash:r=!0}catch{fs(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var hx=["POST","PUT","PATCH","DELETE"];new Set(hx);var sR=["GET",...hx];new Set(sR);var Ja=k.createContext(null);Ja.displayName="DataRouter";var dh=k.createContext(null);dh.displayName="DataRouterState";var iR=k.createContext(!1),dx=k.createContext({isTransitioning:!1});dx.displayName="ViewTransition";var rR=k.createContext(new Map);rR.displayName="Fetchers";var aR=k.createContext(null);aR.displayName="Await";var Wn=k.createContext(null);Wn.displayName="Navigation";var Pl=k.createContext(null);Pl.displayName="Location";var xs=k.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var fm=k.createContext(null);fm.displayName="RouteError";var fx="REACT_ROUTER_ERROR",oR="REDIRECT",lR="ROUTE_ERROR_RESPONSE";function cR(n){if(n.startsWith(`${fx}:${oR}:{`))try{let t=JSON.parse(n.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function uR(n){if(n.startsWith(`${fx}:${lR}:{`))try{let t=JSON.parse(n.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new tR(t.status,t.statusText,t.data)}catch{}}function hR(n,{relative:t}={}){ve(to(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:s}=k.useContext(Wn),{hash:r,pathname:o,search:l}=zl(n,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:hi([e,o])),s.createHref({pathname:u,search:l,hash:r})}function to(){return k.useContext(Pl)!=null}function Ki(){return ve(to(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Pl).location}var px="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mx(n){k.useContext(Wn).static||k.useLayoutEffect(n)}function Fl(){let{isDataRoute:n}=k.useContext(xs);return n?TR():dR()}function dR(){ve(to(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(Ja),{basename:t,navigator:e}=k.useContext(Wn),{matches:s}=k.useContext(xs),{pathname:r}=Ki(),o=JSON.stringify(hm(s)),l=k.useRef(!1);return mx(()=>{l.current=!0}),k.useCallback((h,f={})=>{if(fs(l.current,px),!l.current)return;if(typeof h=="number"){e.go(h);return}let p=dm(h,JSON.parse(o),r,f.relative==="path");n==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:hi([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,o,r,n])}var fR=k.createContext(null);function pR(n){let t=k.useContext(xs).outlet;return k.useMemo(()=>t&&k.createElement(fR.Provider,{value:n},t),[t,n])}function zl(n,{relative:t}={}){let{matches:e}=k.useContext(xs),{pathname:s}=Ki(),r=JSON.stringify(hm(e));return k.useMemo(()=>dm(n,JSON.parse(r),s,t==="path"),[n,r,s,t])}function mR(n,t){return gx(n,t)}function gx(n,t,e,s,r){ve(to(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=k.useContext(Wn),{matches:l}=k.useContext(xs),u=l[l.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let T=m&&m.path||"";bx(f,!m||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=Ki(),v;if(t){let T=typeof t=="string"?Qa(t):t;ve(p==="/"||T.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=b;let w=v.pathname||"/",S=w;if(p!=="/"){let T=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let A=rx(n,{pathname:S});fs(m||A!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),fs(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=wR(A&&A.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:hi([p,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:hi([p,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,e,s,r);return t&&E?k.createElement(Pl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},E):E}function gR(){let n=_R(),t=eR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),e?k.createElement("pre",{style:r},e):null,l)}var yR=k.createElement(gR,null),yx=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const e=uR(n.digest);e&&(n=e)}let t=n!==void 0?k.createElement(xs.Provider,{value:this.props.routeContext},k.createElement(fm.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?k.createElement(bR,{error:n},t):t}};yx.contextType=iR;var hp=new WeakMap;function bR({children:n,error:t}){let{basename:e}=k.useContext(Wn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=cR(t.digest);if(s){let r=hp.get(t);if(r)throw r;let o=ux(s.location,e);if(cx&&!hp.get(t))if(o.isExternal||s.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:s.replace}));throw hp.set(t,l),l}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function vR({routeContext:n,match:t,children:e}){let s=k.useContext(Ja);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(xs.Provider,{value:n},e)}function wR(n,t=[],e=null,s=null,r=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let o=n,l=e?.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);ve(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(e)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:b,errors:v}=e,w=m.route.loader&&!b.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=e&&s?(p,m)=>{s(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:nR(e.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,b)=>{let v,w=!1,S=null,A=null;e&&(v=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||yR,u&&(h<0&&b===0?(bx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,A=null):h===b&&(w=!0,A=m.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,b+1)),T=()=>{let R;return v?R=S:w?R=A:m.route.Component?R=k.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,k.createElement(vR,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:e!=null},children:R})};return e&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?k.createElement(yx,{location:e.location,revalidation:e.revalidation,component:S,error:v,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):T()},null)}function pm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SR(n){let t=k.useContext(Ja);return ve(t,pm(n)),t}function xR(n){let t=k.useContext(dh);return ve(t,pm(n)),t}function AR(n){let t=k.useContext(xs);return ve(t,pm(n)),t}function mm(n){let t=AR(n),e=t.matches[t.matches.length-1];return ve(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function ER(){return mm("useRouteId")}function _R(){let n=k.useContext(fm),t=xR("useRouteError"),e=mm("useRouteError");return n!==void 0?n:t.errors?.[e]}function TR(){let{router:n}=SR("useNavigate"),t=mm("useNavigate"),e=k.useRef(!1);return mx(()=>{e.current=!0}),k.useCallback(async(r,o={})=>{fs(e.current,px),e.current&&(typeof r=="number"?await n.navigate(r):await n.navigate(r,{fromRouteId:t,...o}))},[n,t])}var Gv={};function bx(n,t,e){!t&&!Gv[n]&&(Gv[n]=!0,fs(!1,e))}k.memo(CR);function CR({routes:n,future:t,state:e,onError:s}){return gx(n,void 0,e,s,t)}function Fu({to:n,replace:t,state:e,relative:s}){ve(to(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=k.useContext(Wn);fs(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=k.useContext(xs),{pathname:l}=Ki(),u=Fl(),h=dm(n,hm(o),l,s==="path"),f=JSON.stringify(h);return k.useEffect(()=>{u(JSON.parse(f),{replace:t,state:e,relative:s})},[u,f,s,t,e]),null}function RR(n){return pR(n.context)}function li(n){ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function OR({basename:n="/",children:t=null,location:e,navigationType:s="POP",navigator:r,static:o=!1,unstable_useTransitions:l}){ve(!to(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:u,navigator:r,static:o,unstable_useTransitions:l,future:{}}),[u,r,o,l]);typeof e=="string"&&(e=Qa(e));let{pathname:f="/",search:p="",hash:m="",state:b=null,key:v="default"}=e,w=k.useMemo(()=>{let S=di(f,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:b,key:v},navigationType:s}},[u,f,p,m,b,v,s]);return fs(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:k.createElement(Wn.Provider,{value:h},k.createElement(Pl.Provider,{children:t,value:w}))}function DR({children:n,location:t}){return mR(Pp(n),t)}function Pp(n,t=[]){let e=[];return k.Children.forEach(n,(s,r)=>{if(!k.isValidElement(s))return;let o=[...t,r];if(s.type===k.Fragment){e.push.apply(e,Pp(s.props.children,o));return}ve(s.type===li,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ve(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Pp(s.props.children,o)),e.push(l)}),e}var zu="get",ju="application/x-www-form-urlencoded";function fh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function kR(n){return fh(n)&&n.tagName.toLowerCase()==="button"}function MR(n){return fh(n)&&n.tagName.toLowerCase()==="form"}function NR(n){return fh(n)&&n.tagName.toLowerCase()==="input"}function LR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PR(n,t){return n.button===0&&(!t||t==="_self")&&!LR(n)}var vu=null;function FR(){if(vu===null)try{new FormData(document.createElement("form"),0),vu=!1}catch{vu=!0}return vu}var zR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dp(n){return n!=null&&!zR.has(n)?(fs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ju}"`),null):n}function jR(n,t){let e,s,r,o,l;if(MR(n)){let u=n.getAttribute("action");s=u?di(u,t):null,e=n.getAttribute("method")||zu,r=dp(n.getAttribute("enctype"))||ju,o=new FormData(n)}else if(kR(n)||NR(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(s=h?di(h,t):null,e=n.getAttribute("formmethod")||u.getAttribute("method")||zu,r=dp(n.getAttribute("formenctype"))||dp(u.getAttribute("enctype"))||ju,o=new FormData(u,n),!FR()){let{name:f,type:p,value:m}=n;if(p==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,m)}}else{if(fh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=zu,s=null,r=ju,l=n}return o&&r==="text/plain"&&(l=o,o=void 0),{action:s,method:e.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gm(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function BR(n,t,e){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${e}`:t&&di(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${e}`,s}async function IR(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function HR(n,t,e){let s=await Promise.all(n.map(async r=>{let o=t.routes[r.route.id];if(o){let l=await IR(o,e);return l.links?l.links():[]}return[]}));return GR(s.flat(1).filter(UR).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Yv(n,t,e,s,r,o){let l=(h,f)=>e[f]?h.route.id!==e[f].route.id:!0,u=(h,f)=>e[f].pathname!==h.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==h.params["*"];return o==="assets"?t.filter((h,f)=>l(h,f)||u(h,f)):o==="data"?t.filter((h,f)=>{let p=s.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let m=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function $R(n,t,{includeHydrateFallback:e}={}){return VR(n.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function VR(n){return[...new Set(n)]}function qR(n){let t={},e=Object.keys(n).sort();for(let s of e)t[s]=n[s];return t}function GR(n,t){let e=new Set;return new Set(t),n.reduce((s,r)=>{let o=JSON.stringify(qR(r));return e.has(o)||(e.add(o),s.push({key:o,link:r})),s},[])}function vx(){let n=k.useContext(Ja);return gm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function YR(){let n=k.useContext(dh);return gm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ym=k.createContext(void 0);ym.displayName="FrameworkContext";function wx(){let n=k.useContext(ym);return gm(n,"You must render this element inside a <HydratedRouter> element"),n}function XR(n,t){let e=k.useContext(ym),[s,r]=k.useState(!1),[o,l]=k.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:m}=t,b=k.useRef(null);k.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let S=E=>{E.forEach(T=>{l(T.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[n]),k.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let v=()=>{r(!0)},w=()=>{r(!1),l(!1)};return e?n!=="intent"?[o,b,{}]:[o,b,{onFocus:sl(u,v),onBlur:sl(h,w),onMouseEnter:sl(f,v),onMouseLeave:sl(p,w),onTouchStart:sl(m,v)}]:[!1,b,{}]}function sl(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function ZR({page:n,...t}){let{router:e}=vx(),s=k.useMemo(()=>rx(e.routes,n,e.basename),[e.routes,n,e.basename]);return s?k.createElement(WR,{page:n,matches:s,...t}):null}function KR(n){let{manifest:t,routeModules:e}=wx(),[s,r]=k.useState([]);return k.useEffect(()=>{let o=!1;return HR(n,t,e).then(l=>{o||r(l)}),()=>{o=!0}},[n,t,e]),s}function WR({page:n,matches:t,...e}){let s=Ki(),{manifest:r,routeModules:o}=wx(),{basename:l}=vx(),{loaderData:u,matches:h}=YR(),f=k.useMemo(()=>Yv(n,t,h,r,s,"data"),[n,t,h,r,s]),p=k.useMemo(()=>Yv(n,t,h,r,s,"assets"),[n,t,h,r,s]),m=k.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,S=!1;if(t.forEach(E=>{let T=r.routes[E.route.id];!T||!T.hasLoader||(!f.some(R=>R.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let A=BR(n,l,"data");return S&&w.size>0&&A.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[l,u,s,r,f,t,n,o]),b=k.useMemo(()=>$R(p,r),[p,r]),v=KR(p);return k.createElement(k.Fragment,null,m.map(w=>k.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),b.map(w=>k.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),v.map(({key:w,link:S})=>k.createElement("link",{key:w,nonce:e.nonce,...S})))}function QR(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var JR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JR&&(window.__reactRouterVersion="7.11.0")}catch{}function tO({basename:n,children:t,unstable_useTransitions:e,window:s}){let r=k.useRef();r.current==null&&(r.current=kC({window:s,v5Compat:!0}));let o=r.current,[l,u]=k.useState({action:o.action,location:o.location}),h=k.useCallback(f=>{e===!1?u(f):k.startTransition(()=>u(f))},[e]);return k.useLayoutEffect(()=>o.listen(h),[o,h]),k.createElement(OR,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:e})}var Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ph=k.forwardRef(function({onClick:t,discover:e="render",prefetch:s="none",relative:r,reloadDocument:o,replace:l,state:u,target:h,to:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:b,...v},w){let{basename:S,unstable_useTransitions:A}=k.useContext(Wn),E=typeof f=="string"&&Sx.test(f),T=ux(f,S);f=T.to;let R=hR(f,{relative:r}),[O,D,z]=XR(s,v),N=sO(f,{replace:l,state:u,target:h,preventScrollReset:p,relative:r,viewTransition:m,unstable_defaultShouldRevalidate:b,unstable_useTransitions:A});function U(V){t&&t(V),V.defaultPrevented||N(V)}let H=k.createElement("a",{...v,...z,href:T.absoluteURL||R,onClick:T.isExternal||o?t:U,ref:QR(w,D),target:h,"data-discover":!E&&e==="render"?"true":void 0});return O&&!E?k.createElement(k.Fragment,null,H,k.createElement(ZR,{page:R})):H});ph.displayName="Link";var Fp=k.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:s="",end:r=!1,style:o,to:l,viewTransition:u,children:h,...f},p){let m=zl(l,{relative:f.relative}),b=Ki(),v=k.useContext(dh),{navigator:w,basename:S}=k.useContext(Wn),A=v!=null&&lO(m)&&u===!0,E=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,T=b.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(T=T.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&S&&(R=di(R,S)||R);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=T===E||!r&&T.startsWith(E)&&T.charAt(O)==="/",z=R!=null&&(R===E||!r&&R.startsWith(E)&&R.charAt(E.length)==="/"),N={isActive:D,isPending:z,isTransitioning:A},U=D?t:void 0,H;typeof s=="function"?H=s(N):H=[s,D?"active":null,z?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let V=typeof o=="function"?o(N):o;return k.createElement(ph,{...f,"aria-current":U,className:H,ref:p,style:V,to:l,viewTransition:u},typeof h=="function"?h(N):h)});Fp.displayName="NavLink";var eO=k.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:s,replace:r,state:o,method:l=zu,action:u,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:b,...v},w)=>{let{unstable_useTransitions:S}=k.useContext(Wn),A=aO(),E=oO(u,{relative:f}),T=l.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&Sx.test(u),O=D=>{if(h&&h(D),D.defaultPrevented)return;D.preventDefault();let z=D.nativeEvent.submitter,N=z?.getAttribute("formmethod")||l,U=()=>A(z||D.currentTarget,{fetcherKey:t,method:N,navigate:e,replace:r,state:o,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:b});S&&e!==!1?k.startTransition(()=>U()):U()};return k.createElement("form",{ref:w,method:T,action:E,onSubmit:s?h:O,...v,"data-discover":!R&&n==="render"?"true":void 0})});eO.displayName="Form";function nO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xx(n){let t=k.useContext(Ja);return ve(t,nO(n)),t}function sO(n,{target:t,replace:e,state:s,preventScrollReset:r,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let f=Fl(),p=Ki(),m=zl(n,{relative:o});return k.useCallback(b=>{if(PR(b,t)){b.preventDefault();let v=e!==void 0?e:El(p)===El(m),w=()=>f(n,{replace:v,state:s,preventScrollReset:r,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});h?k.startTransition(()=>w()):w()}},[p,f,m,e,s,t,n,r,o,l,u,h])}var iO=0,rO=()=>`__${String(++iO)}__`;function aO(){let{router:n}=xx("useSubmit"),{basename:t}=k.useContext(Wn),e=ER(),s=n.fetch,r=n.navigate;return k.useCallback(async(o,l={})=>{let{action:u,method:h,encType:f,formData:p,body:m}=jR(o,t);if(l.navigate===!1){let b=l.fetcherKey||rO();await s(b,e,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||h,formEncType:l.encType||f,flushSync:l.flushSync})}else await r(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||h,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:e,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,r,t,e])}function oO(n,{relative:t}={}){let{basename:e}=k.useContext(Wn),s=k.useContext(xs);ve(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...zl(n||".",{relative:t})},l=Ki();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:hi([e,o.pathname])),El(o)}function lO(n,{relative:t}={}){let e=k.useContext(dx);ve(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=xx("useViewTransitionState"),r=zl(n,{relative:t});if(!e.isTransitioning)return!1;let o=di(e.currentLocation.pathname,s)||e.currentLocation.pathname,l=di(e.nextLocation.pathname,s)||e.nextLocation.pathname;return Yu(r.pathname,l)!=null||Yu(r.pathname,o)!=null}var eo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cO={setTimeout:(n,t)=>setTimeout(n,t),clearTimeout:n=>clearTimeout(n),setInterval:(n,t)=>setInterval(n,t),clearInterval:n=>clearInterval(n)},uO=class{#t=cO;#e=!1;setTimeoutProvider(n){this.#t=n}setTimeout(n,t){return this.#t.setTimeout(n,t)}clearTimeout(n){this.#t.clearTimeout(n)}setInterval(n,t){return this.#t.setInterval(n,t)}clearInterval(n){this.#t.clearInterval(n)}},Sr=new uO;function hO(n){setTimeout(n,0)}var Dr=typeof window>"u"||"Deno"in globalThis;function vn(){}function dO(n,t){return typeof n=="function"?n(t):n}function zp(n){return typeof n=="number"&&n>=0&&n!==1/0}function Ax(n,t){return Math.max(n+(t||0)-Date.now(),0)}function Yi(n,t){return typeof n=="function"?n(t):n}function ds(n,t){return typeof n=="function"?n(t):n}function Xv(n,t){const{type:e="all",exact:s,fetchStatus:r,predicate:o,queryKey:l,stale:u}=n;if(l){if(s){if(t.queryHash!==bm(l,t.options))return!1}else if(!_l(t.queryKey,l))return!1}if(e!=="all"){const h=t.isActive();if(e==="active"&&!h||e==="inactive"&&h)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||r&&r!==t.state.fetchStatus||o&&!o(t))}function Zv(n,t){const{exact:e,status:s,predicate:r,mutationKey:o}=n;if(o){if(!t.options.mutationKey)return!1;if(e){if(kr(t.options.mutationKey)!==kr(o))return!1}else if(!_l(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||r&&!r(t))}function bm(n,t){return(t?.queryKeyHashFn||kr)(n)}function kr(n){return JSON.stringify(n,(t,e)=>jp(e)?Object.keys(e).sort().reduce((s,r)=>(s[r]=e[r],s),{}):e)}function _l(n,t){return n===t?!0:typeof n!=typeof t?!1:n&&t&&typeof n=="object"&&typeof t=="object"?Object.keys(t).every(e=>_l(n[e],t[e])):!1}var fO=Object.prototype.hasOwnProperty;function Ex(n,t){if(n===t)return n;const e=Kv(n)&&Kv(t);if(!e&&!(jp(n)&&jp(t)))return t;const r=(e?n:Object.keys(n)).length,o=e?t:Object.keys(t),l=o.length,u=e?new Array(l):{};let h=0;for(let f=0;f<l;f++){const p=e?f:o[f],m=n[p],b=t[p];if(m===b){u[p]=m,(e?f<r:fO.call(n,p))&&h++;continue}if(m===null||b===null||typeof m!="object"||typeof b!="object"){u[p]=b;continue}const v=Ex(m,b);u[p]=v,v===m&&h++}return r===l&&h===r?n:u}function Xu(n,t){if(!t||Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(n[e]!==t[e])return!1;return!0}function Kv(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function jp(n){if(!Wv(n))return!1;const t=n.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!Wv(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Wv(n){return Object.prototype.toString.call(n)==="[object Object]"}function pO(n){return new Promise(t=>{Sr.setTimeout(t,n)})}function Bp(n,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(n,t):e.structuralSharing!==!1?Ex(n,t):t}function mO(n,t,e=0){const s=[...n,t];return e&&s.length>e?s.slice(1):s}function gO(n,t,e=0){const s=[t,...n];return e&&s.length>e?s.slice(0,-1):s}var vm=Symbol();function _x(n,t){return!n.queryFn&&t?.initialPromise?()=>t.initialPromise:!n.queryFn||n.queryFn===vm?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function Tx(n,t){return typeof n=="function"?n(...t):!!n}var yO=class extends eo{#t;#e;#s;constructor(){super(),this.#s=n=>{if(!Dr&&window.addEventListener){const t=()=>n();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#s=n,this.#e?.(),this.#e=n(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(n){this.#t!==n&&(this.#t=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(t=>{t(n)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},wm=new yO;function Ip(){let n,t;const e=new Promise((r,o)=>{n=r,t=o});e.status="pending",e.catch(()=>{});function s(r){Object.assign(e,r),delete e.resolve,delete e.reject}return e.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},e.reject=r=>{s({status:"rejected",reason:r}),t(r)},e}var bO=hO;function vO(){let n=[],t=0,e=u=>{u()},s=u=>{u()},r=bO;const o=u=>{t?n.push(u):r(()=>{e(u)})},l=()=>{const u=n;n=[],u.length&&r(()=>{s(()=>{u.forEach(h=>{e(h)})})})};return{batch:u=>{let h;t++;try{h=u()}finally{t--,t||l()}return h},batchCalls:u=>(...h)=>{o(()=>{u(...h)})},schedule:o,setNotifyFunction:u=>{e=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{r=u}}}var $e=vO(),wO=class extends eo{#t=!0;#e;#s;constructor(){super(),this.#s=n=>{if(!Dr&&window.addEventListener){const t=()=>n(!0),e=()=>n(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#s=n,this.#e?.(),this.#e=n(this.setOnline.bind(this))}setOnline(n){this.#t!==n&&(this.#t=n,this.listeners.forEach(e=>{e(n)}))}isOnline(){return this.#t}},Zu=new wO;function SO(n){return Math.min(1e3*2**n,3e4)}function Cx(n){return(n??"online")==="online"?Zu.isOnline():!0}var Up=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function Rx(n){let t=!1,e=0,s;const r=Ip(),o=()=>r.status!=="pending",l=S=>{if(!o()){const A=new Up(S);b(A),n.onCancel?.(A)}},u=()=>{t=!0},h=()=>{t=!1},f=()=>wm.isFocused()&&(n.networkMode==="always"||Zu.isOnline())&&n.canRun(),p=()=>Cx(n.networkMode)&&n.canRun(),m=S=>{o()||(s?.(),r.resolve(S))},b=S=>{o()||(s?.(),r.reject(S))},v=()=>new Promise(S=>{s=A=>{(o()||f())&&S(A)},n.onPause?.()}).then(()=>{s=void 0,o()||n.onContinue?.()}),w=()=>{if(o())return;let S;const A=e===0?n.initialPromise:void 0;try{S=A??n.fn()}catch(E){S=Promise.reject(E)}Promise.resolve(S).then(m).catch(E=>{if(o())return;const T=n.retry??(Dr?0:3),R=n.retryDelay??SO,O=typeof R=="function"?R(e,E):R,D=T===!0||typeof T=="number"&&e<T||typeof T=="function"&&T(e,E);if(t||!D){b(E);return}e++,n.onFail?.(e,E),pO(O).then(()=>f()?void 0:v()).then(()=>{t?b(E):w()})})};return{promise:r,status:()=>r.status,cancel:l,continue:()=>(s?.(),r),cancelRetry:u,continueRetry:h,canStart:p,start:()=>(p()?w():v().then(w),r)}}var Ox=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zp(this.gcTime)&&(this.#t=Sr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Dr?1/0:300*1e3))}clearGcTimeout(){this.#t&&(Sr.clearTimeout(this.#t),this.#t=void 0)}},xO=class extends Ox{#t;#e;#s;#n;#i;#r;#a;constructor(n){super(),this.#a=!1,this.#r=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#n=n.client,this.#s=this.#n.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#t=Jv(this.options),this.state=n.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(n){if(this.options={...this.#r,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Jv(this.options);t.data!==void 0&&(this.setState(Qv(t.data,t.dataUpdatedAt)),this.#t=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(n,t){const e=Bp(this.state.data,n,this.options);return this.#o({data:e,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),e}setState(n,t){this.#o({type:"setState",state:n,setStateOptions:t})}cancel(n){const t=this.#i?.promise;return this.#i?.cancel(n),t?t.then(vn).catch(vn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(n=>ds(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Yi(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Ax(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(t=>t!==n),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(n,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(n&&this.setOptions(n),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const e=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,e.signal)})},r=()=>{const u=_x(this.options,t),f=(()=>{const p={client:this.#n,queryKey:this.queryKey,meta:this.meta};return s(p),p})();return this.#a=!1,this.options.persister?this.options.persister(u,f,this):u(f)},l=(()=>{const u={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:r};return s(u),u})();this.options.behavior?.onFetch(l,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#o({type:"fetch",meta:l.fetchOptions?.meta}),this.#i=Rx({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof Up&&u.revert&&this.setState({...this.#e,fetchStatus:"idle"}),e.abort()},onFail:(u,h)=>{this.#o({type:"failed",failureCount:u,error:h})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#i.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#s.config.onSuccess?.(u,this),this.#s.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Up){if(u.silent)return this.#i.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#o({type:"error",error:u}),this.#s.config.onError?.(u,this),this.#s.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#o(n){const t=e=>{switch(n.type){case"failed":return{...e,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...Dx(e.data,this.options),fetchMeta:n.meta??null};case"success":const s={...e,...Qv(n.data,n.dataUpdatedAt),dataUpdateCount:e.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=n.manual?s:void 0,s;case"error":const r=n.error;return{...e,error:r,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...n.state}}};this.state=t(this.state),$e.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:n})})}};function Dx(n,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Cx(t.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Qv(n,t){return{data:n,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Jv(n){const t=typeof n.initialData=="function"?n.initialData():n.initialData,e=t!==void 0,s=e?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var AO=class extends eo{constructor(n,t){super(),this.options=t,this.#t=n,this.#o=null,this.#a=Ip(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#s=void 0;#n=void 0;#i;#r;#a;#o;#c;#l;#d;#h;#f;#g;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),tw(this.#e,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Hp(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Hp(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#E(),this.#x(),this.#e.removeObserver(this)}setOptions(n){const t=this.options,e=this.#e;if(this.options=this.#t.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ds(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),t._defaulted&&!Xu(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&ew(this.#e,e,this.options,t)&&this.#u(),this.updateResult(),s&&(this.#e!==e||ds(this.options.enabled,this.#e)!==ds(t.enabled,this.#e)||Yi(this.options.staleTime,this.#e)!==Yi(t.staleTime,this.#e))&&this.#m();const r=this.#y();s&&(this.#e!==e||ds(this.options.enabled,this.#e)!==ds(t.enabled,this.#e)||r!==this.#g)&&this.#v(r)}getOptimisticResult(n){const t=this.#t.getQueryCache().build(this.#t,n),e=this.createResult(t,n);return _O(this,e)&&(this.#n=e,this.#r=this.options,this.#i=this.#e.state),e}getCurrentResult(){return this.#n}trackResult(n,t){return new Proxy(n,{get:(e,s)=>(this.trackProp(s),t?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#e}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const t=this.#t.defaultQueryOptions(n),e=this.#t.getQueryCache().build(this.#t,t);return e.fetch().then(()=>this.createResult(e,t))}fetch(n){return this.#u({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(n){this.#w();let t=this.#e.fetch(this.options,n);return n?.throwOnError||(t=t.catch(vn)),t}#m(){this.#E();const n=Yi(this.options.staleTime,this.#e);if(Dr||this.#n.isStale||!zp(n))return;const e=Ax(this.#n.dataUpdatedAt,n)+1;this.#h=Sr.setTimeout(()=>{this.#n.isStale||this.updateResult()},e)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(n){this.#x(),this.#g=n,!(Dr||ds(this.options.enabled,this.#e)===!1||!zp(this.#g)||this.#g===0)&&(this.#f=Sr.setInterval(()=>{(this.options.refetchIntervalInBackground||wm.isFocused())&&this.#u()},this.#g))}#b(){this.#m(),this.#v(this.#y())}#E(){this.#h&&(Sr.clearTimeout(this.#h),this.#h=void 0)}#x(){this.#f&&(Sr.clearInterval(this.#f),this.#f=void 0)}createResult(n,t){const e=this.#e,s=this.options,r=this.#n,o=this.#i,l=this.#r,h=n!==e?n.state:this.#s,{state:f}=n;let p={...f},m=!1,b;if(t._optimisticResults){const U=this.hasListeners(),H=!U&&tw(n,t),V=U&&ew(n,e,t,s);(H||V)&&(p={...p,...Dx(f.data,n.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:v,errorUpdatedAt:w,status:S}=p;b=p.data;let A=!1;if(t.placeholderData!==void 0&&b===void 0&&S==="pending"){let U;r?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(U=r.data,A=!0):U=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,U!==void 0&&(S="success",b=Bp(r?.data,U,t),m=!0)}if(t.select&&b!==void 0&&!A)if(r&&b===o?.data&&t.select===this.#c)b=this.#l;else try{this.#c=t.select,b=t.select(b),b=Bp(r?.data,b,t),this.#l=b,this.#o=null}catch(U){this.#o=U}this.#o&&(v=this.#o,b=this.#l,w=Date.now(),S="error");const E=p.fetchStatus==="fetching",T=S==="pending",R=S==="error",O=T&&E,D=b!==void 0,N={status:S,fetchStatus:p.fetchStatus,isPending:T,isSuccess:S==="success",isError:R,isInitialLoading:O,isLoading:O,data:b,dataUpdatedAt:p.dataUpdatedAt,error:v,errorUpdatedAt:w,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:E,isRefetching:E&&!T,isLoadingError:R&&!D,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:R&&D,isStale:Sm(n,t),refetch:this.refetch,promise:this.#a,isEnabled:ds(t.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const U=B=>{N.status==="error"?B.reject(N.error):N.data!==void 0&&B.resolve(N.data)},H=()=>{const B=this.#a=N.promise=Ip();U(B)},V=this.#a;switch(V.status){case"pending":n.queryHash===e.queryHash&&U(V);break;case"fulfilled":(N.status==="error"||N.data!==V.value)&&H();break;case"rejected":(N.status!=="error"||N.error!==V.reason)&&H();break}}return N}updateResult(){const n=this.#n,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#r=this.options,this.#i.data!==void 0&&(this.#d=this.#e),Xu(t,n))return;this.#n=t;const e=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!this.#p.size)return!0;const o=new Set(r??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(l=>{const u=l;return this.#n[u]!==n[u]&&o.has(u)})};this.#T({listeners:e()})}#w(){const n=this.#t.getQueryCache().build(this.#t,this.options);if(n===this.#e)return;const t=this.#e;this.#e=n,this.#s=n.state,this.hasListeners()&&(t?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#T(n){$e.batch(()=>{n.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function EO(n,t){return ds(t.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&t.retryOnMount===!1)}function tw(n,t){return EO(n,t)||n.state.data!==void 0&&Hp(n,t,t.refetchOnMount)}function Hp(n,t,e){if(ds(t.enabled,n)!==!1&&Yi(t.staleTime,n)!=="static"){const s=typeof e=="function"?e(n):e;return s==="always"||s!==!1&&Sm(n,t)}return!1}function ew(n,t,e,s){return(n!==t||ds(s.enabled,n)===!1)&&(!e.suspense||n.state.status!=="error")&&Sm(n,e)}function Sm(n,t){return ds(t.enabled,n)!==!1&&n.isStaleByTime(Yi(t.staleTime,n))}function _O(n,t){return!Xu(n.getCurrentResult(),t)}function nw(n){return{onFetch:(t,e)=>{const s=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let p=!1;const m=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},b=_x(t.options,t.fetchOptions),v=async(w,S,A)=>{if(p)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const T=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:S,direction:A?"backward":"forward",meta:t.options.meta};return m(z),z})(),R=await b(T),{maxPages:O}=t.options,D=A?gO:mO;return{pages:D(w.pages,R,O),pageParams:D(w.pageParams,S,O)}};if(r&&o.length){const w=r==="backward",S=w?TO:sw,A={pages:o,pageParams:l},E=S(s,A);u=await v(A,E,w)}else{const w=n??o.length;do{const S=h===0?l[0]??s.initialPageParam:sw(s,u);if(h>0&&S==null)break;u=await v(u,S),h++}while(h<w)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e):t.fetchFn=f}}}function sw(n,{pages:t,pageParams:e}){const s=t.length-1;return t.length>0?n.getNextPageParam(t[s],t,e[s],e):void 0}function TO(n,{pages:t,pageParams:e}){return t.length>0?n.getPreviousPageParam?.(t[0],t,e[0],e):void 0}var CO=class extends Ox{#t;#e;#s;#n;constructor(n){super(),this.#t=n.client,this.mutationId=n.mutationId,this.#s=n.mutationCache,this.#e=[],this.state=n.state||kx(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#e.includes(n)||(this.#e.push(n),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#e=this.#e.filter(t=>t!==n),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(n){const t=()=>{this.#i({type:"continue"})},e={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=Rx({fn:()=>this.options.mutationFn?this.options.mutationFn(n,e):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#i({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const s=this.state.status==="pending",r=!this.#n.canStart();try{if(s)t();else{this.#i({type:"pending",variables:n,isPaused:r}),await this.#s.config.onMutate?.(n,this,e);const l=await this.options.onMutate?.(n,e);l!==this.state.context&&this.#i({type:"pending",context:l,variables:n,isPaused:r})}const o=await this.#n.start();return await this.#s.config.onSuccess?.(o,n,this.state.context,this,e),await this.options.onSuccess?.(o,n,this.state.context,e),await this.#s.config.onSettled?.(o,null,this.state.variables,this.state.context,this,e),await this.options.onSettled?.(o,null,n,this.state.context,e),this.#i({type:"success",data:o}),o}catch(o){try{throw await this.#s.config.onError?.(o,n,this.state.context,this,e),await this.options.onError?.(o,n,this.state.context,e),await this.#s.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,e),await this.options.onSettled?.(void 0,o,n,this.state.context,e),o}finally{this.#i({type:"error",error:o})}}finally{this.#s.runNext(this)}}#i(n){const t=e=>{switch(n.type){case"failed":return{...e,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...e,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:n.error,failureCount:e.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=t(this.state),$e.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(n)}),this.#s.notify({mutation:this,type:"updated",action:n})})}};function kx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var RO=class extends eo{constructor(n={}){super(),this.config=n,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(n,t,e){const s=new CO({client:n,mutationCache:this,mutationId:++this.#s,options:n.defaultMutationOptions(t),state:e});return this.add(s),s}add(n){this.#t.add(n);const t=wu(n);if(typeof t=="string"){const e=this.#e.get(t);e?e.push(n):this.#e.set(t,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#t.delete(n)){const t=wu(n);if(typeof t=="string"){const e=this.#e.get(t);if(e)if(e.length>1){const s=e.indexOf(n);s!==-1&&e.splice(s,1)}else e[0]===n&&this.#e.delete(t)}}this.notify({type:"removed",mutation:n})}canRun(n){const t=wu(n);if(typeof t=="string"){const s=this.#e.get(t)?.find(r=>r.state.status==="pending");return!s||s===n}else return!0}runNext(n){const t=wu(n);return typeof t=="string"?this.#e.get(t)?.find(s=>s!==n&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){$e.batch(()=>{this.#t.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(n){const t={exact:!0,...n};return this.getAll().find(e=>Zv(t,e))}findAll(n={}){return this.getAll().filter(t=>Zv(n,t))}notify(n){$e.batch(()=>{this.listeners.forEach(t=>{t(n)})})}resumePausedMutations(){const n=this.getAll().filter(t=>t.state.isPaused);return $e.batch(()=>Promise.all(n.map(t=>t.continue().catch(vn))))}};function wu(n){return n.options.scope?.id}var OO=class extends eo{#t;#e=void 0;#s;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),Xu(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&kr(e.mutationKey)!==kr(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#r(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#r()}mutate(t,e){return this.#n=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#i(){const t=this.#s?.state??kx();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#r(t){$e.batch(()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,s=this.#e.context,r={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#n.onSuccess?.(t.data,e,s,r),this.#n.onSettled?.(t.data,null,e,s,r)):t?.type==="error"&&(this.#n.onError?.(t.error,e,s,r),this.#n.onSettled?.(void 0,t.error,e,s,r))}this.listeners.forEach(e=>{e(this.#e)})})}},DO=class extends eo{constructor(n={}){super(),this.config=n,this.#t=new Map}#t;build(n,t,e){const s=t.queryKey,r=t.queryHash??bm(s,t);let o=this.get(r);return o||(o=new xO({client:n,queryKey:s,queryHash:r,options:n.defaultQueryOptions(t),state:e,defaultOptions:n.getQueryDefaults(s)}),this.add(o)),o}add(n){this.#t.has(n.queryHash)||(this.#t.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const t=this.#t.get(n.queryHash);t&&(n.destroy(),t===n&&this.#t.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){$e.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#t.get(n)}getAll(){return[...this.#t.values()]}find(n){const t={exact:!0,...n};return this.getAll().find(e=>Xv(t,e))}findAll(n={}){const t=this.getAll();return Object.keys(n).length>0?t.filter(e=>Xv(n,e)):t}notify(n){$e.batch(()=>{this.listeners.forEach(t=>{t(n)})})}onFocus(){$e.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){$e.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},kO=class{#t;#e;#s;#n;#i;#r;#a;#o;constructor(n={}){this.#t=n.queryCache||new DO,this.#e=n.mutationCache||new RO,this.#s=n.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#a=wm.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#o=Zu.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(n){return this.#t.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#e.findAll({...n,status:"pending"}).length}getQueryData(n){const t=this.defaultQueryOptions({queryKey:n});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(n){const t=this.defaultQueryOptions(n),e=this.#t.build(this,t),s=e.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&e.isStaleByTime(Yi(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(n){return this.#t.findAll(n).map(({queryKey:t,state:e})=>{const s=e.data;return[t,s]})}setQueryData(n,t,e){const s=this.defaultQueryOptions({queryKey:n}),o=this.#t.get(s.queryHash)?.state.data,l=dO(t,o);if(l!==void 0)return this.#t.build(this,s).setData(l,{...e,manual:!0})}setQueriesData(n,t,e){return $e.batch(()=>this.#t.findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,t,e)]))}getQueryState(n){const t=this.defaultQueryOptions({queryKey:n});return this.#t.get(t.queryHash)?.state}removeQueries(n){const t=this.#t;$e.batch(()=>{t.findAll(n).forEach(e=>{t.remove(e)})})}resetQueries(n,t){const e=this.#t;return $e.batch(()=>(e.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},t)))}cancelQueries(n,t={}){const e={revert:!0,...t},s=$e.batch(()=>this.#t.findAll(n).map(r=>r.cancel(e)));return Promise.all(s).then(vn).catch(vn)}invalidateQueries(n,t={}){return $e.batch(()=>(this.#t.findAll(n).forEach(e=>{e.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},t)))}refetchQueries(n,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},s=$e.batch(()=>this.#t.findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let o=r.fetch(void 0,e);return e.throwOnError||(o=o.catch(vn)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(vn)}fetchQuery(n){const t=this.defaultQueryOptions(n);t.retry===void 0&&(t.retry=!1);const e=this.#t.build(this,t);return e.isStaleByTime(Yi(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(vn).catch(vn)}fetchInfiniteQuery(n){return n.behavior=nw(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(vn).catch(vn)}ensureInfiniteQueryData(n){return n.behavior=nw(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Zu.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(n){this.#s=n}setQueryDefaults(n,t){this.#n.set(kr(n),{queryKey:n,defaultOptions:t})}getQueryDefaults(n){const t=[...this.#n.values()],e={};return t.forEach(s=>{_l(n,s.queryKey)&&Object.assign(e,s.defaultOptions)}),e}setMutationDefaults(n,t){this.#i.set(kr(n),{mutationKey:n,defaultOptions:t})}getMutationDefaults(n){const t=[...this.#i.values()],e={};return t.forEach(s=>{_l(n,s.mutationKey)&&Object.assign(e,s.defaultOptions)}),e}defaultQueryOptions(n){if(n._defaulted)return n;const t={...this.#s.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return t.queryHash||(t.queryHash=bm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===vm&&(t.enabled=!1),t}defaultMutationOptions(n){return n?._defaulted?n:{...this.#s.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Mx=k.createContext(void 0),no=n=>{const t=k.useContext(Mx);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},MO=({client:n,children:t})=>(k.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),_.jsx(Mx.Provider,{value:n,children:t})),Nx=k.createContext(!1),NO=()=>k.useContext(Nx);Nx.Provider;function LO(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var PO=k.createContext(LO()),FO=()=>k.useContext(PO),zO=(n,t)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(t.isReset()||(n.retryOnMount=!1))},jO=n=>{k.useEffect(()=>{n.clearReset()},[n])},BO=({result:n,errorResetBoundary:t,throwOnError:e,query:s,suspense:r})=>n.isError&&!t.isReset()&&!n.isFetching&&s&&(r&&n.data===void 0||Tx(e,[n.error,s])),IO=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),s=n.staleTime;n.staleTime=typeof s=="function"?(...r)=>e(s(...r)):e(s),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},UO=(n,t)=>n.isLoading&&n.isFetching&&!t,HO=(n,t)=>n?.suspense&&t.isPending,iw=(n,t,e)=>t.fetchOptimistic(n).catch(()=>{e.clearReset()});function $O(n,t,e){const s=NO(),r=FO(),o=no(),l=o.defaultQueryOptions(n);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=s?"isRestoring":"optimistic",IO(l),zO(l,r),jO(r);const u=!o.getQueryCache().get(l.queryHash),[h]=k.useState(()=>new t(o,l)),f=h.getOptimisticResult(l),p=!s&&n.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(m=>{const b=p?h.subscribe($e.batchCalls(m)):vn;return h.updateResult(),b},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),k.useEffect(()=>{h.setOptions(l)},[l,h]),HO(l,f))throw iw(l,h,r);if(BO({result:f,errorResetBoundary:r,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw f.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,f),l.experimental_prefetchInRender&&!Dr&&UO(f,s)&&(u?iw(l,h,r):o.getQueryCache().get(l.queryHash)?.promise)?.catch(vn).finally(()=>{h.updateResult()}),l.notifyOnChangeProps?f:h.trackResult(f)}function VO(n,t){return $O(n,AO)}function jl(n,t){const e=no(),[s]=k.useState(()=>new OO(e,n));k.useEffect(()=>{s.setOptions(n)},[s,n]);const r=k.useSyncExternalStore(k.useCallback(l=>s.subscribe($e.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=k.useCallback((l,u)=>{s.mutate(l,u).catch(vn)},[s]);if(r.error&&Tx(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}function Lx(n,t){return function(){return n.apply(t,arguments)}}const{toString:qO}=Object.prototype,{getPrototypeOf:xm}=Object,{iterator:mh,toStringTag:Px}=Symbol,gh=(n=>t=>{const e=qO.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),As=n=>(n=n.toLowerCase(),t=>gh(t)===n),yh=n=>t=>typeof t===n,{isArray:so}=Array,Xa=yh("undefined");function Bl(n){return n!==null&&!Xa(n)&&n.constructor!==null&&!Xa(n.constructor)&&Ln(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Fx=As("ArrayBuffer");function GO(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Fx(n.buffer),t}const YO=yh("string"),Ln=yh("function"),zx=yh("number"),Il=n=>n!==null&&typeof n=="object",XO=n=>n===!0||n===!1,Bu=n=>{if(gh(n)!=="object")return!1;const t=xm(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Px in n)&&!(mh in n)},ZO=n=>{if(!Il(n)||Bl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},KO=As("Date"),WO=As("File"),QO=As("Blob"),JO=As("FileList"),tD=n=>Il(n)&&Ln(n.pipe),eD=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Ln(n.append)&&((t=gh(n))==="formdata"||t==="object"&&Ln(n.toString)&&n.toString()==="[object FormData]"))},nD=As("URLSearchParams"),[sD,iD,rD,aD]=["ReadableStream","Request","Response","Headers"].map(As),oD=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ul(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let s,r;if(typeof n!="object"&&(n=[n]),so(n))for(s=0,r=n.length;s<r;s++)t.call(null,n[s],s,n);else{if(Bl(n))return;const o=e?Object.getOwnPropertyNames(n):Object.keys(n),l=o.length;let u;for(s=0;s<l;s++)u=o[s],t.call(null,n[u],u,n)}}function jx(n,t){if(Bl(n))return null;t=t.toLowerCase();const e=Object.keys(n);let s=e.length,r;for(;s-- >0;)if(r=e[s],t===r.toLowerCase())return r;return null}const xr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Bx=n=>!Xa(n)&&n!==xr;function $p(){const{caseless:n,skipUndefined:t}=Bx(this)&&this||{},e={},s=(r,o)=>{const l=n&&jx(e,o)||o;Bu(e[l])&&Bu(r)?e[l]=$p(e[l],r):Bu(r)?e[l]=$p({},r):so(r)?e[l]=r.slice():(!t||!Xa(r))&&(e[l]=r)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Ul(arguments[r],s);return e}const lD=(n,t,e,{allOwnKeys:s}={})=>(Ul(t,(r,o)=>{e&&Ln(r)?n[o]=Lx(r,e):n[o]=r},{allOwnKeys:s}),n),cD=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),uD=(n,t,e,s)=>{n.prototype=Object.create(t.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},hD=(n,t,e,s)=>{let r,o,l;const u={};if(t=t||{},n==null)return t;do{for(r=Object.getOwnPropertyNames(n),o=r.length;o-- >0;)l=r[o],(!s||s(l,n,t))&&!u[l]&&(t[l]=n[l],u[l]=!0);n=e!==!1&&xm(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},dD=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const s=n.indexOf(t,e);return s!==-1&&s===e},fD=n=>{if(!n)return null;if(so(n))return n;let t=n.length;if(!zx(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},pD=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&xm(Uint8Array)),mD=(n,t)=>{const s=(n&&n[mh]).call(n);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(n,o[0],o[1])}},gD=(n,t)=>{let e;const s=[];for(;(e=n.exec(t))!==null;)s.push(e);return s},yD=As("HTMLFormElement"),bD=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,r){return s.toUpperCase()+r}),rw=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),vD=As("RegExp"),Ix=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),s={};Ul(e,(r,o)=>{let l;(l=t(r,o,n))!==!1&&(s[o]=l||r)}),Object.defineProperties(n,s)},wD=n=>{Ix(n,(t,e)=>{if(Ln(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=n[e];if(Ln(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},SD=(n,t)=>{const e={},s=r=>{r.forEach(o=>{e[o]=!0})};return so(n)?s(n):s(String(n).split(t)),e},xD=()=>{},AD=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function ED(n){return!!(n&&Ln(n.append)&&n[Px]==="FormData"&&n[mh])}const _D=n=>{const t=new Array(10),e=(s,r)=>{if(Il(s)){if(t.indexOf(s)>=0)return;if(Bl(s))return s;if(!("toJSON"in s)){t[r]=s;const o=so(s)?[]:{};return Ul(s,(l,u)=>{const h=e(l,r+1);!Xa(h)&&(o[u]=h)}),t[r]=void 0,o}}return s};return e(n,0)},TD=As("AsyncFunction"),CD=n=>n&&(Il(n)||Ln(n))&&Ln(n.then)&&Ln(n.catch),Ux=((n,t)=>n?setImmediate:t?((e,s)=>(xr.addEventListener("message",({source:r,data:o})=>{r===xr&&o===e&&s.length&&s.shift()()},!1),r=>{s.push(r),xr.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ln(xr.postMessage)),RD=typeof queueMicrotask<"u"?queueMicrotask.bind(xr):typeof process<"u"&&process.nextTick||Ux,OD=n=>n!=null&&Ln(n[mh]),K={isArray:so,isArrayBuffer:Fx,isBuffer:Bl,isFormData:eD,isArrayBufferView:GO,isString:YO,isNumber:zx,isBoolean:XO,isObject:Il,isPlainObject:Bu,isEmptyObject:ZO,isReadableStream:sD,isRequest:iD,isResponse:rD,isHeaders:aD,isUndefined:Xa,isDate:KO,isFile:WO,isBlob:QO,isRegExp:vD,isFunction:Ln,isStream:tD,isURLSearchParams:nD,isTypedArray:pD,isFileList:JO,forEach:Ul,merge:$p,extend:lD,trim:oD,stripBOM:cD,inherits:uD,toFlatObject:hD,kindOf:gh,kindOfTest:As,endsWith:dD,toArray:fD,forEachEntry:mD,matchAll:gD,isHTMLForm:yD,hasOwnProperty:rw,hasOwnProp:rw,reduceDescriptors:Ix,freezeMethods:wD,toObjectSet:SD,toCamelCase:bD,noop:xD,toFiniteNumber:AD,findKey:jx,global:xr,isContextDefined:Bx,isSpecCompliantForm:ED,toJSONObject:_D,isAsyncFn:TD,isThenable:CD,setImmediate:Ux,asap:RD,isIterable:OD};function Lt(n,t,e,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}K.inherits(Lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});const Hx=Lt.prototype,$x={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{$x[n]={value:n}});Object.defineProperties(Lt,$x);Object.defineProperty(Hx,"isAxiosError",{value:!0});Lt.from=(n,t,e,s,r,o)=>{const l=Object.create(Hx);K.toFlatObject(n,l,function(p){return p!==Error.prototype},f=>f!=="isAxiosError");const u=n&&n.message?n.message:"Error",h=t==null&&n?n.code:t;return Lt.call(l,u,h,e,s,r),n&&l.cause==null&&Object.defineProperty(l,"cause",{value:n,configurable:!0}),l.name=n&&n.name||"Error",o&&Object.assign(l,o),l};const DD=null;function Vp(n){return K.isPlainObject(n)||K.isArray(n)}function Vx(n){return K.endsWith(n,"[]")?n.slice(0,-2):n}function aw(n,t,e){return n?n.concat(t).map(function(r,o){return r=Vx(r),!e&&o?"["+r+"]":r}).join(e?".":""):t}function kD(n){return K.isArray(n)&&!n.some(Vp)}const MD=K.toFlatObject(K,{},null,function(t){return/^is[A-Z]/.test(t)});function bh(n,t,e){if(!K.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=K.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,A){return!K.isUndefined(A[S])});const s=e.metaTokens,r=e.visitor||p,o=e.dots,l=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(r))throw new TypeError("visitor must be a function");function f(w){if(w===null)return"";if(K.isDate(w))return w.toISOString();if(K.isBoolean(w))return w.toString();if(!h&&K.isBlob(w))throw new Lt("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(w)||K.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,S,A){let E=w;if(w&&!A&&typeof w=="object"){if(K.endsWith(S,"{}"))S=s?S:S.slice(0,-2),w=JSON.stringify(w);else if(K.isArray(w)&&kD(w)||(K.isFileList(w)||K.endsWith(S,"[]"))&&(E=K.toArray(w)))return S=Vx(S),E.forEach(function(R,O){!(K.isUndefined(R)||R===null)&&t.append(l===!0?aw([S],O,o):l===null?S:S+"[]",f(R))}),!1}return Vp(w)?!0:(t.append(aw(A,S,o),f(w)),!1)}const m=[],b=Object.assign(MD,{defaultVisitor:p,convertValue:f,isVisitable:Vp});function v(w,S){if(!K.isUndefined(w)){if(m.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));m.push(w),K.forEach(w,function(E,T){(!(K.isUndefined(E)||E===null)&&r.call(t,E,K.isString(T)?T.trim():T,S,b))===!0&&v(E,S?S.concat(T):[T])}),m.pop()}}if(!K.isObject(n))throw new TypeError("data must be an object");return v(n),t}function ow(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Am(n,t){this._pairs=[],n&&bh(n,this,t)}const qx=Am.prototype;qx.append=function(t,e){this._pairs.push([t,e])};qx.toString=function(t){const e=t?function(s){return t.call(this,s,ow)}:ow;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function ND(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gx(n,t,e){if(!t)return n;const s=e&&e.encode||ND;K.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let o;if(r?o=r(t,e):o=K.isURLSearchParams(t)?t.toString():new Am(t,e).toString(s),o){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class lw{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){K.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Yx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LD=typeof URLSearchParams<"u"?URLSearchParams:Am,PD=typeof FormData<"u"?FormData:null,FD=typeof Blob<"u"?Blob:null,zD={isBrowser:!0,classes:{URLSearchParams:LD,FormData:PD,Blob:FD},protocols:["http","https","file","blob","url","data"]},Em=typeof window<"u"&&typeof document<"u",qp=typeof navigator=="object"&&navigator||void 0,jD=Em&&(!qp||["ReactNative","NativeScript","NS"].indexOf(qp.product)<0),BD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ID=Em&&window.location.href||"http://localhost",UD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Em,hasStandardBrowserEnv:jD,hasStandardBrowserWebWorkerEnv:BD,navigator:qp,origin:ID},Symbol.toStringTag,{value:"Module"})),hn={...UD,...zD};function HD(n,t){return bh(n,new hn.classes.URLSearchParams,{visitor:function(e,s,r,o){return hn.isNode&&K.isBuffer(e)?(this.append(s,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function $D(n){return K.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function VD(n){const t={},e=Object.keys(n);let s;const r=e.length;let o;for(s=0;s<r;s++)o=e[s],t[o]=n[o];return t}function Xx(n){function t(e,s,r,o){let l=e[o++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),h=o>=e.length;return l=!l&&K.isArray(r)?r.length:l,h?(K.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!u):((!r[l]||!K.isObject(r[l]))&&(r[l]=[]),t(e,s,r[l],o)&&K.isArray(r[l])&&(r[l]=VD(r[l])),!u)}if(K.isFormData(n)&&K.isFunction(n.entries)){const e={};return K.forEachEntry(n,(s,r)=>{t($D(s),r,e,0)}),e}return null}function qD(n,t,e){if(K.isString(n))try{return(t||JSON.parse)(n),K.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(n)}const Hl={transitional:Yx,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const s=e.getContentType()||"",r=s.indexOf("application/json")>-1,o=K.isObject(t);if(o&&K.isHTMLForm(t)&&(t=new FormData(t)),K.isFormData(t))return r?JSON.stringify(Xx(t)):t;if(K.isArrayBuffer(t)||K.isBuffer(t)||K.isStream(t)||K.isFile(t)||K.isBlob(t)||K.isReadableStream(t))return t;if(K.isArrayBufferView(t))return t.buffer;if(K.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return HD(t,this.formSerializer).toString();if((u=K.isFileList(t))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return bh(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return o||r?(e.setContentType("application/json",!1),qD(t)):t}],transformResponse:[function(t){const e=this.transitional||Hl.transitional,s=e&&e.forcedJSONParsing,r=this.responseType==="json";if(K.isResponse(t)||K.isReadableStream(t))return t;if(t&&K.isString(t)&&(s&&!this.responseType||r)){const l=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(u){if(l)throw u.name==="SyntaxError"?Lt.from(u,Lt.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hn.classes.FormData,Blob:hn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],n=>{Hl.headers[n]={}});const GD=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YD=n=>{const t={};let e,s,r;return n&&n.split(`
`).forEach(function(l){r=l.indexOf(":"),e=l.substring(0,r).trim().toLowerCase(),s=l.substring(r+1).trim(),!(!e||t[e]&&GD[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},cw=Symbol("internals");function il(n){return n&&String(n).trim().toLowerCase()}function Iu(n){return n===!1||n==null?n:K.isArray(n)?n.map(Iu):String(n)}function XD(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(n);)t[s[1]]=s[2];return t}const ZD=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function fp(n,t,e,s,r){if(K.isFunction(s))return s.call(this,t,e);if(r&&(t=e),!!K.isString(t)){if(K.isString(s))return t.indexOf(s)!==-1;if(K.isRegExp(s))return s.test(t)}}function KD(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function WD(n,t){const e=K.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+e,{value:function(r,o,l){return this[s].call(this,t,r,o,l)},configurable:!0})})}let Pn=class{constructor(t){t&&this.set(t)}set(t,e,s){const r=this;function o(u,h,f){const p=il(h);if(!p)throw new Error("header name must be a non-empty string");const m=K.findKey(r,p);(!m||r[m]===void 0||f===!0||f===void 0&&r[m]!==!1)&&(r[m||h]=Iu(u))}const l=(u,h)=>K.forEach(u,(f,p)=>o(f,p,h));if(K.isPlainObject(t)||t instanceof this.constructor)l(t,e);else if(K.isString(t)&&(t=t.trim())&&!ZD(t))l(YD(t),e);else if(K.isObject(t)&&K.isIterable(t)){let u={},h,f;for(const p of t){if(!K.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[f=p[0]]=(h=u[f])?K.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}l(u,e)}else t!=null&&o(e,t,s);return this}get(t,e){if(t=il(t),t){const s=K.findKey(this,t);if(s){const r=this[s];if(!e)return r;if(e===!0)return XD(r);if(K.isFunction(e))return e.call(this,r,s);if(K.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=il(t),t){const s=K.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||fp(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let r=!1;function o(l){if(l=il(l),l){const u=K.findKey(s,l);u&&(!e||fp(s,s[u],u,e))&&(delete s[u],r=!0)}}return K.isArray(t)?t.forEach(o):o(t),r}clear(t){const e=Object.keys(this);let s=e.length,r=!1;for(;s--;){const o=e[s];(!t||fp(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const e=this,s={};return K.forEach(this,(r,o)=>{const l=K.findKey(s,o);if(l){e[l]=Iu(r),delete e[o];return}const u=t?KD(o):String(o).trim();u!==o&&delete e[o],e[u]=Iu(r),s[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return K.forEach(this,(s,r)=>{s!=null&&s!==!1&&(e[r]=t&&K.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[cw]=this[cw]={accessors:{}}).accessors,r=this.prototype;function o(l){const u=il(l);s[u]||(WD(r,l),s[u]=!0)}return K.isArray(t)?t.forEach(o):o(t),this}};Pn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(Pn.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(s){this[e]=s}}});K.freezeMethods(Pn);function pp(n,t){const e=this||Hl,s=t||e,r=Pn.from(s.headers);let o=s.data;return K.forEach(n,function(u){o=u.call(e,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function Zx(n){return!!(n&&n.__CANCEL__)}function io(n,t,e){Lt.call(this,n??"canceled",Lt.ERR_CANCELED,t,e),this.name="CanceledError"}K.inherits(io,Lt,{__CANCEL__:!0});function Kx(n,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?n(e):t(new Lt("Request failed with status code "+e.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function QD(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function JD(n,t){n=n||10;const e=new Array(n),s=new Array(n);let r=0,o=0,l;return t=t!==void 0?t:1e3,function(h){const f=Date.now(),p=s[o];l||(l=f),e[r]=h,s[r]=f;let m=o,b=0;for(;m!==r;)b+=e[m++],m=m%n;if(r=(r+1)%n,r===o&&(o=(o+1)%n),f-l<t)return;const v=p&&f-p;return v?Math.round(b*1e3/v):void 0}}function tk(n,t){let e=0,s=1e3/t,r,o;const l=(f,p=Date.now())=>{e=p,r=null,o&&(clearTimeout(o),o=null),n(...f)};return[(...f)=>{const p=Date.now(),m=p-e;m>=s?l(f,p):(r=f,o||(o=setTimeout(()=>{o=null,l(r)},s-m)))},()=>r&&l(r)]}const Ku=(n,t,e=3)=>{let s=0;const r=JD(50,250);return tk(o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,h=l-s,f=r(h),p=l<=u;s=l;const m={loaded:l,total:u,progress:u?l/u:void 0,bytes:h,rate:f||void 0,estimated:f&&u&&p?(u-l)/f:void 0,event:o,lengthComputable:u!=null,[t?"download":"upload"]:!0};n(m)},e)},uw=(n,t)=>{const e=n!=null;return[s=>t[0]({lengthComputable:e,total:n,loaded:s}),t[1]]},hw=n=>(...t)=>K.asap(()=>n(...t)),ek=hn.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,hn.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(hn.origin),hn.navigator&&/(msie|trident)/i.test(hn.navigator.userAgent)):()=>!0,nk=hn.hasStandardBrowserEnv?{write(n,t,e,s,r,o,l){if(typeof document>"u")return;const u=[`${n}=${encodeURIComponent(t)}`];K.isNumber(e)&&u.push(`expires=${new Date(e).toUTCString()}`),K.isString(s)&&u.push(`path=${s}`),K.isString(r)&&u.push(`domain=${r}`),o===!0&&u.push("secure"),K.isString(l)&&u.push(`SameSite=${l}`),document.cookie=u.join("; ")},read(n){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sk(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ik(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function Wx(n,t,e){let s=!sk(t);return n&&(s||e==!1)?ik(n,t):t}const dw=n=>n instanceof Pn?{...n}:n;function Mr(n,t){t=t||{};const e={};function s(f,p,m,b){return K.isPlainObject(f)&&K.isPlainObject(p)?K.merge.call({caseless:b},f,p):K.isPlainObject(p)?K.merge({},p):K.isArray(p)?p.slice():p}function r(f,p,m,b){if(K.isUndefined(p)){if(!K.isUndefined(f))return s(void 0,f,m,b)}else return s(f,p,m,b)}function o(f,p){if(!K.isUndefined(p))return s(void 0,p)}function l(f,p){if(K.isUndefined(p)){if(!K.isUndefined(f))return s(void 0,f)}else return s(void 0,p)}function u(f,p,m){if(m in t)return s(f,p);if(m in n)return s(void 0,f)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(f,p,m)=>r(dw(f),dw(p),m,!0)};return K.forEach(Object.keys({...n,...t}),function(p){const m=h[p]||r,b=m(n[p],t[p],p);K.isUndefined(b)&&m!==u||(e[p]=b)}),e}const Qx=n=>{const t=Mr({},n);let{data:e,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:l,auth:u}=t;if(t.headers=l=Pn.from(l),t.url=Gx(Wx(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),K.isFormData(e)){if(hn.hasStandardBrowserEnv||hn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(K.isFunction(e.getHeaders)){const h=e.getHeaders(),f=["content-type","content-length"];Object.entries(h).forEach(([p,m])=>{f.includes(p.toLowerCase())&&l.set(p,m)})}}if(hn.hasStandardBrowserEnv&&(s&&K.isFunction(s)&&(s=s(t)),s||s!==!1&&ek(t.url))){const h=r&&o&&nk.read(o);h&&l.set(r,h)}return t},rk=typeof XMLHttpRequest<"u",ak=rk&&function(n){return new Promise(function(e,s){const r=Qx(n);let o=r.data;const l=Pn.from(r.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:f}=r,p,m,b,v,w;function S(){v&&v(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let A=new XMLHttpRequest;A.open(r.method.toUpperCase(),r.url,!0),A.timeout=r.timeout;function E(){if(!A)return;const R=Pn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),D={data:!u||u==="text"||u==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:R,config:n,request:A};Kx(function(N){e(N),S()},function(N){s(N),S()},D),A=null}"onloadend"in A?A.onloadend=E:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(E)},A.onabort=function(){A&&(s(new Lt("Request aborted",Lt.ECONNABORTED,n,A)),A=null)},A.onerror=function(O){const D=O&&O.message?O.message:"Network Error",z=new Lt(D,Lt.ERR_NETWORK,n,A);z.event=O||null,s(z),A=null},A.ontimeout=function(){let O=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const D=r.transitional||Yx;r.timeoutErrorMessage&&(O=r.timeoutErrorMessage),s(new Lt(O,D.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,n,A)),A=null},o===void 0&&l.setContentType(null),"setRequestHeader"in A&&K.forEach(l.toJSON(),function(O,D){A.setRequestHeader(D,O)}),K.isUndefined(r.withCredentials)||(A.withCredentials=!!r.withCredentials),u&&u!=="json"&&(A.responseType=r.responseType),f&&([b,w]=Ku(f,!0),A.addEventListener("progress",b)),h&&A.upload&&([m,v]=Ku(h),A.upload.addEventListener("progress",m),A.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(p=R=>{A&&(s(!R||R.type?new io(null,n,A):R),A.abort(),A=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const T=QD(r.url);if(T&&hn.protocols.indexOf(T)===-1){s(new Lt("Unsupported protocol "+T+":",Lt.ERR_BAD_REQUEST,n));return}A.send(o||null)})},ok=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let s=new AbortController,r;const o=function(f){if(!r){r=!0,u();const p=f instanceof Error?f:this.reason;s.abort(p instanceof Lt?p:new io(p instanceof Error?p.message:p))}};let l=t&&setTimeout(()=>{l=null,o(new Lt(`timeout ${t} of ms exceeded`,Lt.ETIMEDOUT))},t);const u=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),n=null)};n.forEach(f=>f.addEventListener("abort",o));const{signal:h}=s;return h.unsubscribe=()=>K.asap(u),h}},lk=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let s=0,r;for(;s<e;)r=s+t,yield n.slice(s,r),s=r},ck=async function*(n,t){for await(const e of uk(n))yield*lk(e,t)},uk=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},fw=(n,t,e,s)=>{const r=ck(n,t);let o=0,l,u=h=>{l||(l=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await r.next();if(f){u(),h.close();return}let m=p.byteLength;if(e){let b=o+=m;e(b)}h.enqueue(new Uint8Array(p))}catch(f){throw u(f),f}},cancel(h){return u(h),r.return()}},{highWaterMark:2})},pw=64*1024,{isFunction:Su}=K,hk=(({Request:n,Response:t})=>({Request:n,Response:t}))(K.global),{ReadableStream:mw,TextEncoder:gw}=K.global,yw=(n,...t)=>{try{return!!n(...t)}catch{return!1}},dk=n=>{n=K.merge.call({skipUndefined:!0},hk,n);const{fetch:t,Request:e,Response:s}=n,r=t?Su(t):typeof fetch=="function",o=Su(e),l=Su(s);if(!r)return!1;const u=r&&Su(mw),h=r&&(typeof gw=="function"?(w=>S=>w.encode(S))(new gw):async w=>new Uint8Array(await new e(w).arrayBuffer())),f=o&&u&&yw(()=>{let w=!1;const S=new e(hn.origin,{body:new mw,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!S}),p=l&&u&&yw(()=>K.isReadableStream(new s("").body)),m={stream:p&&(w=>w.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!m[w]&&(m[w]=(S,A)=>{let E=S&&S[w];if(E)return E.call(S);throw new Lt(`Response type '${w}' is not supported`,Lt.ERR_NOT_SUPPORT,A)})});const b=async w=>{if(w==null)return 0;if(K.isBlob(w))return w.size;if(K.isSpecCompliantForm(w))return(await new e(hn.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(K.isArrayBufferView(w)||K.isArrayBuffer(w))return w.byteLength;if(K.isURLSearchParams(w)&&(w=w+""),K.isString(w))return(await h(w)).byteLength},v=async(w,S)=>{const A=K.toFiniteNumber(w.getContentLength());return A??b(S)};return async w=>{let{url:S,method:A,data:E,signal:T,cancelToken:R,timeout:O,onDownloadProgress:D,onUploadProgress:z,responseType:N,headers:U,withCredentials:H="same-origin",fetchOptions:V}=Qx(w),B=t||fetch;N=N?(N+"").toLowerCase():"text";let W=ok([T,R&&R.toAbortSignal()],O),at=null;const ot=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let dt;try{if(z&&f&&A!=="get"&&A!=="head"&&(dt=await v(U,E))!==0){let M=new e(S,{method:"POST",body:E,duplex:"half"}),X;if(K.isFormData(E)&&(X=M.headers.get("content-type"))&&U.setContentType(X),M.body){const[nt,ct]=uw(dt,Ku(hw(z)));E=fw(M.body,pw,nt,ct)}}K.isString(H)||(H=H?"include":"omit");const L=o&&"credentials"in e.prototype,$={...V,signal:W,method:A.toUpperCase(),headers:U.normalize().toJSON(),body:E,duplex:"half",credentials:L?H:void 0};at=o&&new e(S,$);let it=await(o?B(at,V):B(S,$));const ft=p&&(N==="stream"||N==="response");if(p&&(D||ft&&ot)){const M={};["status","statusText","headers"].forEach(vt=>{M[vt]=it[vt]});const X=K.toFiniteNumber(it.headers.get("content-length")),[nt,ct]=D&&uw(X,Ku(hw(D),!0))||[];it=new s(fw(it.body,pw,nt,()=>{ct&&ct(),ot&&ot()}),M)}N=N||"text";let _t=await m[K.findKey(m,N)||"text"](it,w);return!ft&&ot&&ot(),await new Promise((M,X)=>{Kx(M,X,{data:_t,headers:Pn.from(it.headers),status:it.status,statusText:it.statusText,config:w,request:at})})}catch(L){throw ot&&ot(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,w,at),{cause:L.cause||L}):Lt.from(L,L&&L.code,w,at)}}},fk=new Map,Jx=n=>{let t=n&&n.env||{};const{fetch:e,Request:s,Response:r}=t,o=[s,r,e];let l=o.length,u=l,h,f,p=fk;for(;u--;)h=o[u],f=p.get(h),f===void 0&&p.set(h,f=u?new Map:dk(t)),p=f;return f};Jx();const _m={http:DD,xhr:ak,fetch:{get:Jx}};K.forEach(_m,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const bw=n=>`- ${n}`,pk=n=>K.isFunction(n)||n===null||n===!1;function mk(n,t){n=K.isArray(n)?n:[n];const{length:e}=n;let s,r;const o={};for(let l=0;l<e;l++){s=n[l];let u;if(r=s,!pk(s)&&(r=_m[(u=String(s)).toLowerCase()],r===void 0))throw new Lt(`Unknown adapter '${u}'`);if(r&&(K.isFunction(r)||(r=r.get(t))))break;o[u||"#"+l]=r}if(!r){const l=Object.entries(o).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=e?l.length>1?`since :
`+l.map(bw).join(`
`):" "+bw(l[0]):"as no adapter specified";throw new Lt("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r}const tA={getAdapter:mk,adapters:_m};function mp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new io(null,n)}function vw(n){return mp(n),n.headers=Pn.from(n.headers),n.data=pp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),tA.getAdapter(n.adapter||Hl.adapter,n)(n).then(function(s){return mp(n),s.data=pp.call(n,n.transformResponse,s),s.headers=Pn.from(s.headers),s},function(s){return Zx(s)||(mp(n),s&&s.response&&(s.response.data=pp.call(n,n.transformResponse,s.response),s.response.headers=Pn.from(s.response.headers))),Promise.reject(s)})}const eA="1.13.2",vh={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{vh[n]=function(s){return typeof s===n||"a"+(t<1?"n ":" ")+n}});const ww={};vh.transitional=function(t,e,s){function r(o,l){return"[Axios v"+eA+"] Transitional option '"+o+"'"+l+(s?". "+s:"")}return(o,l,u)=>{if(t===!1)throw new Lt(r(l," has been removed"+(e?" in "+e:"")),Lt.ERR_DEPRECATED);return e&&!ww[l]&&(ww[l]=!0,console.warn(r(l," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,l,u):!0}};vh.spelling=function(t){return(e,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function gk(n,t,e){if(typeof n!="object")throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let r=s.length;for(;r-- >0;){const o=s[r],l=t[o];if(l){const u=n[o],h=u===void 0||l(u,o,n);if(h!==!0)throw new Lt("option "+o+" must be "+h,Lt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Lt("Unknown option "+o,Lt.ERR_BAD_OPTION)}}const Uu={assertOptions:gk,validators:vh},Ls=Uu.validators;let Rr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new lw,response:new lw}}async request(t,e){try{return await this._request(t,e)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Mr(this.defaults,e);const{transitional:s,paramsSerializer:r,headers:o}=e;s!==void 0&&Uu.assertOptions(s,{silentJSONParsing:Ls.transitional(Ls.boolean),forcedJSONParsing:Ls.transitional(Ls.boolean),clarifyTimeoutError:Ls.transitional(Ls.boolean)},!1),r!=null&&(K.isFunction(r)?e.paramsSerializer={serialize:r}:Uu.assertOptions(r,{encode:Ls.function,serialize:Ls.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Uu.assertOptions(e,{baseUrl:Ls.spelling("baseURL"),withXsrfToken:Ls.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=o&&K.merge(o.common,o[e.method]);o&&K.forEach(["delete","get","head","post","put","patch","common"],w=>{delete o[w]}),e.headers=Pn.concat(l,o);const u=[];let h=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(h=h&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let p,m=0,b;if(!h){const w=[vw.bind(this),void 0];for(w.unshift(...u),w.push(...f),b=w.length,p=Promise.resolve(e);m<b;)p=p.then(w[m++],w[m++]);return p}b=u.length;let v=e;for(;m<b;){const w=u[m++],S=u[m++];try{v=w(v)}catch(A){S.call(this,A);break}}try{p=vw.call(this,v)}catch(w){return Promise.reject(w)}for(m=0,b=f.length;m<b;)p=p.then(f[m++],f[m++]);return p}getUri(t){t=Mr(this.defaults,t);const e=Wx(t.baseURL,t.url,t.allowAbsoluteUrls);return Gx(e,t.params,t.paramsSerializer)}};K.forEach(["delete","get","head","options"],function(t){Rr.prototype[t]=function(e,s){return this.request(Mr(s||{},{method:t,url:e,data:(s||{}).data}))}});K.forEach(["post","put","patch"],function(t){function e(s){return function(o,l,u){return this.request(Mr(u||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Rr.prototype[t]=e(),Rr.prototype[t+"Form"]=e(!0)});let yk=class nA{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(u=>{s.subscribe(u),o=u}).then(r);return l.cancel=function(){s.unsubscribe(o)},l},t(function(o,l,u){s.reason||(s.reason=new io(o,l,u),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=s=>{t.abort(s)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new nA(function(r){t=r}),cancel:t}}};function bk(n){return function(e){return n.apply(null,e)}}function vk(n){return K.isObject(n)&&n.isAxiosError===!0}const Gp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Gp).forEach(([n,t])=>{Gp[t]=n});function sA(n){const t=new Rr(n),e=Lx(Rr.prototype.request,t);return K.extend(e,Rr.prototype,t,{allOwnKeys:!0}),K.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return sA(Mr(n,r))},e}const Me=sA(Hl);Me.Axios=Rr;Me.CanceledError=io;Me.CancelToken=yk;Me.isCancel=Zx;Me.VERSION=eA;Me.toFormData=bh;Me.AxiosError=Lt;Me.Cancel=Me.CanceledError;Me.all=function(t){return Promise.all(t)};Me.spread=bk;Me.isAxiosError=vk;Me.mergeConfig=Mr;Me.AxiosHeaders=Pn;Me.formToJSON=n=>Xx(K.isHTMLForm(n)?new FormData(n):n);Me.getAdapter=tA.getAdapter;Me.HttpStatusCode=Gp;Me.default=Me;const{Axios:cI,AxiosError:uI,CanceledError:hI,isCancel:dI,CancelToken:fI,VERSION:pI,all:mI,Cancel:gI,isAxiosError:yI,spread:bI,toFormData:vI,AxiosHeaders:wI,HttpStatusCode:SI,formToJSON:xI,getAdapter:AI,mergeConfig:EI}=Me,wk="https://expense-manager-api-picj.onrender.com/api",Tm=[{value:"FOOD",label:"Food & Drink"},{value:"VEHICLE",label:"Vehicle"},{value:"IT",label:"IT Services"},{value:"OPERATIONS",label:"Operations"},{value:"TRAINING",label:"Training/Education"},{value:"OTHER",label:"Other"}],Sw=10*1024*1024,Sk={"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},Vi="auth_token",Es=Me.create({baseURL:wk,headers:{"Content-Type":"application/json"},timeout:3e4});Es.interceptors.request.use(n=>{const t=localStorage.getItem(Vi);return t&&(n.headers.Authorization=`Bearer ${t}`),n.data instanceof FormData&&delete n.headers["Content-Type"],n},n=>Promise.reject(n));Es.interceptors.response.use(n=>n,n=>{if(n.response?.status===401&&(localStorage.removeItem(Vi),window.location.href="/login"),!n.response)return console.error("Network error:",n.message),Promise.reject({message:"Network error. Please check your connection."});const t=n.response?.data?.message||n.response?.data?.error||n.message||"An unexpected error occurred";return Promise.reject({status:n.response?.status,message:t,data:n.response?.data})});const xk=async n=>(await Es.post("/auth/register",n)).data,Ak=async n=>(await Es.post("/auth/login",n)).data,Ek=async()=>(await Es.get("/auth/me")).data,_k=()=>Promise.resolve(),iA=k.createContext(null),Tk=({children:n})=>{const[t,e]=k.useState(null),[s,r]=k.useState(localStorage.getItem(Vi)),[o,l]=k.useState(!0),[u,h]=k.useState(null);k.useEffect(()=>{(async()=>{const w=localStorage.getItem(Vi);if(!w){l(!1);return}try{const S=await Ek();e(S),r(w)}catch(S){console.error("Auth verification failed:",S),localStorage.removeItem(Vi),r(null),e(null)}finally{l(!1)}})()},[]);const f=k.useCallback(async(v,w)=>{try{h(null),l(!0);const S=await Ak({email:v,password:w});return localStorage.setItem(Vi,S.token),r(S.token),e(S.user),{success:!0}}catch(S){return h(S.message),{success:!1,error:S.message}}finally{l(!1)}},[]),p=k.useCallback(async(v,w)=>{try{h(null),l(!0);const S=await xk({email:v,password:w});return localStorage.setItem(Vi,S.token),r(S.token),e(S.user),{success:!0}}catch(S){return h(S.message),{success:!1,error:S.message}}finally{l(!1)}},[]),m=k.useCallback(async()=>{try{await _k()}catch(v){console.error("Logout error:",v)}finally{localStorage.removeItem(Vi),r(null),e(null),h(null)}},[]),b={user:t,token:s,loading:o,error:u,isAuthenticated:!!s&&!!t,login:f,register:p,logout:m};return _.jsx(iA.Provider,{value:b,children:n})},wh=()=>{const n=k.useContext(iA);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n};function rA(n){var t,e,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(t=0;t<r;t++)n[t]&&(e=rA(n[t]))&&(s&&(s+=" "),s+=e)}else for(e in n)n[e]&&(s&&(s+=" "),s+=e);return s}function Wi(){for(var n,t,e=0,s="",r=arguments.length;e<r;e++)(n=arguments[e])&&(t=rA(n))&&(s&&(s+=" "),s+=t);return s}const aA=({size:n="md",color:t="primary"})=>{const e={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"},s={primary:"text-primary",white:"text-white"};return _.jsxs("svg",{className:Wi("animate-spin",e[n],s[t]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Ck=({children:n})=>{const{isAuthenticated:t,loading:e}=wh();return e?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:_.jsxs("div",{className:"flex flex-col items-center gap-4",children:[_.jsx(aA,{size:"lg"}),_.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Loading..."})]})}):t?n:_.jsx(Fu,{to:"/login",replace:!0})};var $l=n=>n.type==="checkbox",Ar=n=>n instanceof Date,Nn=n=>n==null;const oA=n=>typeof n=="object";var Be=n=>!Nn(n)&&!Array.isArray(n)&&oA(n)&&!Ar(n),Rk=n=>Be(n)&&n.target?$l(n.target)?n.target.checked:n.target.value:n,Ok=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,Dk=(n,t)=>n.has(Ok(t)),kk=n=>{const t=n.constructor&&n.constructor.prototype;return Be(t)&&t.hasOwnProperty("isPrototypeOf")},Cm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xe(n){if(n instanceof Date)return new Date(n);const t=typeof FileList<"u"&&n instanceof FileList;if(Cm&&(n instanceof Blob||t))return n;const e=Array.isArray(n);if(!e&&!(Be(n)&&kk(n)))return n;const s=e?[]:Object.create(Object.getPrototypeOf(n));for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=Xe(n[r]));return s}var Sh=n=>/^\w*$/.test(n),ke=n=>n===void 0,Rm=n=>Array.isArray(n)?n.filter(Boolean):[],Om=n=>Rm(n.replace(/["|']|\]/g,"").split(/\.|\[/)),bt=(n,t,e)=>{if(!t||!Be(n))return e;const s=(Sh(t)?[t]:Om(t)).reduce((r,o)=>Nn(r)?r:r[o],n);return ke(s)||s===n?ke(n[t])?e:n[t]:s},js=n=>typeof n=="boolean",vs=n=>typeof n=="function",le=(n,t,e)=>{let s=-1;const r=Sh(t)?[t]:Om(t),o=r.length,l=o-1;for(;++s<o;){const u=r[s];let h=e;if(s!==l){const f=n[u];h=Be(f)||Array.isArray(f)?f:isNaN(+r[s+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;n[u]=h,n=n[u]}};const xw={BLUR:"blur",FOCUS_OUT:"focusout"},ws={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},oi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Mk=Vn.createContext(null);Mk.displayName="HookFormContext";var Nk=(n,t,e,s=!0)=>{const r={defaultValues:t._defaultValues};for(const o in n)Object.defineProperty(r,o,{get:()=>{const l=o;return t._proxyFormState[l]!==ws.all&&(t._proxyFormState[l]=!s||ws.all),n[l]}});return r};const Lk=typeof window<"u"?Vn.useLayoutEffect:Vn.useEffect;var Xn=n=>typeof n=="string",Pk=(n,t,e,s,r)=>Xn(n)?(s&&t.watch.add(n),bt(e,n,r)):Array.isArray(n)?n.map(o=>(s&&t.watch.add(o),bt(e,o))):(s&&(t.watchAll=!0),e),Yp=n=>Nn(n)||!oA(n);function qi(n,t,e=new WeakSet){if(Yp(n)||Yp(t))return Object.is(n,t);if(Ar(n)&&Ar(t))return n.getTime()===t.getTime();const s=Object.keys(n),r=Object.keys(t);if(s.length!==r.length)return!1;if(e.has(n)||e.has(t))return!0;e.add(n),e.add(t);for(const o of s){const l=n[o];if(!r.includes(o))return!1;if(o!=="ref"){const u=t[o];if(Ar(l)&&Ar(u)||Be(l)&&Be(u)||Array.isArray(l)&&Array.isArray(u)?!qi(l,u,e):!Object.is(l,u))return!1}}return!0}var Dm=(n,t,e,s,r)=>t?{...e[n],types:{...e[n]&&e[n].types?e[n].types:{},[s]:r||!0}}:{},vl=n=>Array.isArray(n)?n:[n],Aw=()=>{let n=[];return{get observers(){return n},next:r=>{for(const o of n)o.next&&o.next(r)},subscribe:r=>(n.push(r),{unsubscribe:()=>{n=n.filter(o=>o!==r)}}),unsubscribe:()=>{n=[]}}};function lA(n,t){const e={};for(const s in n)if(n.hasOwnProperty(s)){const r=n[s],o=t[s];if(r&&Be(r)&&o){const l=lA(r,o);Be(l)&&(e[s]=l)}else n[s]&&(e[s]=o)}return e}var yn=n=>Be(n)&&!Object.keys(n).length,km=n=>n.type==="file",Wu=n=>{if(!Cm)return!1;const t=n?n.ownerDocument:0;return n instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},cA=n=>n.type==="select-multiple",Mm=n=>n.type==="radio",Fk=n=>Mm(n)||$l(n),gp=n=>Wu(n)&&n.isConnected;function zk(n,t){const e=t.slice(0,-1).length;let s=0;for(;s<e;)n=ke(n)?s++:n[t[s++]];return n}function jk(n){for(const t in n)if(n.hasOwnProperty(t)&&!ke(n[t]))return!1;return!0}function je(n,t){const e=Array.isArray(t)?t:Sh(t)?[t]:Om(t),s=e.length===1?n:zk(n,e),r=e.length-1,o=e[r];return s&&delete s[o],r!==0&&(Be(s)&&yn(s)||Array.isArray(s)&&jk(s))&&je(n,e.slice(0,-1)),n}var Bk=n=>{for(const t in n)if(vs(n[t]))return!0;return!1};function uA(n){return Array.isArray(n)||Be(n)&&!Bk(n)}function Xp(n,t={}){for(const e in n){const s=n[e];uA(s)?(t[e]=Array.isArray(s)?[]:{},Xp(s,t[e])):ke(s)||(t[e]=!0)}return t}function La(n,t,e){e||(e=Xp(t));for(const s in n){const r=n[s];if(uA(r))ke(t)||Yp(e[s])?e[s]=Xp(r,Array.isArray(r)?[]:{}):La(r,Nn(t)?{}:t[s],e[s]);else{const o=t[s];e[s]=!qi(r,o)}}return e}const Ew={value:!1,isValid:!1},_w={value:!0,isValid:!0};var hA=n=>{if(Array.isArray(n)){if(n.length>1){const t=n.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!ke(n[0].attributes.value)?ke(n[0].value)||n[0].value===""?_w:{value:n[0].value,isValid:!0}:_w:Ew}return Ew},dA=(n,{valueAsNumber:t,valueAsDate:e,setValueAs:s})=>ke(n)?n:t?n===""?NaN:n&&+n:e&&Xn(n)?new Date(n):s?s(n):n;const Tw={isValid:!1,value:null};var fA=n=>Array.isArray(n)?n.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,Tw):Tw;function Cw(n){const t=n.ref;return km(t)?t.files:Mm(t)?fA(n.refs).value:cA(t)?[...t.selectedOptions].map(({value:e})=>e):$l(t)?hA(n.refs).value:dA(ke(t.value)?n.ref.value:t.value,n)}var Ik=(n,t,e,s)=>{const r={};for(const o of n){const l=bt(t,o);l&&le(r,o,l._f)}return{criteriaMode:e,names:[...n],fields:r,shouldUseNativeValidation:s}},Qu=n=>n instanceof RegExp,rl=n=>ke(n)?n:Qu(n)?n.source:Be(n)?Qu(n.value)?n.value.source:n.value:n,Rw=n=>({isOnSubmit:!n||n===ws.onSubmit,isOnBlur:n===ws.onBlur,isOnChange:n===ws.onChange,isOnAll:n===ws.all,isOnTouch:n===ws.onTouched});const Ow="AsyncFunction";var Uk=n=>!!n&&!!n.validate&&!!(vs(n.validate)&&n.validate.constructor.name===Ow||Be(n.validate)&&Object.values(n.validate).find(t=>t.constructor.name===Ow)),Hk=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),Dw=(n,t,e)=>!e&&(t.watchAll||t.watch.has(n)||[...t.watch].some(s=>n.startsWith(s)&&/^\.\w+/.test(n.slice(s.length))));const wl=(n,t,e,s)=>{for(const r of e||Object.keys(n)){const o=bt(n,r);if(o){const{_f:l,...u}=o;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],r)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(wl(u,t))break}else if(Be(u)&&wl(u,t))break}}};function kw(n,t,e){const s=bt(n,e);if(s||Sh(e))return{error:s,name:e};const r=e.split(".");for(;r.length;){const o=r.join("."),l=bt(t,o),u=bt(n,o);if(l&&!Array.isArray(l)&&e!==o)return{name:e};if(u&&u.type)return{name:o,error:u};if(u&&u.root&&u.root.type)return{name:`${o}.root`,error:u.root};r.pop()}return{name:e}}var $k=(n,t,e,s)=>{e(n);const{name:r,...o}=n;return yn(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(l=>t[l]===(!s||ws.all))},Vk=(n,t,e)=>!n||!t||n===t||vl(n).some(s=>s&&(e?s===t:s.startsWith(t)||t.startsWith(s))),qk=(n,t,e,s,r)=>r.isOnAll?!1:!e&&r.isOnTouch?!(t||n):(e?s.isOnBlur:r.isOnBlur)?!n:(e?s.isOnChange:r.isOnChange)?n:!0,Gk=(n,t)=>!Rm(bt(n,t)).length&&je(n,t),Yk=(n,t,e)=>{const s=vl(bt(n,e));return le(s,"root",t[e]),le(n,e,s),n};function Mw(n,t,e="validate"){if(Xn(n)||Array.isArray(n)&&n.every(Xn)||js(n)&&!n)return{type:e,message:Xn(n)?n:"",ref:t}}var ka=n=>Be(n)&&!Qu(n)?n:{value:n,message:""},Nw=async(n,t,e,s,r,o)=>{const{ref:l,refs:u,required:h,maxLength:f,minLength:p,min:m,max:b,pattern:v,validate:w,name:S,valueAsNumber:A,mount:E}=n._f,T=bt(e,S);if(!E||t.has(S))return{};const R=u?u[0]:l,O=W=>{r&&R.reportValidity&&(R.setCustomValidity(js(W)?"":W||""),R.reportValidity())},D={},z=Mm(l),N=$l(l),U=z||N,H=(A||km(l))&&ke(l.value)&&ke(T)||Wu(l)&&l.value===""||T===""||Array.isArray(T)&&!T.length,V=Dm.bind(null,S,s,D),B=(W,at,ot,dt=oi.maxLength,L=oi.minLength)=>{const $=W?at:ot;D[S]={type:W?dt:L,message:$,ref:l,...V(W?dt:L,$)}};if(o?!Array.isArray(T)||!T.length:h&&(!U&&(H||Nn(T))||js(T)&&!T||N&&!hA(u).isValid||z&&!fA(u).isValid)){const{value:W,message:at}=Xn(h)?{value:!!h,message:h}:ka(h);if(W&&(D[S]={type:oi.required,message:at,ref:R,...V(oi.required,at)},!s))return O(at),D}if(!H&&(!Nn(m)||!Nn(b))){let W,at;const ot=ka(b),dt=ka(m);if(!Nn(T)&&!isNaN(T)){const L=l.valueAsNumber||T&&+T;Nn(ot.value)||(W=L>ot.value),Nn(dt.value)||(at=L<dt.value)}else{const L=l.valueAsDate||new Date(T),$=_t=>new Date(new Date().toDateString()+" "+_t),it=l.type=="time",ft=l.type=="week";Xn(ot.value)&&T&&(W=it?$(T)>$(ot.value):ft?T>ot.value:L>new Date(ot.value)),Xn(dt.value)&&T&&(at=it?$(T)<$(dt.value):ft?T<dt.value:L<new Date(dt.value))}if((W||at)&&(B(!!W,ot.message,dt.message,oi.max,oi.min),!s))return O(D[S].message),D}if((f||p)&&!H&&(Xn(T)||o&&Array.isArray(T))){const W=ka(f),at=ka(p),ot=!Nn(W.value)&&T.length>+W.value,dt=!Nn(at.value)&&T.length<+at.value;if((ot||dt)&&(B(ot,W.message,at.message),!s))return O(D[S].message),D}if(v&&!H&&Xn(T)){const{value:W,message:at}=ka(v);if(Qu(W)&&!T.match(W)&&(D[S]={type:oi.pattern,message:at,ref:l,...V(oi.pattern,at)},!s))return O(at),D}if(w){if(vs(w)){const W=await w(T,e),at=Mw(W,R);if(at&&(D[S]={...at,...V(oi.validate,at.message)},!s))return O(at.message),D}else if(Be(w)){let W={};for(const at in w){if(!yn(W)&&!s)break;const ot=Mw(await w[at](T,e),R,at);ot&&(W={...ot,...V(at,ot.message)},O(ot.message),s&&(D[S]=W))}if(!yn(W)&&(D[S]={ref:R,...W},!s))return D}}return O(!0),D};const Xk={mode:ws.onSubmit,reValidateMode:ws.onChange,shouldFocusError:!0};function Zk(n={}){let t={...Xk,...n},e={submitCount:0,isDirty:!1,isReady:!1,isLoading:vs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},r=Be(t.defaultValues)||Be(t.values)?Xe(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:Xe(r),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={...p};let b={...m};const v={array:Aw(),state:Aw()},w=t.criteriaMode===ws.all,S=F=>Y=>{clearTimeout(f),f=setTimeout(F,Y)},A=async F=>{if(!l.keepIsValid&&!t.disabled&&(m.isValid||b.isValid||F)){let Y;t.resolver?(Y=yn((await U()).errors),E()):Y=await V(s,!0),Y!==e.isValid&&v.state.next({isValid:Y})}},E=(F,Y)=>{!t.disabled&&(m.isValidating||m.validatingFields||b.isValidating||b.validatingFields)&&((F||Array.from(u.mount)).forEach(J=>{J&&(Y?le(e.validatingFields,J,Y):je(e.validatingFields,J))}),v.state.next({validatingFields:e.validatingFields,isValidating:!yn(e.validatingFields)}))},T=(F,Y=[],J,ut,ht=!0,lt=!0)=>{if(ut&&J&&!t.disabled){if(l.action=!0,lt&&Array.isArray(bt(s,F))){const pt=J(bt(s,F),ut.argA,ut.argB);ht&&le(s,F,pt)}if(lt&&Array.isArray(bt(e.errors,F))){const pt=J(bt(e.errors,F),ut.argA,ut.argB);ht&&le(e.errors,F,pt),Gk(e.errors,F)}if((m.touchedFields||b.touchedFields)&&lt&&Array.isArray(bt(e.touchedFields,F))){const pt=J(bt(e.touchedFields,F),ut.argA,ut.argB);ht&&le(e.touchedFields,F,pt)}(m.dirtyFields||b.dirtyFields)&&(e.dirtyFields=La(r,o)),v.state.next({name:F,isDirty:W(F,Y),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else le(o,F,Y)},R=(F,Y)=>{le(e.errors,F,Y),v.state.next({errors:e.errors})},O=F=>{e.errors=F,v.state.next({errors:e.errors,isValid:!1})},D=(F,Y,J,ut)=>{const ht=bt(s,F);if(ht){const lt=bt(o,F,ke(J)?bt(r,F):J);ke(lt)||ut&&ut.defaultChecked||Y?le(o,F,Y?lt:Cw(ht._f)):dt(F,lt),l.mount&&!l.action&&A()}},z=(F,Y,J,ut,ht)=>{let lt=!1,pt=!1;const Pt={name:F};if(!t.disabled){if(!J||ut){(m.isDirty||b.isDirty)&&(pt=e.isDirty,e.isDirty=Pt.isDirty=W(),lt=pt!==Pt.isDirty);const It=qi(bt(r,F),Y);pt=!!bt(e.dirtyFields,F),It?je(e.dirtyFields,F):le(e.dirtyFields,F,!0),Pt.dirtyFields=e.dirtyFields,lt=lt||(m.dirtyFields||b.dirtyFields)&&pt!==!It}if(J){const It=bt(e.touchedFields,F);It||(le(e.touchedFields,F,J),Pt.touchedFields=e.touchedFields,lt=lt||(m.touchedFields||b.touchedFields)&&It!==J)}lt&&ht&&v.state.next(Pt)}return lt?Pt:{}},N=(F,Y,J,ut)=>{const ht=bt(e.errors,F),lt=(m.isValid||b.isValid)&&js(Y)&&e.isValid!==Y;if(t.delayError&&J?(h=S(()=>R(F,J)),h(t.delayError)):(clearTimeout(f),h=null,J?le(e.errors,F,J):je(e.errors,F)),(J?!qi(ht,J):ht)||!yn(ut)||lt){const pt={...ut,...lt&&js(Y)?{isValid:Y}:{},errors:e.errors,name:F};e={...e,...pt},v.state.next(pt)}},U=async F=>(E(F,!0),await t.resolver(o,t.context,Ik(F||u.mount,s,t.criteriaMode,t.shouldUseNativeValidation))),H=async F=>{const{errors:Y}=await U(F);if(E(F),F)for(const J of F){const ut=bt(Y,J);ut?le(e.errors,J,ut):je(e.errors,J)}else e.errors=Y;return Y},V=async(F,Y,J={valid:!0})=>{for(const ut in F){const ht=F[ut];if(ht){const{_f:lt,...pt}=ht;if(lt){const Pt=u.array.has(lt.name),It=ht._f&&Uk(ht._f);It&&m.validatingFields&&E([lt.name],!0);const Ue=await Nw(ht,u.disabled,o,w,t.shouldUseNativeValidation&&!Y,Pt);if(It&&m.validatingFields&&E([lt.name]),Ue[lt.name]&&(J.valid=!1,Y))break;!Y&&(bt(Ue,lt.name)?Pt?Yk(e.errors,Ue,lt.name):le(e.errors,lt.name,Ue[lt.name]):je(e.errors,lt.name))}!yn(pt)&&await V(pt,Y,J)}}return J.valid},B=()=>{for(const F of u.unMount){const Y=bt(s,F);Y&&(Y._f.refs?Y._f.refs.every(J=>!gp(J)):!gp(Y._f.ref))&&Jt(F)}u.unMount=new Set},W=(F,Y)=>!t.disabled&&(F&&Y&&le(o,F,Y),!qi(M(),r)),at=(F,Y,J)=>Pk(F,u,{...l.mount?o:ke(Y)?r:Xn(F)?{[F]:Y}:Y},J,Y),ot=F=>Rm(bt(l.mount?o:r,F,t.shouldUnregister?bt(r,F,[]):[])),dt=(F,Y,J={})=>{const ut=bt(s,F);let ht=Y;if(ut){const lt=ut._f;lt&&(!lt.disabled&&le(o,F,dA(Y,lt)),ht=Wu(lt.ref)&&Nn(Y)?"":Y,cA(lt.ref)?[...lt.ref.options].forEach(pt=>pt.selected=ht.includes(pt.value)):lt.refs?$l(lt.ref)?lt.refs.forEach(pt=>{(!pt.defaultChecked||!pt.disabled)&&(Array.isArray(ht)?pt.checked=!!ht.find(Pt=>Pt===pt.value):pt.checked=ht===pt.value||!!ht)}):lt.refs.forEach(pt=>pt.checked=pt.value===ht):km(lt.ref)?lt.ref.value="":(lt.ref.value=ht,lt.ref.type||v.state.next({name:F,values:Xe(o)})))}(J.shouldDirty||J.shouldTouch)&&z(F,ht,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&_t(F)},L=(F,Y,J)=>{for(const ut in Y){if(!Y.hasOwnProperty(ut))return;const ht=Y[ut],lt=F+"."+ut,pt=bt(s,lt);(u.array.has(F)||Be(ht)||pt&&!pt._f)&&!Ar(ht)?L(lt,ht,J):dt(lt,ht,J)}},$=(F,Y,J={})=>{const ut=bt(s,F),ht=u.array.has(F),lt=Xe(Y);le(o,F,lt),ht?(v.array.next({name:F,values:Xe(o)}),(m.isDirty||m.dirtyFields||b.isDirty||b.dirtyFields)&&J.shouldDirty&&v.state.next({name:F,dirtyFields:La(r,o),isDirty:W(F,lt)})):ut&&!ut._f&&!Nn(lt)?L(F,lt,J):dt(F,lt,J),Dw(F,u)&&v.state.next({...e,name:F}),v.state.next({name:l.mount?F:void 0,values:Xe(o)})},it=async F=>{l.mount=!0;const Y=F.target;let J=Y.name,ut=!0;const ht=bt(s,J),lt=It=>{ut=Number.isNaN(It)||Ar(It)&&isNaN(It.getTime())||qi(It,bt(o,J,It))},pt=Rw(t.mode),Pt=Rw(t.reValidateMode);if(ht){let It,Ue;const $r=Y.type?Cw(ht._f):Rk(F),Cs=F.type===xw.BLUR||F.type===xw.FOCUS_OUT,Ji=!Hk(ht._f)&&!t.resolver&&!bt(e.errors,J)&&!ht._f.deps||qk(Cs,bt(e.touchedFields,J),e.isSubmitted,Pt,pt),Je=Dw(J,u,Cs);le(o,J,$r),Cs?(!Y||!Y.readOnly)&&(ht._f.onBlur&&ht._f.onBlur(F),h&&h(0)):ht._f.onChange&&ht._f.onChange(F);const Qn=z(J,$r,Cs),pn=!yn(Qn)||Je;if(!Cs&&v.state.next({name:J,type:F.type,values:Xe(o)}),Ji)return(m.isValid||b.isValid)&&(t.mode==="onBlur"?Cs&&A():Cs||A()),pn&&v.state.next({name:J,...Je?{}:Qn});if(!Cs&&Je&&v.state.next({...e}),t.resolver){const{errors:tc}=await U([J]);if(E([J]),lt($r),ut){const Bh=kw(e.errors,s,J),ec=kw(tc,s,Bh.name||J);It=ec.error,J=ec.name,Ue=yn(tc)}}else E([J],!0),It=(await Nw(ht,u.disabled,o,w,t.shouldUseNativeValidation))[J],E([J]),lt($r),ut&&(It?Ue=!1:(m.isValid||b.isValid)&&(Ue=await V(s,!0)));ut&&(ht._f.deps&&(!Array.isArray(ht._f.deps)||ht._f.deps.length>0)&&_t(ht._f.deps),N(J,Ue,It,Qn))}},ft=(F,Y)=>{if(bt(e.errors,Y)&&F.focus)return F.focus(),1},_t=async(F,Y={})=>{let J,ut;const ht=vl(F);if(t.resolver){const lt=await H(ke(F)?F:ht);J=yn(lt),ut=F?!ht.some(pt=>bt(lt,pt)):J}else F?(ut=(await Promise.all(ht.map(async lt=>{const pt=bt(s,lt);return await V(pt&&pt._f?{[lt]:pt}:pt)}))).every(Boolean),!(!ut&&!e.isValid)&&A()):ut=J=await V(s);return v.state.next({...!Xn(F)||(m.isValid||b.isValid)&&J!==e.isValid?{}:{name:F},...t.resolver||!F?{isValid:J}:{},errors:e.errors}),Y.shouldFocus&&!ut&&wl(s,ft,F?ht:u.mount),ut},M=(F,Y)=>{let J={...l.mount?o:r};return Y&&(J=lA(Y.dirtyFields?e.dirtyFields:e.touchedFields,J)),ke(F)?J:Xn(F)?bt(J,F):F.map(ut=>bt(J,ut))},X=(F,Y)=>({invalid:!!bt((Y||e).errors,F),isDirty:!!bt((Y||e).dirtyFields,F),error:bt((Y||e).errors,F),isValidating:!!bt(e.validatingFields,F),isTouched:!!bt((Y||e).touchedFields,F)}),nt=F=>{F&&vl(F).forEach(Y=>je(e.errors,Y)),v.state.next({errors:F?e.errors:{}})},ct=(F,Y,J)=>{const ut=(bt(s,F,{_f:{}})._f||{}).ref,ht=bt(e.errors,F)||{},{ref:lt,message:pt,type:Pt,...It}=ht;le(e.errors,F,{...It,...Y,ref:ut}),v.state.next({name:F,errors:e.errors,isValid:!1}),J&&J.shouldFocus&&ut&&ut.focus&&ut.focus()},vt=(F,Y)=>vs(F)?v.state.subscribe({next:J=>"values"in J&&F(at(void 0,Y),J)}):at(F,Y,!0),xt=F=>v.state.subscribe({next:Y=>{Vk(F.name,Y.name,F.exact)&&$k(Y,F.formState||m,Ts,F.reRenderRoot)&&F.callback({values:{...o},...e,...Y,defaultValues:r})}}).unsubscribe,St=F=>(l.mount=!0,b={...b,...F.formState},xt({...F,formState:{...p,...F.formState}})),Jt=(F,Y={})=>{for(const J of F?vl(F):u.mount)u.mount.delete(J),u.array.delete(J),Y.keepValue||(je(s,J),je(o,J)),!Y.keepError&&je(e.errors,J),!Y.keepDirty&&je(e.dirtyFields,J),!Y.keepTouched&&je(e.touchedFields,J),!Y.keepIsValidating&&je(e.validatingFields,J),!t.shouldUnregister&&!Y.keepDefaultValue&&je(r,J);v.state.next({values:Xe(o)}),v.state.next({...e,...Y.keepDirty?{isDirty:W()}:{}}),!Y.keepIsValid&&A()},jt=({disabled:F,name:Y})=>{(js(F)&&l.mount||F||u.disabled.has(Y))&&(F?u.disabled.add(Y):u.disabled.delete(Y))},Zt=(F,Y={})=>{let J=bt(s,F);const ut=js(Y.disabled)||js(t.disabled);return le(s,F,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:F}},name:F,mount:!0,...Y}}),u.mount.add(F),J?jt({disabled:js(Y.disabled)?Y.disabled:t.disabled,name:F}):D(F,!0,Y.value),{...ut?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:rl(Y.min),max:rl(Y.max),minLength:rl(Y.minLength),maxLength:rl(Y.maxLength),pattern:rl(Y.pattern)}:{},name:F,onChange:it,onBlur:it,ref:ht=>{if(ht){Zt(F,Y),J=bt(s,F);const lt=ke(ht.value)&&ht.querySelectorAll&&ht.querySelectorAll("input,select,textarea")[0]||ht,pt=Fk(lt),Pt=J._f.refs||[];if(pt?Pt.find(It=>It===lt):lt===J._f.ref)return;le(s,F,{_f:{...J._f,...pt?{refs:[...Pt.filter(gp),lt,...Array.isArray(bt(r,F))?[{}]:[]],ref:{type:lt.type,name:F}}:{ref:lt}}}),D(F,!1,void 0,lt)}else J=bt(s,F,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(Dk(u.array,F)&&l.action)&&u.unMount.add(F)}}},qe=()=>t.shouldFocusError&&wl(s,ft,u.mount),fn=F=>{js(F)&&(v.state.next({disabled:F}),wl(s,(Y,J)=>{const ut=bt(s,J);ut&&(Y.disabled=ut._f.disabled||F,Array.isArray(ut._f.refs)&&ut._f.refs.forEach(ht=>{ht.disabled=ut._f.disabled||F}))},0,!1))},Bt=(F,Y)=>async J=>{let ut;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let ht=Xe(o);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:lt,values:pt}=await U();E(),e.errors=lt,ht=Xe(pt)}else await V(s);if(u.disabled.size)for(const lt of u.disabled)je(ht,lt);if(je(e.errors,"root"),yn(e.errors)){v.state.next({errors:{}});try{await F(ht,J)}catch(lt){ut=lt}}else Y&&await Y({...e.errors},J),qe(),setTimeout(qe);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:yn(e.errors)&&!ut,submitCount:e.submitCount+1,errors:e.errors}),ut)throw ut},Xt=(F,Y={})=>{bt(s,F)&&(ke(Y.defaultValue)?$(F,Xe(bt(r,F))):($(F,Y.defaultValue),le(r,F,Xe(Y.defaultValue))),Y.keepTouched||je(e.touchedFields,F),Y.keepDirty||(je(e.dirtyFields,F),e.isDirty=Y.defaultValue?W(F,Xe(bt(r,F))):W()),Y.keepError||(je(e.errors,F),m.isValid&&A()),v.state.next({...e}))},he=(F,Y={})=>{const J=F?Xe(F):r,ut=Xe(J),ht=yn(F),lt=ht?r:ut;if(Y.keepDefaultValues||(r=J),!Y.keepValues){if(Y.keepDirtyValues){const pt=new Set([...u.mount,...Object.keys(La(r,o))]);for(const Pt of Array.from(pt))bt(e.dirtyFields,Pt)?le(lt,Pt,bt(o,Pt)):$(Pt,bt(lt,Pt))}else{if(Cm&&ke(F))for(const pt of u.mount){const Pt=bt(s,pt);if(Pt&&Pt._f){const It=Array.isArray(Pt._f.refs)?Pt._f.refs[0]:Pt._f.ref;if(Wu(It)){const Ue=It.closest("form");if(Ue){Ue.reset();break}}}}if(Y.keepFieldsRef)for(const pt of u.mount)$(pt,bt(lt,pt));else s={}}o=t.shouldUnregister?Y.keepDefaultValues?Xe(r):{}:Xe(lt),v.array.next({values:{...lt}}),v.state.next({values:{...lt}})}u={mount:Y.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!m.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues||!t.shouldUnregister&&!yn(lt),l.watch=!!t.shouldUnregister,l.keepIsValid=!!Y.keepIsValid,l.action=!1,Y.keepErrors||(e.errors={}),v.state.next({submitCount:Y.keepSubmitCount?e.submitCount:0,isDirty:ht?!1:Y.keepDirty?e.isDirty:!!(Y.keepDefaultValues&&!qi(F,r)),isSubmitted:Y.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:ht?{}:Y.keepDirtyValues?Y.keepDefaultValues&&o?La(r,o):e.dirtyFields:Y.keepDefaultValues&&F?La(r,F):Y.keepDirty?e.dirtyFields:{},touchedFields:Y.keepTouched?e.touchedFields:{},errors:Y.keepErrors?e.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},fe=(F,Y)=>he(vs(F)?F(o):F,{...t.resetOptions,...Y}),_s=(F,Y={})=>{const J=bt(s,F),ut=J&&J._f;if(ut){const ht=ut.refs?ut.refs[0]:ut.ref;ht.focus&&setTimeout(()=>{ht.focus(),Y.shouldSelect&&vs(ht.select)&&ht.select()})}},Ts=F=>{e={...e,...F}},bi={control:{register:Zt,unregister:Jt,getFieldState:X,handleSubmit:Bt,setError:ct,_subscribe:xt,_runSchema:U,_updateIsValidating:E,_focusError:qe,_getWatch:at,_getDirty:W,_setValid:A,_setFieldArray:T,_setDisabledField:jt,_setErrors:O,_getFieldArray:ot,_reset:he,_resetDefaultValues:()=>vs(t.defaultValues)&&t.defaultValues().then(F=>{fe(F,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:B,_disableForm:fn,_subjects:v,_proxyFormState:m,get _fields(){return s},get _formValues(){return o},get _state(){return l},set _state(F){l=F},get _defaultValues(){return r},get _names(){return u},set _names(F){u=F},get _formState(){return e},get _options(){return t},set _options(F){t={...t,...F}}},subscribe:St,trigger:_t,register:Zt,handleSubmit:Bt,watch:vt,setValue:$,getValues:M,reset:fe,resetField:Xt,clearErrors:nt,unregister:Jt,setError:ct,setFocus:_s,getFieldState:X};return{...bi,formControl:bi}}function Nm(n={}){const t=Vn.useRef(void 0),e=Vn.useRef(void 0),[s,r]=Vn.useState({isDirty:!1,isValidating:!1,isLoading:vs(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:vs(n.defaultValues)?void 0:n.defaultValues});if(!t.current)if(n.formControl)t.current={...n.formControl,formState:s},n.defaultValues&&!vs(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:l,...u}=Zk(n);t.current={...u,formState:s}}const o=t.current.control;return o._options=n,Lk(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>r({...o._formState}),reRenderRoot:!0});return r(u=>({...u,isReady:!0})),o._formState.isReady=!0,l},[o]),Vn.useEffect(()=>o._disableForm(n.disabled),[o,n.disabled]),Vn.useEffect(()=>{n.mode&&(o._options.mode=n.mode),n.reValidateMode&&(o._options.reValidateMode=n.reValidateMode)},[o,n.mode,n.reValidateMode]),Vn.useEffect(()=>{n.errors&&(o._setErrors(n.errors),o._focusError())},[o,n.errors]),Vn.useEffect(()=>{n.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,n.shouldUnregister]),Vn.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==s.isDirty&&o._subjects.state.next({isDirty:l})}},[o,s.isDirty]),Vn.useEffect(()=>{var l;n.values&&!qi(n.values,e.current)?(o._reset(n.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((l=o._options.resetOptions)===null||l===void 0)&&l.keepIsValid||o._setValid(),e.current=n.values,r(u=>({...u}))):o._resetDefaultValues()},[o,n.values]),Vn.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=Nk(s,o),t.current}const Lw=(n,t,e)=>{if(n&&"reportValidity"in n){const s=bt(e,t);n.setCustomValidity(s&&s.message||""),n.reportValidity()}},Zp=(n,t)=>{for(const e in t.fields){const s=t.fields[e];s&&s.ref&&"reportValidity"in s.ref?Lw(s.ref,e,n):s&&s.refs&&s.refs.forEach(r=>Lw(r,e,n))}},Pw=(n,t)=>{t.shouldUseNativeValidation&&Zp(n,t);const e={};for(const s in n){const r=bt(t.fields,s),o=Object.assign(n[s]||{},{ref:r&&r.ref});if(Kk(t.names||Object.keys(n),s)){const l=Object.assign({},bt(e,s));le(l,"root",o),le(e,s,l)}else le(e,s,o)}return e},Kk=(n,t)=>{const e=Fw(t);return n.some(s=>Fw(s).match(`^${e}\\.\\d+`))};function Fw(n){return n.replace(/\]|\[/g,"")}function rt(n,t,e){function s(u,h){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:h,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(n))return;u._zod.traits.add(n),t(u,h);const f=l.prototype,p=Object.keys(f);for(let m=0;m<p.length;m++){const b=p[m];b in u||(u[b]=f[b].bind(u))}}const r=e?.Parent??Object;class o extends r{}Object.defineProperty(o,"name",{value:n});function l(u){var h;const f=e?.Parent?new o:this;s(f,u),(h=f._zod).deferred??(h.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(l,"init",{value:s}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>e?.Parent&&u instanceof e.Parent?!0:u?._zod?.traits?.has(n)}),Object.defineProperty(l,"name",{value:n}),l}class Ia extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class pA extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const mA={};function Nr(n){return mA}function gA(n){const t=Object.values(n).filter(s=>typeof s=="number");return Object.entries(n).filter(([s,r])=>t.indexOf(+s)===-1).map(([s,r])=>r)}function Kp(n,t){return typeof t=="bigint"?t.toString():t}function Lm(n){return{get value(){{const t=n();return Object.defineProperty(this,"value",{value:t}),t}}}}function Pm(n){return n==null}function Fm(n){const t=n.startsWith("^")?1:0,e=n.endsWith("$")?n.length-1:n.length;return n.slice(t,e)}function Wk(n,t){const e=(n.toString().split(".")[1]||"").length,s=t.toString();let r=(s.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(s)){const h=s.match(/\d?e-(\d?)/);h?.[1]&&(r=Number.parseInt(h[1]))}const o=e>r?e:r,l=Number.parseInt(n.toFixed(o).replace(".","")),u=Number.parseInt(t.toFixed(o).replace(".",""));return l%u/10**o}const zw=Symbol("evaluating");function de(n,t,e){let s;Object.defineProperty(n,t,{get(){if(s!==zw)return s===void 0&&(s=zw,s=e()),s},set(r){Object.defineProperty(n,t,{value:r})},configurable:!0})}function Br(n,t,e){Object.defineProperty(n,t,{value:e,writable:!0,enumerable:!0,configurable:!0})}function Ir(...n){const t={};for(const e of n){const s=Object.getOwnPropertyDescriptors(e);Object.assign(t,s)}return Object.defineProperties({},t)}function jw(n){return JSON.stringify(n)}function Qk(n){return n.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const yA="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function Ju(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const Jk=Lm(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function Tl(n){if(Ju(n)===!1)return!1;const t=n.constructor;if(t===void 0||typeof t!="function")return!0;const e=t.prototype;return!(Ju(e)===!1||Object.prototype.hasOwnProperty.call(e,"isPrototypeOf")===!1)}function bA(n){return Tl(n)?{...n}:Array.isArray(n)?[...n]:n}const tM=new Set(["string","number","symbol"]);function xh(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Qi(n,t,e){const s=new n._zod.constr(t??n._zod.def);return(!t||e?.parent)&&(s._zod.parent=n),s}function Tt(n){const t=n;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function eM(n){return Object.keys(n).filter(t=>n[t]._zod.optin==="optional"&&n[t]._zod.optout==="optional")}const nM={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function sM(n,t){const e=n._zod.def,s=Ir(n._zod.def,{get shape(){const r={};for(const o in t){if(!(o in e.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(r[o]=e.shape[o])}return Br(this,"shape",r),r},checks:[]});return Qi(n,s)}function iM(n,t){const e=n._zod.def,s=Ir(n._zod.def,{get shape(){const r={...n._zod.def.shape};for(const o in t){if(!(o in e.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete r[o]}return Br(this,"shape",r),r},checks:[]});return Qi(n,s)}function rM(n,t){if(!Tl(t))throw new Error("Invalid input to extend: expected a plain object");const e=n._zod.def.checks;if(e&&e.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Ir(n._zod.def,{get shape(){const o={...n._zod.def.shape,...t};return Br(this,"shape",o),o},checks:[]});return Qi(n,r)}function aM(n,t){if(!Tl(t))throw new Error("Invalid input to safeExtend: expected a plain object");const e={...n._zod.def,get shape(){const s={...n._zod.def.shape,...t};return Br(this,"shape",s),s},checks:n._zod.def.checks};return Qi(n,e)}function oM(n,t){const e=Ir(n._zod.def,{get shape(){const s={...n._zod.def.shape,...t._zod.def.shape};return Br(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return Qi(n,e)}function lM(n,t,e){const s=Ir(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(e)for(const l in e){if(!(l in r))throw new Error(`Unrecognized key: "${l}"`);e[l]&&(o[l]=n?new n({type:"optional",innerType:r[l]}):r[l])}else for(const l in r)o[l]=n?new n({type:"optional",innerType:r[l]}):r[l];return Br(this,"shape",o),o},checks:[]});return Qi(t,s)}function cM(n,t,e){const s=Ir(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(e)for(const l in e){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);e[l]&&(o[l]=new n({type:"nonoptional",innerType:r[l]}))}else for(const l in r)o[l]=new n({type:"nonoptional",innerType:r[l]});return Br(this,"shape",o),o},checks:[]});return Qi(t,s)}function za(n,t=0){if(n.aborted===!0)return!0;for(let e=t;e<n.issues.length;e++)if(n.issues[e]?.continue!==!0)return!0;return!1}function vA(n,t){return t.map(e=>{var s;return(s=e).path??(s.path=[]),e.path.unshift(n),e})}function xu(n){return typeof n=="string"?n:n?.message}function Lr(n,t,e){const s={...n,path:n.path??[]};if(!n.message){const r=xu(n.inst?._zod.def?.error?.(n))??xu(t?.error?.(n))??xu(e.customError?.(n))??xu(e.localeError?.(n))??"Invalid input";s.message=r}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}function zm(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function Cl(...n){const[t,e,s]=n;return typeof t=="string"?{message:t,code:"custom",input:e,inst:s}:{...t}}const wA=(n,t)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:t,enumerable:!1}),n.message=JSON.stringify(t,Kp,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},jm=rt("$ZodError",wA),Ah=rt("$ZodError",wA,{Parent:Error});function uM(n,t=e=>e.message){const e={},s=[];for(const r of n.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(t(r))):s.push(t(r));return{formErrors:s,fieldErrors:e}}function hM(n,t=e=>e.message){const e={_errors:[]},s=r=>{for(const o of r.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>s({issues:l}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)e._errors.push(t(o));else{let l=e,u=0;for(;u<o.path.length;){const h=o.path[u];u===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(t(o))):l[h]=l[h]||{_errors:[]},l=l[h],u++}}};return s(n),e}const Eh=n=>(t,e,s,r)=>{const o=s?Object.assign(s,{async:!1}):{async:!1},l=t._zod.run({value:e,issues:[]},o);if(l instanceof Promise)throw new Ia;if(l.issues.length){const u=new(r?.Err??n)(l.issues.map(h=>Lr(h,o,Nr())));throw yA(u,r?.callee),u}return l.value},dM=Eh(Ah),_h=n=>async(t,e,s,r)=>{const o=s?Object.assign(s,{async:!0}):{async:!0};let l=t._zod.run({value:e,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(r?.Err??n)(l.issues.map(h=>Lr(h,o,Nr())));throw yA(u,r?.callee),u}return l.value},fM=_h(Ah),Th=n=>(t,e,s)=>{const r=s?{...s,async:!1}:{async:!1},o=t._zod.run({value:e,issues:[]},r);if(o instanceof Promise)throw new Ia;return o.issues.length?{success:!1,error:new(n??jm)(o.issues.map(l=>Lr(l,r,Nr())))}:{success:!0,data:o.value}},pM=Th(Ah),Ch=n=>async(t,e,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let o=t._zod.run({value:e,issues:[]},r);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new n(o.issues.map(l=>Lr(l,r,Nr())))}:{success:!0,data:o.value}},mM=Ch(Ah),gM=n=>(t,e,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Eh(n)(t,e,r)},yM=n=>(t,e,s)=>Eh(n)(t,e,s),bM=n=>async(t,e,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return _h(n)(t,e,r)},vM=n=>async(t,e,s)=>_h(n)(t,e,s),wM=n=>(t,e,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Th(n)(t,e,r)},SM=n=>(t,e,s)=>Th(n)(t,e,s),xM=n=>async(t,e,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Ch(n)(t,e,r)},AM=n=>async(t,e,s)=>Ch(n)(t,e,s),EM=/^[cC][^\s-]{8,}$/,_M=/^[0-9a-z]+$/,TM=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,CM=/^[0-9a-vA-V]{20}$/,RM=/^[A-Za-z0-9]{27}$/,OM=/^[a-zA-Z0-9_-]{21}$/,DM=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,kM=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Bw=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,MM=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,NM="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function LM(){return new RegExp(NM,"u")}const PM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,FM=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,zM=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,jM=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BM=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,SA=/^[A-Za-z0-9_-]*$/,IM=/^\+(?:[0-9]){6,14}[0-9]$/,xA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",UM=new RegExp(`^${xA}$`);function AA(n){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${t}`:n.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${n.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function HM(n){return new RegExp(`^${AA(n)}$`)}function $M(n){const t=AA({precision:n.precision}),e=["Z"];n.local&&e.push(""),n.offset&&e.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${t}(?:${e.join("|")})`;return new RegExp(`^${xA}T(?:${s})$`)}const VM=n=>{const t=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},qM=/^-?\d+$/,GM=/^-?\d+(?:\.\d+)?/,YM=/^[^A-Z]*$/,XM=/^[^a-z]*$/,Fn=rt("$ZodCheck",(n,t)=>{var e;n._zod??(n._zod={}),n._zod.def=t,(e=n._zod).onattach??(e.onattach=[])}),EA={number:"number",bigint:"bigint",object:"date"},_A=rt("$ZodCheckLessThan",(n,t)=>{Fn.init(n,t);const e=EA[typeof t.value];n._zod.onattach.push(s=>{const r=s._zod.bag,o=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),n._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:e,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:n,continue:!t.abort})}}),TA=rt("$ZodCheckGreaterThan",(n,t)=>{Fn.init(n,t);const e=EA[typeof t.value];n._zod.onattach.push(s=>{const r=s._zod.bag,o=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),n._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:e,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:n,continue:!t.abort})}}),ZM=rt("$ZodCheckMultipleOf",(n,t)=>{Fn.init(n,t),n._zod.onattach.push(e=>{var s;(s=e._zod.bag).multipleOf??(s.multipleOf=t.value)}),n._zod.check=e=>{if(typeof e.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof e.value=="bigint"?e.value%t.value===BigInt(0):Wk(e.value,t.value)===0)||e.issues.push({origin:typeof e.value,code:"not_multiple_of",divisor:t.value,input:e.value,inst:n,continue:!t.abort})}}),KM=rt("$ZodCheckNumberFormat",(n,t)=>{Fn.init(n,t),t.format=t.format||"float64";const e=t.format?.includes("int"),s=e?"int":"number",[r,o]=nM[t.format];n._zod.onattach.push(l=>{const u=l._zod.bag;u.format=t.format,u.minimum=r,u.maximum=o,e&&(u.pattern=qM)}),n._zod.check=l=>{const u=l.value;if(e){if(!Number.isInteger(u)){l.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:u,inst:n});return}if(!Number.isSafeInteger(u)){u>0?l.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:s,continue:!t.abort}):l.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:s,continue:!t.abort});return}}u<r&&l.issues.push({origin:"number",input:u,code:"too_small",minimum:r,inclusive:!0,inst:n,continue:!t.abort}),u>o&&l.issues.push({origin:"number",input:u,code:"too_big",maximum:o,inst:n})}}),WM=rt("$ZodCheckMaxLength",(n,t)=>{var e;Fn.init(n,t),(e=n._zod.def).when??(e.when=s=>{const r=s.value;return!Pm(r)&&r.length!==void 0}),n._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(s._zod.bag.maximum=t.maximum)}),n._zod.check=s=>{const r=s.value;if(r.length<=t.maximum)return;const l=zm(r);s.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:n,continue:!t.abort})}}),QM=rt("$ZodCheckMinLength",(n,t)=>{var e;Fn.init(n,t),(e=n._zod.def).when??(e.when=s=>{const r=s.value;return!Pm(r)&&r.length!==void 0}),n._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(s._zod.bag.minimum=t.minimum)}),n._zod.check=s=>{const r=s.value;if(r.length>=t.minimum)return;const l=zm(r);s.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:n,continue:!t.abort})}}),JM=rt("$ZodCheckLengthEquals",(n,t)=>{var e;Fn.init(n,t),(e=n._zod.def).when??(e.when=s=>{const r=s.value;return!Pm(r)&&r.length!==void 0}),n._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),n._zod.check=s=>{const r=s.value,o=r.length;if(o===t.length)return;const l=zm(r),u=o>t.length;s.issues.push({origin:l,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:n,continue:!t.abort})}}),Rh=rt("$ZodCheckStringFormat",(n,t)=>{var e,s;Fn.init(n,t),n._zod.onattach.push(r=>{const o=r._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(e=n._zod).check??(e.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:n,continue:!t.abort})}):(s=n._zod).check??(s.check=()=>{})}),tN=rt("$ZodCheckRegex",(n,t)=>{Rh.init(n,t),n._zod.check=e=>{t.pattern.lastIndex=0,!t.pattern.test(e.value)&&e.issues.push({origin:"string",code:"invalid_format",format:"regex",input:e.value,pattern:t.pattern.toString(),inst:n,continue:!t.abort})}}),eN=rt("$ZodCheckLowerCase",(n,t)=>{t.pattern??(t.pattern=YM),Rh.init(n,t)}),nN=rt("$ZodCheckUpperCase",(n,t)=>{t.pattern??(t.pattern=XM),Rh.init(n,t)}),sN=rt("$ZodCheckIncludes",(n,t)=>{Fn.init(n,t);const e=xh(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${e}`:e);t.pattern=s,n._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(s)}),n._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:n,continue:!t.abort})}}),iN=rt("$ZodCheckStartsWith",(n,t)=>{Fn.init(n,t);const e=new RegExp(`^${xh(t.prefix)}.*`);t.pattern??(t.pattern=e),n._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),n._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:n,continue:!t.abort})}}),rN=rt("$ZodCheckEndsWith",(n,t)=>{Fn.init(n,t);const e=new RegExp(`.*${xh(t.suffix)}$`);t.pattern??(t.pattern=e),n._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),n._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:n,continue:!t.abort})}}),aN=rt("$ZodCheckOverwrite",(n,t)=>{Fn.init(n,t),n._zod.check=e=>{e.value=t.tx(e.value)}});class oN{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(l=>l),r=Math.min(...s.map(l=>l.length-l.trimStart().length)),o=s.map(l=>l.slice(r)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const t=Function,e=this?.args,r=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...e,r.join(`
`))}}const lN={major:4,minor:2,patch:1},Ie=rt("$ZodType",(n,t)=>{var e;n??(n={}),n._zod.def=t,n._zod.bag=n._zod.bag||{},n._zod.version=lN;const s=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&s.unshift(n);for(const r of s)for(const o of r._zod.onattach)o(n);if(s.length===0)(e=n._zod).deferred??(e.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const r=(l,u,h)=>{let f=za(l),p;for(const m of u){if(m._zod.def.when){if(!m._zod.def.when(l))continue}else if(f)continue;const b=l.issues.length,v=m._zod.check(l);if(v instanceof Promise&&h?.async===!1)throw new Ia;if(p||v instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await v,l.issues.length!==b&&(f||(f=za(l,b)))});else{if(l.issues.length===b)continue;f||(f=za(l,b))}}return p?p.then(()=>l):l},o=(l,u,h)=>{if(za(l))return l.aborted=!0,l;const f=r(u,s,h);if(f instanceof Promise){if(h.async===!1)throw new Ia;return f.then(p=>n._zod.parse(p,h))}return n._zod.parse(f,h)};n._zod.run=(l,u)=>{if(u.skipChecks)return n._zod.parse(l,u);if(u.direction==="backward"){const f=n._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return f instanceof Promise?f.then(p=>o(p,l,u)):o(f,l,u)}const h=n._zod.parse(l,u);if(h instanceof Promise){if(u.async===!1)throw new Ia;return h.then(f=>r(f,s,u))}return r(h,s,u)}}n["~standard"]={validate:r=>{try{const o=pM(n,r);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return mM(n,r).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}}),Bm=rt("$ZodString",(n,t)=>{Ie.init(n,t),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??VM(n._zod.bag),n._zod.parse=(e,s)=>{if(t.coerce)try{e.value=String(e.value)}catch{}return typeof e.value=="string"||e.issues.push({expected:"string",code:"invalid_type",input:e.value,inst:n}),e}}),we=rt("$ZodStringFormat",(n,t)=>{Rh.init(n,t),Bm.init(n,t)}),cN=rt("$ZodGUID",(n,t)=>{t.pattern??(t.pattern=kM),we.init(n,t)}),uN=rt("$ZodUUID",(n,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Bw(s))}else t.pattern??(t.pattern=Bw());we.init(n,t)}),hN=rt("$ZodEmail",(n,t)=>{t.pattern??(t.pattern=MM),we.init(n,t)}),dN=rt("$ZodURL",(n,t)=>{we.init(n,t),n._zod.check=e=>{try{const s=e.value.trim(),r=new URL(s);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:e.value,inst:n,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:e.value,inst:n,continue:!t.abort})),t.normalize?e.value=r.href:e.value=s;return}catch{e.issues.push({code:"invalid_format",format:"url",input:e.value,inst:n,continue:!t.abort})}}}),fN=rt("$ZodEmoji",(n,t)=>{t.pattern??(t.pattern=LM()),we.init(n,t)}),pN=rt("$ZodNanoID",(n,t)=>{t.pattern??(t.pattern=OM),we.init(n,t)}),mN=rt("$ZodCUID",(n,t)=>{t.pattern??(t.pattern=EM),we.init(n,t)}),gN=rt("$ZodCUID2",(n,t)=>{t.pattern??(t.pattern=_M),we.init(n,t)}),yN=rt("$ZodULID",(n,t)=>{t.pattern??(t.pattern=TM),we.init(n,t)}),bN=rt("$ZodXID",(n,t)=>{t.pattern??(t.pattern=CM),we.init(n,t)}),vN=rt("$ZodKSUID",(n,t)=>{t.pattern??(t.pattern=RM),we.init(n,t)}),wN=rt("$ZodISODateTime",(n,t)=>{t.pattern??(t.pattern=$M(t)),we.init(n,t)}),SN=rt("$ZodISODate",(n,t)=>{t.pattern??(t.pattern=UM),we.init(n,t)}),xN=rt("$ZodISOTime",(n,t)=>{t.pattern??(t.pattern=HM(t)),we.init(n,t)}),AN=rt("$ZodISODuration",(n,t)=>{t.pattern??(t.pattern=DM),we.init(n,t)}),EN=rt("$ZodIPv4",(n,t)=>{t.pattern??(t.pattern=PM),we.init(n,t),n._zod.bag.format="ipv4"}),_N=rt("$ZodIPv6",(n,t)=>{t.pattern??(t.pattern=FM),we.init(n,t),n._zod.bag.format="ipv6",n._zod.check=e=>{try{new URL(`http://[${e.value}]`)}catch{e.issues.push({code:"invalid_format",format:"ipv6",input:e.value,inst:n,continue:!t.abort})}}}),TN=rt("$ZodCIDRv4",(n,t)=>{t.pattern??(t.pattern=zM),we.init(n,t)}),CN=rt("$ZodCIDRv6",(n,t)=>{t.pattern??(t.pattern=jM),we.init(n,t),n._zod.check=e=>{const s=e.value.split("/");try{if(s.length!==2)throw new Error;const[r,o]=s;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${r}]`)}catch{e.issues.push({code:"invalid_format",format:"cidrv6",input:e.value,inst:n,continue:!t.abort})}}});function CA(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const RN=rt("$ZodBase64",(n,t)=>{t.pattern??(t.pattern=BM),we.init(n,t),n._zod.bag.contentEncoding="base64",n._zod.check=e=>{CA(e.value)||e.issues.push({code:"invalid_format",format:"base64",input:e.value,inst:n,continue:!t.abort})}});function ON(n){if(!SA.test(n))return!1;const t=n.replace(/[-_]/g,s=>s==="-"?"+":"/"),e=t.padEnd(Math.ceil(t.length/4)*4,"=");return CA(e)}const DN=rt("$ZodBase64URL",(n,t)=>{t.pattern??(t.pattern=SA),we.init(n,t),n._zod.bag.contentEncoding="base64url",n._zod.check=e=>{ON(e.value)||e.issues.push({code:"invalid_format",format:"base64url",input:e.value,inst:n,continue:!t.abort})}}),kN=rt("$ZodE164",(n,t)=>{t.pattern??(t.pattern=IM),we.init(n,t)});function MN(n,t=null){try{const e=n.split(".");if(e.length!==3)return!1;const[s]=e;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const NN=rt("$ZodJWT",(n,t)=>{we.init(n,t),n._zod.check=e=>{MN(e.value,t.alg)||e.issues.push({code:"invalid_format",format:"jwt",input:e.value,inst:n,continue:!t.abort})}}),RA=rt("$ZodNumber",(n,t)=>{Ie.init(n,t),n._zod.pattern=n._zod.bag.pattern??GM,n._zod.parse=(e,s)=>{if(t.coerce)try{e.value=Number(e.value)}catch{}const r=e.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return e;const o=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return e.issues.push({expected:"number",code:"invalid_type",input:r,inst:n,...o?{received:o}:{}}),e}}),LN=rt("$ZodNumberFormat",(n,t)=>{KM.init(n,t),RA.init(n,t)}),PN=rt("$ZodUnknown",(n,t)=>{Ie.init(n,t),n._zod.parse=e=>e}),FN=rt("$ZodNever",(n,t)=>{Ie.init(n,t),n._zod.parse=(e,s)=>(e.issues.push({expected:"never",code:"invalid_type",input:e.value,inst:n}),e)});function Iw(n,t,e){n.issues.length&&t.issues.push(...vA(e,n.issues)),t.value[e]=n.value}const zN=rt("$ZodArray",(n,t)=>{Ie.init(n,t),n._zod.parse=(e,s)=>{const r=e.value;if(!Array.isArray(r))return e.issues.push({expected:"array",code:"invalid_type",input:r,inst:n}),e;e.value=Array(r.length);const o=[];for(let l=0;l<r.length;l++){const u=r[l],h=t.element._zod.run({value:u,issues:[]},s);h instanceof Promise?o.push(h.then(f=>Iw(f,e,l))):Iw(h,e,l)}return o.length?Promise.all(o).then(()=>e):e}});function th(n,t,e,s){n.issues.length&&t.issues.push(...vA(e,n.issues)),n.value===void 0?e in s&&(t.value[e]=void 0):t.value[e]=n.value}function OA(n){const t=Object.keys(n.shape);for(const s of t)if(!n.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const e=eM(n.shape);return{...n,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(e)}}function DA(n,t,e,s,r,o){const l=[],u=r.keySet,h=r.catchall._zod,f=h.def.type;for(const p in t){if(u.has(p))continue;if(f==="never"){l.push(p);continue}const m=h.run({value:t[p],issues:[]},s);m instanceof Promise?n.push(m.then(b=>th(b,e,p,t))):th(m,e,p,t)}return l.length&&e.issues.push({code:"unrecognized_keys",keys:l,input:t,inst:o}),n.length?Promise.all(n).then(()=>e):e}const jN=rt("$ZodObject",(n,t)=>{if(Ie.init(n,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const u=t.shape;Object.defineProperty(t,"shape",{get:()=>{const h={...u};return Object.defineProperty(t,"shape",{value:h}),h}})}const s=Lm(()=>OA(t));de(n._zod,"propValues",()=>{const u=t.shape,h={};for(const f in u){const p=u[f]._zod;if(p.values){h[f]??(h[f]=new Set);for(const m of p.values)h[f].add(m)}}return h});const r=Ju,o=t.catchall;let l;n._zod.parse=(u,h)=>{l??(l=s.value);const f=u.value;if(!r(f))return u.issues.push({expected:"object",code:"invalid_type",input:f,inst:n}),u;u.value={};const p=[],m=l.shape;for(const b of l.keys){const w=m[b]._zod.run({value:f[b],issues:[]},h);w instanceof Promise?p.push(w.then(S=>th(S,u,b,f))):th(w,u,b,f)}return o?DA(p,f,u,h,s.value,n):p.length?Promise.all(p).then(()=>u):u}}),BN=rt("$ZodObjectJIT",(n,t)=>{jN.init(n,t);const e=n._zod.parse,s=Lm(()=>OA(t)),r=b=>{const v=new oN(["shape","payload","ctx"]),w=s.value,S=R=>{const O=jw(R);return`shape[${O}]._zod.run({ value: input[${O}], issues: [] }, ctx)`};v.write("const input = payload.value;");const A=Object.create(null);let E=0;for(const R of w.keys)A[R]=`key_${E++}`;v.write("const newResult = {};");for(const R of w.keys){const O=A[R],D=jw(R);v.write(`const ${O} = ${S(R)};`),v.write(`
        if (${O}.issues.length) {
          payload.issues = payload.issues.concat(${O}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        
        if (${O}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${O}.value;
        }
        
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const T=v.compile();return(R,O)=>T(b,R,O)};let o;const l=Ju,u=!mA.jitless,f=u&&Jk.value,p=t.catchall;let m;n._zod.parse=(b,v)=>{m??(m=s.value);const w=b.value;return l(w)?u&&f&&v?.async===!1&&v.jitless!==!0?(o||(o=r(t.shape)),b=o(b,v),p?DA([],w,b,v,m,n):b):e(b,v):(b.issues.push({expected:"object",code:"invalid_type",input:w,inst:n}),b)}});function Uw(n,t,e,s){for(const o of n)if(o.issues.length===0)return t.value=o.value,t;const r=n.filter(o=>!za(o));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:e,errors:n.map(o=>o.issues.map(l=>Lr(l,s,Nr())))}),t)}const IN=rt("$ZodUnion",(n,t)=>{Ie.init(n,t),de(n._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),de(n._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),de(n._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),de(n._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${r.map(o=>Fm(o.source)).join("|")})$`)}});const e=t.options.length===1,s=t.options[0]._zod.run;n._zod.parse=(r,o)=>{if(e)return s(r,o);let l=!1;const u=[];for(const h of t.options){const f=h._zod.run({value:r.value,issues:[]},o);if(f instanceof Promise)u.push(f),l=!0;else{if(f.issues.length===0)return f;u.push(f)}}return l?Promise.all(u).then(h=>Uw(h,r,n,o)):Uw(u,r,n,o)}}),UN=rt("$ZodIntersection",(n,t)=>{Ie.init(n,t),n._zod.parse=(e,s)=>{const r=e.value,o=t.left._zod.run({value:r,issues:[]},s),l=t.right._zod.run({value:r,issues:[]},s);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([h,f])=>Hw(e,h,f)):Hw(e,o,l)}});function Wp(n,t){if(n===t)return{valid:!0,data:n};if(n instanceof Date&&t instanceof Date&&+n==+t)return{valid:!0,data:n};if(Tl(n)&&Tl(t)){const e=Object.keys(t),s=Object.keys(n).filter(o=>e.indexOf(o)!==-1),r={...n,...t};for(const o of s){const l=Wp(n[o],t[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};r[o]=l.data}return{valid:!0,data:r}}if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return{valid:!1,mergeErrorPath:[]};const e=[];for(let s=0;s<n.length;s++){const r=n[s],o=t[s],l=Wp(r,o);if(!l.valid)return{valid:!1,mergeErrorPath:[s,...l.mergeErrorPath]};e.push(l.data)}return{valid:!0,data:e}}return{valid:!1,mergeErrorPath:[]}}function Hw(n,t,e){if(t.issues.length&&n.issues.push(...t.issues),e.issues.length&&n.issues.push(...e.issues),za(n))return n;const s=Wp(t.value,e.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return n.value=s.data,n}const HN=rt("$ZodEnum",(n,t)=>{Ie.init(n,t);const e=gA(t.entries),s=new Set(e);n._zod.values=s,n._zod.pattern=new RegExp(`^(${e.filter(r=>tM.has(typeof r)).map(r=>typeof r=="string"?xh(r):r.toString()).join("|")})$`),n._zod.parse=(r,o)=>{const l=r.value;return s.has(l)||r.issues.push({code:"invalid_value",values:e,input:l,inst:n}),r}}),$N=rt("$ZodTransform",(n,t)=>{Ie.init(n,t),n._zod.parse=(e,s)=>{if(s.direction==="backward")throw new pA(n.constructor.name);const r=t.transform(e.value,e);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(l=>(e.value=l,e));if(r instanceof Promise)throw new Ia;return e.value=r,e}});function $w(n,t){return n.issues.length&&t===void 0?{issues:[],value:void 0}:n}const VN=rt("$ZodOptional",(n,t)=>{Ie.init(n,t),n._zod.optin="optional",n._zod.optout="optional",de(n._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),de(n._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Fm(e.source)})?$`):void 0}),n._zod.parse=(e,s)=>{if(t.innerType._zod.optin==="optional"){const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(o=>$w(o,e.value)):$w(r,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,s)}}),qN=rt("$ZodNullable",(n,t)=>{Ie.init(n,t),de(n._zod,"optin",()=>t.innerType._zod.optin),de(n._zod,"optout",()=>t.innerType._zod.optout),de(n._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Fm(e.source)}|null)$`):void 0}),de(n._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),n._zod.parse=(e,s)=>e.value===null?e:t.innerType._zod.run(e,s)}),GN=rt("$ZodDefault",(n,t)=>{Ie.init(n,t),n._zod.optin="optional",de(n._zod,"values",()=>t.innerType._zod.values),n._zod.parse=(e,s)=>{if(s.direction==="backward")return t.innerType._zod.run(e,s);if(e.value===void 0)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(o=>Vw(o,t)):Vw(r,t)}});function Vw(n,t){return n.value===void 0&&(n.value=t.defaultValue),n}const YN=rt("$ZodPrefault",(n,t)=>{Ie.init(n,t),n._zod.optin="optional",de(n._zod,"values",()=>t.innerType._zod.values),n._zod.parse=(e,s)=>(s.direction==="backward"||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,s))}),XN=rt("$ZodNonOptional",(n,t)=>{Ie.init(n,t),de(n._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(s=>s!==void 0)):void 0}),n._zod.parse=(e,s)=>{const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(o=>qw(o,n)):qw(r,n)}});function qw(n,t){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:t}),n}const ZN=rt("$ZodCatch",(n,t)=>{Ie.init(n,t),de(n._zod,"optin",()=>t.innerType._zod.optin),de(n._zod,"optout",()=>t.innerType._zod.optout),de(n._zod,"values",()=>t.innerType._zod.values),n._zod.parse=(e,s)=>{if(s.direction==="backward")return t.innerType._zod.run(e,s);const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(o=>(e.value=o.value,o.issues.length&&(e.value=t.catchValue({...e,error:{issues:o.issues.map(l=>Lr(l,s,Nr()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(o=>Lr(o,s,Nr()))},input:e.value}),e.issues=[]),e)}}),KN=rt("$ZodPipe",(n,t)=>{Ie.init(n,t),de(n._zod,"values",()=>t.in._zod.values),de(n._zod,"optin",()=>t.in._zod.optin),de(n._zod,"optout",()=>t.out._zod.optout),de(n._zod,"propValues",()=>t.in._zod.propValues),n._zod.parse=(e,s)=>{if(s.direction==="backward"){const o=t.out._zod.run(e,s);return o instanceof Promise?o.then(l=>Au(l,t.in,s)):Au(o,t.in,s)}const r=t.in._zod.run(e,s);return r instanceof Promise?r.then(o=>Au(o,t.out,s)):Au(r,t.out,s)}});function Au(n,t,e){return n.issues.length?(n.aborted=!0,n):t._zod.run({value:n.value,issues:n.issues},e)}const WN=rt("$ZodReadonly",(n,t)=>{Ie.init(n,t),de(n._zod,"propValues",()=>t.innerType._zod.propValues),de(n._zod,"values",()=>t.innerType._zod.values),de(n._zod,"optin",()=>t.innerType?._zod?.optin),de(n._zod,"optout",()=>t.innerType?._zod?.optout),n._zod.parse=(e,s)=>{if(s.direction==="backward")return t.innerType._zod.run(e,s);const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(Gw):Gw(r)}});function Gw(n){return n.value=Object.freeze(n.value),n}const QN=rt("$ZodCustom",(n,t)=>{Fn.init(n,t),Ie.init(n,t),n._zod.parse=(e,s)=>e,n._zod.check=e=>{const s=e.value,r=t.fn(s);if(r instanceof Promise)return r.then(o=>Yw(o,e,s,n));Yw(r,e,s,n)}});function Yw(n,t,e,s){if(!n){const r={code:"custom",input:e,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),t.issues.push(Cl(r))}}var Xw;class JN{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...e){const s=e[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const e=this._map.get(t);return e&&typeof e=="object"&&"id"in e&&this._idmap.delete(e.id),this._map.delete(t),this}get(t){const e=t._zod.parent;if(e){const s={...this.get(e)??{}};delete s.id;const r={...s,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function t2(){return new JN}(Xw=globalThis).__zod_globalRegistry??(Xw.__zod_globalRegistry=t2());const fl=globalThis.__zod_globalRegistry;function e2(n,t){return new n({type:"string",...Tt(t)})}function n2(n,t){return new n({type:"string",format:"email",check:"string_format",abort:!1,...Tt(t)})}function Zw(n,t){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...Tt(t)})}function s2(n,t){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...Tt(t)})}function i2(n,t){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Tt(t)})}function r2(n,t){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Tt(t)})}function a2(n,t){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Tt(t)})}function o2(n,t){return new n({type:"string",format:"url",check:"string_format",abort:!1,...Tt(t)})}function l2(n,t){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...Tt(t)})}function c2(n,t){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...Tt(t)})}function u2(n,t){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...Tt(t)})}function h2(n,t){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...Tt(t)})}function d2(n,t){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...Tt(t)})}function f2(n,t){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...Tt(t)})}function p2(n,t){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...Tt(t)})}function m2(n,t){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...Tt(t)})}function g2(n,t){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...Tt(t)})}function y2(n,t){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Tt(t)})}function b2(n,t){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Tt(t)})}function v2(n,t){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...Tt(t)})}function w2(n,t){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...Tt(t)})}function S2(n,t){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...Tt(t)})}function x2(n,t){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...Tt(t)})}function A2(n,t){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Tt(t)})}function E2(n,t){return new n({type:"string",format:"date",check:"string_format",...Tt(t)})}function _2(n,t){return new n({type:"string",format:"time",check:"string_format",precision:null,...Tt(t)})}function T2(n,t){return new n({type:"string",format:"duration",check:"string_format",...Tt(t)})}function C2(n,t){return new n({type:"number",checks:[],...Tt(t)})}function R2(n,t){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...Tt(t)})}function O2(n){return new n({type:"unknown"})}function D2(n,t){return new n({type:"never",...Tt(t)})}function Kw(n,t){return new _A({check:"less_than",...Tt(t),value:n,inclusive:!1})}function yp(n,t){return new _A({check:"less_than",...Tt(t),value:n,inclusive:!0})}function Ww(n,t){return new TA({check:"greater_than",...Tt(t),value:n,inclusive:!1})}function bp(n,t){return new TA({check:"greater_than",...Tt(t),value:n,inclusive:!0})}function Qw(n,t){return new ZM({check:"multiple_of",...Tt(t),value:n})}function kA(n,t){return new WM({check:"max_length",...Tt(t),maximum:n})}function eh(n,t){return new QM({check:"min_length",...Tt(t),minimum:n})}function MA(n,t){return new JM({check:"length_equals",...Tt(t),length:n})}function k2(n,t){return new tN({check:"string_format",format:"regex",...Tt(t),pattern:n})}function M2(n){return new eN({check:"string_format",format:"lowercase",...Tt(n)})}function N2(n){return new nN({check:"string_format",format:"uppercase",...Tt(n)})}function L2(n,t){return new sN({check:"string_format",format:"includes",...Tt(t),includes:n})}function P2(n,t){return new iN({check:"string_format",format:"starts_with",...Tt(t),prefix:n})}function F2(n,t){return new rN({check:"string_format",format:"ends_with",...Tt(t),suffix:n})}function ro(n){return new aN({check:"overwrite",tx:n})}function z2(n){return ro(t=>t.normalize(n))}function j2(){return ro(n=>n.trim())}function B2(){return ro(n=>n.toLowerCase())}function I2(){return ro(n=>n.toUpperCase())}function U2(){return ro(n=>Qk(n))}function H2(n,t,e){return new n({type:"array",element:t,...Tt(e)})}function $2(n,t,e){return new n({type:"custom",check:"custom",fn:t,...Tt(e)})}function V2(n){const t=q2(e=>(e.addIssue=s=>{if(typeof s=="string")e.issues.push(Cl(s,e.value,t._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=e.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),e.issues.push(Cl(r))}},n(e.value,e)));return t}function q2(n,t){const e=new Fn({check:"custom",...Tt(t)});return e._zod.check=n,e}function NA(n){let t=n?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:n.processors??{},metadataRegistry:n?.metadata??fl,target:t,unrepresentable:n?.unrepresentable??"throw",override:n?.override??(()=>{}),io:n?.io??"output",counter:0,seen:new Map,cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0}}function ln(n,t,e={path:[],schemaPath:[]}){var s;const r=n._zod.def,o=t.seen.get(n);if(o)return o.count++,e.schemaPath.includes(n)&&(o.cycle=e.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:e.path};t.seen.set(n,l);const u=n._zod.toJSONSchema?.();if(u)l.schema=u;else{const p={...e,schemaPath:[...e.schemaPath,n],path:e.path},m=n._zod.parent;if(m)l.ref=m,ln(m,t,p),t.seen.get(m).isParent=!0;else if(n._zod.processJSONSchema)n._zod.processJSONSchema(t,l.schema,p);else{const b=l.schema,v=t.processors[r.type];if(!v)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);v(n,t,b,p)}}const h=t.metadataRegistry.get(n);return h&&Object.assign(l.schema,h),t.io==="input"&&gn(n)&&(delete l.schema.examples,delete l.schema.default),t.io==="input"&&l.schema._prefault&&((s=l.schema).default??(s.default=l.schema._prefault)),delete l.schema._prefault,t.seen.get(n).schema}function LA(n,t){const e=n.seen.get(t);if(!e)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=o=>{const l=n.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const p=n.external.registry.get(o[0])?.id,m=n.external.uri??(v=>v);if(p)return{ref:m(p)};const b=o[1].defId??o[1].schema.id??`schema${n.counter++}`;return o[1].defId=b,{defId:b,ref:`${m("__shared")}#/${l}/${b}`}}if(o[1]===e)return{ref:"#"};const h=`#/${l}/`,f=o[1].schema.id??`__schema${n.counter++}`;return{defId:f,ref:h+f}},r=o=>{if(o[1].schema.$ref)return;const l=o[1],{ref:u,defId:h}=s(o);l.def={...l.schema},h&&(l.defId=h);const f=l.schema;for(const p in f)delete f[p];f.$ref=u};if(n.cycles==="throw")for(const o of n.seen.entries()){const l=o[1];if(l.cycle)throw new Error(`Cycle detected: #/${l.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const o of n.seen.entries()){const l=o[1];if(t===o[0]){r(o);continue}if(n.external){const h=n.external.registry.get(o[0])?.id;if(t!==o[0]&&h){r(o);continue}}if(n.metadataRegistry.get(o[0])?.id){r(o);continue}if(l.cycle){r(o);continue}if(l.count>1&&n.reused==="ref"){r(o);continue}}}function PA(n,t){const e=n.seen.get(t);if(!e)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=l=>{const u=n.seen.get(l),h=u.def??u.schema,f={...h};if(u.ref===null)return;const p=u.ref;if(u.ref=null,p){s(p);const m=n.seen.get(p).schema;m.$ref&&(n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0")?(h.allOf=h.allOf??[],h.allOf.push(m)):(Object.assign(h,m),Object.assign(h,f))}u.isParent||n.override({zodSchema:l,jsonSchema:h,path:u.path??[]})};for(const l of[...n.seen.entries()].reverse())s(l[0]);const r={};if(n.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":n.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":n.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":n.target,n.external?.uri){const l=n.external.registry.get(t)?.id;if(!l)throw new Error("Schema is missing an `id` property");r.$id=n.external.uri(l)}Object.assign(r,e.def??e.schema);const o=n.external?.defs??{};for(const l of n.seen.entries()){const u=l[1];u.def&&u.defId&&(o[u.defId]=u.def)}n.external||Object.keys(o).length>0&&(n.target==="draft-2020-12"?r.$defs=o:r.definitions=o);try{const l=JSON.parse(JSON.stringify(r));return Object.defineProperty(l,"~standard",{value:{...t["~standard"],jsonSchema:{input:nh(t,"input"),output:nh(t,"output")}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function gn(n,t){const e=t??{seen:new Set};if(e.seen.has(n))return!1;e.seen.add(n);const s=n._zod.def;if(s.type==="transform")return!0;if(s.type==="array")return gn(s.element,e);if(s.type==="set")return gn(s.valueType,e);if(s.type==="lazy")return gn(s.getter(),e);if(s.type==="promise"||s.type==="optional"||s.type==="nonoptional"||s.type==="nullable"||s.type==="readonly"||s.type==="default"||s.type==="prefault")return gn(s.innerType,e);if(s.type==="intersection")return gn(s.left,e)||gn(s.right,e);if(s.type==="record"||s.type==="map")return gn(s.keyType,e)||gn(s.valueType,e);if(s.type==="pipe")return gn(s.in,e)||gn(s.out,e);if(s.type==="object"){for(const r in s.shape)if(gn(s.shape[r],e))return!0;return!1}if(s.type==="union"){for(const r of s.options)if(gn(r,e))return!0;return!1}if(s.type==="tuple"){for(const r of s.items)if(gn(r,e))return!0;return!!(s.rest&&gn(s.rest,e))}return!1}const G2=(n,t={})=>e=>{const s=NA({...e,processors:t});return ln(n,s),LA(s,n),PA(s,n)},nh=(n,t)=>e=>{const{libraryOptions:s,target:r}=e??{},o=NA({...s??{},target:r,io:t,processors:{}});return ln(n,o),LA(o,n),PA(o,n)},Y2={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},X2=(n,t,e,s)=>{const r=e;r.type="string";const{minimum:o,maximum:l,format:u,patterns:h,contentEncoding:f}=n._zod.bag;if(typeof o=="number"&&(r.minLength=o),typeof l=="number"&&(r.maxLength=l),u&&(r.format=Y2[u]??u,r.format===""&&delete r.format),f&&(r.contentEncoding=f),h&&h.size>0){const p=[...h];p.length===1?r.pattern=p[0].source:p.length>1&&(r.allOf=[...p.map(m=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:m.source}))])}},Z2=(n,t,e,s)=>{const r=e,{minimum:o,maximum:l,format:u,multipleOf:h,exclusiveMaximum:f,exclusiveMinimum:p}=n._zod.bag;typeof u=="string"&&u.includes("int")?r.type="integer":r.type="number",typeof p=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.minimum=p,r.exclusiveMinimum=!0):r.exclusiveMinimum=p),typeof o=="number"&&(r.minimum=o,typeof p=="number"&&t.target!=="draft-04"&&(p>=o?delete r.minimum:delete r.exclusiveMinimum)),typeof f=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.maximum=f,r.exclusiveMaximum=!0):r.exclusiveMaximum=f),typeof l=="number"&&(r.maximum=l,typeof f=="number"&&t.target!=="draft-04"&&(f<=l?delete r.maximum:delete r.exclusiveMaximum)),typeof h=="number"&&(r.multipleOf=h)},K2=(n,t,e,s)=>{e.not={}},W2=(n,t,e,s)=>{},Q2=(n,t,e,s)=>{const r=n._zod.def,o=gA(r.entries);o.every(l=>typeof l=="number")&&(e.type="number"),o.every(l=>typeof l=="string")&&(e.type="string"),e.enum=o},J2=(n,t,e,s)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},tL=(n,t,e,s)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},eL=(n,t,e,s)=>{const r=e,o=n._zod.def,{minimum:l,maximum:u}=n._zod.bag;typeof l=="number"&&(r.minItems=l),typeof u=="number"&&(r.maxItems=u),r.type="array",r.items=ln(o.element,t,{...s,path:[...s.path,"items"]})},nL=(n,t,e,s)=>{const r=e,o=n._zod.def;r.type="object",r.properties={};const l=o.shape;for(const f in l)r.properties[f]=ln(l[f],t,{...s,path:[...s.path,"properties",f]});const u=new Set(Object.keys(l)),h=new Set([...u].filter(f=>{const p=o.shape[f]._zod;return t.io==="input"?p.optin===void 0:p.optout===void 0}));h.size>0&&(r.required=Array.from(h)),o.catchall?._zod.def.type==="never"?r.additionalProperties=!1:o.catchall?o.catchall&&(r.additionalProperties=ln(o.catchall,t,{...s,path:[...s.path,"additionalProperties"]})):t.io==="output"&&(r.additionalProperties=!1)},sL=(n,t,e,s)=>{const r=n._zod.def,o=r.inclusive===!1,l=r.options.map((u,h)=>ln(u,t,{...s,path:[...s.path,o?"oneOf":"anyOf",h]}));o?e.oneOf=l:e.anyOf=l},iL=(n,t,e,s)=>{const r=n._zod.def,o=ln(r.left,t,{...s,path:[...s.path,"allOf",0]}),l=ln(r.right,t,{...s,path:[...s.path,"allOf",1]}),u=f=>"allOf"in f&&Object.keys(f).length===1,h=[...u(o)?o.allOf:[o],...u(l)?l.allOf:[l]];e.allOf=h},rL=(n,t,e,s)=>{const r=n._zod.def,o=ln(r.innerType,t,s),l=t.seen.get(n);t.target==="openapi-3.0"?(l.ref=r.innerType,e.nullable=!0):e.anyOf=[o,{type:"null"}]},aL=(n,t,e,s)=>{const r=n._zod.def;ln(r.innerType,t,s);const o=t.seen.get(n);o.ref=r.innerType},oL=(n,t,e,s)=>{const r=n._zod.def;ln(r.innerType,t,s);const o=t.seen.get(n);o.ref=r.innerType,e.default=JSON.parse(JSON.stringify(r.defaultValue))},lL=(n,t,e,s)=>{const r=n._zod.def;ln(r.innerType,t,s);const o=t.seen.get(n);o.ref=r.innerType,t.io==="input"&&(e._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},cL=(n,t,e,s)=>{const r=n._zod.def;ln(r.innerType,t,s);const o=t.seen.get(n);o.ref=r.innerType;let l;try{l=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}e.default=l},uL=(n,t,e,s)=>{const r=n._zod.def,o=t.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;ln(o,t,s);const l=t.seen.get(n);l.ref=o},hL=(n,t,e,s)=>{const r=n._zod.def;ln(r.innerType,t,s);const o=t.seen.get(n);o.ref=r.innerType,e.readOnly=!0},dL=(n,t,e,s)=>{const r=n._zod.def;ln(r.innerType,t,s);const o=t.seen.get(n);o.ref=r.innerType};function Jw(n,t){try{var e=n()}catch(s){return t(s)}return e&&e.then?e.then(void 0,t):e}function fL(n,t){for(var e={};n.length;){var s=n[0],r=s.code,o=s.message,l=s.path.join(".");if(!e[l])if("unionErrors"in s){var u=s.unionErrors[0].errors[0];e[l]={message:u.message,type:u.code}}else e[l]={message:o,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(p){return p.errors.forEach(function(m){return n.push(m)})}),t){var h=e[l].types,f=h&&h[s.code];e[l]=Dm(l,t,e,r,f?[].concat(f,s.message):s.message)}n.shift()}return e}function pL(n,t){for(var e={};n.length;){var s=n[0],r=s.code,o=s.message,l=s.path.join(".");if(!e[l])if(s.code==="invalid_union"&&s.errors.length>0){var u=s.errors[0][0];e[l]={message:u.message,type:u.code}}else e[l]={message:o,type:r};if(s.code==="invalid_union"&&s.errors.forEach(function(p){return p.forEach(function(m){return n.push(m)})}),t){var h=e[l].types,f=h&&h[s.code];e[l]=Dm(l,t,e,r,f?[].concat(f,s.message):s.message)}n.shift()}return e}function Im(n,t,e){if(e===void 0&&(e={}),(function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def})(n))return function(s,r,o){try{return Promise.resolve(Jw(function(){return Promise.resolve(n[e.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(l){return o.shouldUseNativeValidation&&Zp({},o),{errors:{},values:e.raw?Object.assign({},s):l}})},function(l){if((function(u){return Array.isArray(u?.issues)})(l))return{values:{},errors:Pw(fL(l.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw l}))}catch(l){return Promise.reject(l)}};if((function(s){return"_zod"in s&&typeof s._zod=="object"})(n))return function(s,r,o){try{return Promise.resolve(Jw(function(){return Promise.resolve((e.mode==="sync"?dM:fM)(n,s,t)).then(function(l){return o.shouldUseNativeValidation&&Zp({},o),{errors:{},values:e.raw?Object.assign({},s):l}})},function(l){if((function(u){return u instanceof jm})(l))return{values:{},errors:Pw(pL(l.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}const mL=rt("ZodISODateTime",(n,t)=>{wN.init(n,t),Ee.init(n,t)});function gL(n){return A2(mL,n)}const yL=rt("ZodISODate",(n,t)=>{SN.init(n,t),Ee.init(n,t)});function bL(n){return E2(yL,n)}const vL=rt("ZodISOTime",(n,t)=>{xN.init(n,t),Ee.init(n,t)});function wL(n){return _2(vL,n)}const SL=rt("ZodISODuration",(n,t)=>{AN.init(n,t),Ee.init(n,t)});function xL(n){return T2(SL,n)}const AL=(n,t)=>{jm.init(n,t),n.name="ZodError",Object.defineProperties(n,{format:{value:e=>hM(n,e)},flatten:{value:e=>uM(n,e)},addIssue:{value:e=>{n.issues.push(e),n.message=JSON.stringify(n.issues,Kp,2)}},addIssues:{value:e=>{n.issues.push(...e),n.message=JSON.stringify(n.issues,Kp,2)}},isEmpty:{get(){return n.issues.length===0}}})},ps=rt("ZodError",AL,{Parent:Error}),EL=Eh(ps),_L=_h(ps),TL=Th(ps),CL=Ch(ps),RL=gM(ps),OL=yM(ps),DL=bM(ps),kL=vM(ps),ML=wM(ps),NL=SM(ps),LL=xM(ps),PL=AM(ps),Ve=rt("ZodType",(n,t)=>(Ie.init(n,t),Object.assign(n["~standard"],{jsonSchema:{input:nh(n,"input"),output:nh(n,"output")}}),n.toJSONSchema=G2(n,{}),n.def=t,n.type=t.type,Object.defineProperty(n,"_def",{value:t}),n.check=(...e)=>n.clone(Ir(t,{checks:[...t.checks??[],...e.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),n.clone=(e,s)=>Qi(n,e,s),n.brand=()=>n,n.register=((e,s)=>(e.add(n,s),n)),n.parse=(e,s)=>EL(n,e,s,{callee:n.parse}),n.safeParse=(e,s)=>TL(n,e,s),n.parseAsync=async(e,s)=>_L(n,e,s,{callee:n.parseAsync}),n.safeParseAsync=async(e,s)=>CL(n,e,s),n.spa=n.safeParseAsync,n.encode=(e,s)=>RL(n,e,s),n.decode=(e,s)=>OL(n,e,s),n.encodeAsync=async(e,s)=>DL(n,e,s),n.decodeAsync=async(e,s)=>kL(n,e,s),n.safeEncode=(e,s)=>ML(n,e,s),n.safeDecode=(e,s)=>NL(n,e,s),n.safeEncodeAsync=async(e,s)=>LL(n,e,s),n.safeDecodeAsync=async(e,s)=>PL(n,e,s),n.refine=(e,s)=>n.check(_P(e,s)),n.superRefine=e=>n.check(TP(e)),n.overwrite=e=>n.check(ro(e)),n.optional=()=>sS(n),n.nullable=()=>iS(n),n.nullish=()=>sS(iS(n)),n.nonoptional=e=>bP(n,e),n.array=()=>rP(n),n.or=e=>lP([n,e]),n.and=e=>uP(n,e),n.transform=e=>rS(n,dP(e)),n.default=e=>mP(n,e),n.prefault=e=>yP(n,e),n.catch=e=>wP(n,e),n.pipe=e=>rS(n,e),n.readonly=()=>AP(n),n.describe=e=>{const s=n.clone();return fl.add(s,{description:e}),s},Object.defineProperty(n,"description",{get(){return fl.get(n)?.description},configurable:!0}),n.meta=(...e)=>{if(e.length===0)return fl.get(n);const s=n.clone();return fl.add(s,e[0]),s},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),FA=rt("_ZodString",(n,t)=>{Bm.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(s,r,o)=>X2(n,s,r);const e=n._zod.bag;n.format=e.format??null,n.minLength=e.minimum??null,n.maxLength=e.maximum??null,n.regex=(...s)=>n.check(k2(...s)),n.includes=(...s)=>n.check(L2(...s)),n.startsWith=(...s)=>n.check(P2(...s)),n.endsWith=(...s)=>n.check(F2(...s)),n.min=(...s)=>n.check(eh(...s)),n.max=(...s)=>n.check(kA(...s)),n.length=(...s)=>n.check(MA(...s)),n.nonempty=(...s)=>n.check(eh(1,...s)),n.lowercase=s=>n.check(M2(s)),n.uppercase=s=>n.check(N2(s)),n.trim=()=>n.check(j2()),n.normalize=(...s)=>n.check(z2(...s)),n.toLowerCase=()=>n.check(B2()),n.toUpperCase=()=>n.check(I2()),n.slugify=()=>n.check(U2())}),FL=rt("ZodString",(n,t)=>{Bm.init(n,t),FA.init(n,t),n.email=e=>n.check(n2(zL,e)),n.url=e=>n.check(o2(jL,e)),n.jwt=e=>n.check(x2(JL,e)),n.emoji=e=>n.check(l2(BL,e)),n.guid=e=>n.check(Zw(tS,e)),n.uuid=e=>n.check(s2(Eu,e)),n.uuidv4=e=>n.check(i2(Eu,e)),n.uuidv6=e=>n.check(r2(Eu,e)),n.uuidv7=e=>n.check(a2(Eu,e)),n.nanoid=e=>n.check(c2(IL,e)),n.guid=e=>n.check(Zw(tS,e)),n.cuid=e=>n.check(u2(UL,e)),n.cuid2=e=>n.check(h2(HL,e)),n.ulid=e=>n.check(d2($L,e)),n.base64=e=>n.check(v2(KL,e)),n.base64url=e=>n.check(w2(WL,e)),n.xid=e=>n.check(f2(VL,e)),n.ksuid=e=>n.check(p2(qL,e)),n.ipv4=e=>n.check(m2(GL,e)),n.ipv6=e=>n.check(g2(YL,e)),n.cidrv4=e=>n.check(y2(XL,e)),n.cidrv6=e=>n.check(b2(ZL,e)),n.e164=e=>n.check(S2(QL,e)),n.datetime=e=>n.check(gL(e)),n.date=e=>n.check(bL(e)),n.time=e=>n.check(wL(e)),n.duration=e=>n.check(xL(e))});function We(n){return e2(FL,n)}const Ee=rt("ZodStringFormat",(n,t)=>{we.init(n,t),FA.init(n,t)}),zL=rt("ZodEmail",(n,t)=>{hN.init(n,t),Ee.init(n,t)}),tS=rt("ZodGUID",(n,t)=>{cN.init(n,t),Ee.init(n,t)}),Eu=rt("ZodUUID",(n,t)=>{uN.init(n,t),Ee.init(n,t)}),jL=rt("ZodURL",(n,t)=>{dN.init(n,t),Ee.init(n,t)}),BL=rt("ZodEmoji",(n,t)=>{fN.init(n,t),Ee.init(n,t)}),IL=rt("ZodNanoID",(n,t)=>{pN.init(n,t),Ee.init(n,t)}),UL=rt("ZodCUID",(n,t)=>{mN.init(n,t),Ee.init(n,t)}),HL=rt("ZodCUID2",(n,t)=>{gN.init(n,t),Ee.init(n,t)}),$L=rt("ZodULID",(n,t)=>{yN.init(n,t),Ee.init(n,t)}),VL=rt("ZodXID",(n,t)=>{bN.init(n,t),Ee.init(n,t)}),qL=rt("ZodKSUID",(n,t)=>{vN.init(n,t),Ee.init(n,t)}),GL=rt("ZodIPv4",(n,t)=>{EN.init(n,t),Ee.init(n,t)}),YL=rt("ZodIPv6",(n,t)=>{_N.init(n,t),Ee.init(n,t)}),XL=rt("ZodCIDRv4",(n,t)=>{TN.init(n,t),Ee.init(n,t)}),ZL=rt("ZodCIDRv6",(n,t)=>{CN.init(n,t),Ee.init(n,t)}),KL=rt("ZodBase64",(n,t)=>{RN.init(n,t),Ee.init(n,t)}),WL=rt("ZodBase64URL",(n,t)=>{DN.init(n,t),Ee.init(n,t)}),QL=rt("ZodE164",(n,t)=>{kN.init(n,t),Ee.init(n,t)}),JL=rt("ZodJWT",(n,t)=>{NN.init(n,t),Ee.init(n,t)}),zA=rt("ZodNumber",(n,t)=>{RA.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(s,r,o)=>Z2(n,s,r),n.gt=(s,r)=>n.check(Ww(s,r)),n.gte=(s,r)=>n.check(bp(s,r)),n.min=(s,r)=>n.check(bp(s,r)),n.lt=(s,r)=>n.check(Kw(s,r)),n.lte=(s,r)=>n.check(yp(s,r)),n.max=(s,r)=>n.check(yp(s,r)),n.int=s=>n.check(eS(s)),n.safe=s=>n.check(eS(s)),n.positive=s=>n.check(Ww(0,s)),n.nonnegative=s=>n.check(bp(0,s)),n.negative=s=>n.check(Kw(0,s)),n.nonpositive=s=>n.check(yp(0,s)),n.multipleOf=(s,r)=>n.check(Qw(s,r)),n.step=(s,r)=>n.check(Qw(s,r)),n.finite=()=>n;const e=n._zod.bag;n.minValue=Math.max(e.minimum??Number.NEGATIVE_INFINITY,e.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(e.maximum??Number.POSITIVE_INFINITY,e.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(e.format??"").includes("int")||Number.isSafeInteger(e.multipleOf??.5),n.isFinite=!0,n.format=e.format??null});function Ua(n){return C2(zA,n)}const tP=rt("ZodNumberFormat",(n,t)=>{LN.init(n,t),zA.init(n,t)});function eS(n){return R2(tP,n)}const eP=rt("ZodUnknown",(n,t)=>{PN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>W2()});function nS(){return O2(eP)}const nP=rt("ZodNever",(n,t)=>{FN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>K2(n,e,s)});function sP(n){return D2(nP,n)}const iP=rt("ZodArray",(n,t)=>{zN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>eL(n,e,s,r),n.element=t.element,n.min=(e,s)=>n.check(eh(e,s)),n.nonempty=e=>n.check(eh(1,e)),n.max=(e,s)=>n.check(kA(e,s)),n.length=(e,s)=>n.check(MA(e,s)),n.unwrap=()=>n.element});function rP(n,t){return H2(iP,n,t)}const aP=rt("ZodObject",(n,t)=>{BN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>nL(n,e,s,r),de(n,"shape",()=>t.shape),n.keyof=()=>Um(Object.keys(n._zod.def.shape)),n.catchall=e=>n.clone({...n._zod.def,catchall:e}),n.passthrough=()=>n.clone({...n._zod.def,catchall:nS()}),n.loose=()=>n.clone({...n._zod.def,catchall:nS()}),n.strict=()=>n.clone({...n._zod.def,catchall:sP()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=e=>rM(n,e),n.safeExtend=e=>aM(n,e),n.merge=e=>oM(n,e),n.pick=e=>sM(n,e),n.omit=e=>iM(n,e),n.partial=(...e)=>lM(jA,n,e[0]),n.required=(...e)=>cM(BA,n,e[0])});function Vl(n,t){const e={type:"object",shape:n??{},...Tt(t)};return new aP(e)}const oP=rt("ZodUnion",(n,t)=>{IN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>sL(n,e,s,r),n.options=t.options});function lP(n,t){return new oP({type:"union",options:n,...Tt(t)})}const cP=rt("ZodIntersection",(n,t)=>{UN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>iL(n,e,s,r)});function uP(n,t){return new cP({type:"intersection",left:n,right:t})}const Qp=rt("ZodEnum",(n,t)=>{HN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(s,r,o)=>Q2(n,s,r),n.enum=t.entries,n.options=Object.values(t.entries);const e=new Set(Object.keys(t.entries));n.extract=(s,r)=>{const o={};for(const l of s)if(e.has(l))o[l]=t.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Qp({...t,checks:[],...Tt(r),entries:o})},n.exclude=(s,r)=>{const o={...t.entries};for(const l of s)if(e.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new Qp({...t,checks:[],...Tt(r),entries:o})}});function Um(n,t){const e=Array.isArray(n)?Object.fromEntries(n.map(s=>[s,s])):n;return new Qp({type:"enum",entries:e,...Tt(t)})}const hP=rt("ZodTransform",(n,t)=>{$N.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>tL(n,e),n._zod.parse=(e,s)=>{if(s.direction==="backward")throw new pA(n.constructor.name);e.addIssue=o=>{if(typeof o=="string")e.issues.push(Cl(o,e.value,t));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=e.value),l.inst??(l.inst=n),e.issues.push(Cl(l))}};const r=t.transform(e.value,e);return r instanceof Promise?r.then(o=>(e.value=o,e)):(e.value=r,e)}});function dP(n){return new hP({type:"transform",transform:n})}const jA=rt("ZodOptional",(n,t)=>{VN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>dL(n,e,s,r),n.unwrap=()=>n._zod.def.innerType});function sS(n){return new jA({type:"optional",innerType:n})}const fP=rt("ZodNullable",(n,t)=>{qN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>rL(n,e,s,r),n.unwrap=()=>n._zod.def.innerType});function iS(n){return new fP({type:"nullable",innerType:n})}const pP=rt("ZodDefault",(n,t)=>{GN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>oL(n,e,s,r),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function mP(n,t){return new pP({type:"default",innerType:n,get defaultValue(){return typeof t=="function"?t():bA(t)}})}const gP=rt("ZodPrefault",(n,t)=>{YN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>lL(n,e,s,r),n.unwrap=()=>n._zod.def.innerType});function yP(n,t){return new gP({type:"prefault",innerType:n,get defaultValue(){return typeof t=="function"?t():bA(t)}})}const BA=rt("ZodNonOptional",(n,t)=>{XN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>aL(n,e,s,r),n.unwrap=()=>n._zod.def.innerType});function bP(n,t){return new BA({type:"nonoptional",innerType:n,...Tt(t)})}const vP=rt("ZodCatch",(n,t)=>{ZN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>cL(n,e,s,r),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function wP(n,t){return new vP({type:"catch",innerType:n,catchValue:typeof t=="function"?t:()=>t})}const SP=rt("ZodPipe",(n,t)=>{KN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>uL(n,e,s,r),n.in=t.in,n.out=t.out});function rS(n,t){return new SP({type:"pipe",in:n,out:t})}const xP=rt("ZodReadonly",(n,t)=>{WN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>hL(n,e,s,r),n.unwrap=()=>n._zod.def.innerType});function AP(n){return new xP({type:"readonly",innerType:n})}const EP=rt("ZodCustom",(n,t)=>{QN.init(n,t),Ve.init(n,t),n._zod.processJSONSchema=(e,s,r)=>J2(n,e)});function _P(n,t={}){return $2(EP,n,t)}function TP(n){return V2(n)}const CP=Vl({email:We().min(1,"Email is required").email("Invalid email address"),password:We().min(1,"Password is required")}),RP=Vl({email:We().min(1,"Email is required").email("Invalid email address"),password:We().min(8,"Password must be at least 8 characters").regex(/[A-Za-z]/,"Password must contain at least one letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:We().min(1,"Please confirm your password")}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});Vl({businessName:We().min(1,"Business name is required").max(200,"Business name is too long"),transactionDate:We().min(1,"Transaction date is required"),amountBeforeVat:Ua({invalid_type_error:"Amount must be a number"}).min(0,"Amount must be positive"),amountAfterVat:Ua({invalid_type_error:"Amount must be a number"}).min(0,"Amount must be positive"),vatAmount:Ua({invalid_type_error:"VAT must be a number"}).min(0,"VAT must be positive"),businessId:We().optional(),invoiceNumber:We().optional(),serviceDescription:We().optional(),category:Um(["FOOD","VEHICLE","IT","OPERATIONS","TRAINING","OTHER"])});Vl({category:We().optional(),minAmount:Ua().optional(),maxAmount:Ua().optional(),startDate:We().optional(),endDate:We().optional(),businessName:We().optional()});const wn=k.forwardRef(({label:n,type:t="text",placeholder:e="",error:s="",icon:r=null,required:o=!1,className:l="",...u},h)=>_.jsxs("div",{className:"space-y-1.5 w-full",children:[n&&_.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[n,o&&_.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),_.jsxs("div",{className:"relative",children:[r&&_.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx("span",{className:"material-symbols-outlined text-slate-400 dark:text-slate-500 text-[20px]",children:r})}),_.jsx("input",{ref:h,type:t,placeholder:e,className:Wi("block w-full h-11 rounded-lg border text-sm transition-all","bg-slate-50 dark:bg-slate-800","text-slate-900 dark:text-white","placeholder:text-slate-400 dark:placeholder:text-slate-500","focus:outline-none focus:ring-2 focus:ring-primary/10",r?"pl-10 pr-3":"px-3",s?"border-red-300 dark:border-red-700 focus:border-red-500":"border-slate-200 dark:border-slate-700 focus:border-primary",l),...u})]}),s&&_.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:s})]}));wn.displayName="Input";const Pr=({children:n,variant:t="primary",size:e="md",loading:s=!1,disabled:r=!1,icon:o=null,type:l="button",className:u="",onClick:h,...f})=>{const p="inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",m={primary:"bg-primary hover:bg-primary-hover text-white shadow-sm focus:ring-primary active:scale-[0.98]",secondary:"bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 focus:ring-primary active:scale-[0.98]",danger:"bg-red-600 hover:bg-red-700 text-white shadow-sm focus:ring-red-500 active:scale-[0.98]",ghost:"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 focus:ring-slate-400"},b={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"};return _.jsx("button",{type:l,className:Wi(p,m[t],b[e],u),disabled:r||s,onClick:h,...f,children:s?_.jsxs(_.Fragment,{children:[_.jsx(aA,{size:"sm",color:t==="primary"||t==="danger"?"white":"primary"}),_.jsx("span",{children:n})]}):_.jsxs(_.Fragment,{children:[o&&_.jsx("span",{className:"material-symbols-outlined text-[18px]",children:o}),_.jsx("span",{children:n})]})})},Hm=({title:n="Error",message:t,onClose:e})=>t?_.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-900/20 rounded-lg p-3 flex gap-3 items-start",children:[_.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400 text-[20px] mt-0.5",children:"error"}),_.jsxs("div",{className:"flex-1 flex flex-col gap-0.5",children:[_.jsx("p",{className:"text-xs font-semibold text-red-700 dark:text-red-400",children:n}),_.jsx("p",{className:"text-xs text-red-600/80 dark:text-red-400/70",children:t})]}),e&&_.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-600 dark:hover:text-red-300 transition-colors",children:_.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]}):null,$m=()=>{const{i18n:n}=gi();k.useEffect(()=>{const e=n.language==="he"?"rtl":"ltr";document.documentElement.dir=e,document.documentElement.lang=n.language},[n.language]);const t=()=>{const e=n.language==="en"?"he":"en";n.changeLanguage(e)};return _.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm font-medium",title:n.language==="en"?"Switch to Hebrew":" ",children:[_.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"language"}),_.jsx("span",{children:n.language==="en"?"":"EN"})]})},OP=()=>{const{t:n}=gi(),[t,e]=k.useState(""),{login:s}=wh(),r=Fl(),{register:o,handleSubmit:l,formState:{errors:u,isSubmitting:h}}=Nm({resolver:Im(CP)}),f=async p=>{e("");const m=await s(p.email,p.password);m.success?r("/dashboard/upload"):e(m.error)};return _.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8 bg-background-light dark:bg-background-dark relative overflow-hidden",children:[_.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[_.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-primary/5 dark:bg-primary/10 rounded-full blur-3xl opacity-70"}),_.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[600px] h-[600px] bg-blue-400/5 dark:bg-blue-600/10 rounded-full blur-3xl opacity-70"})]}),_.jsx("div",{className:"absolute top-6 ltr:right-6 rtl:left-6 z-20",children:_.jsx($m,{})}),_.jsxs("div",{className:"w-full max-w-[440px] bg-white dark:bg-slate-900 rounded-xl shadow-lg border border-slate-100 dark:border-slate-800 z-10 relative overflow-hidden",children:[_.jsxs("div",{className:"p-8 sm:p-10 flex flex-col gap-6",children:[_.jsxs("div",{className:"flex flex-col items-center text-center gap-2",children:[_.jsx("div",{className:"size-12 bg-primary/10 dark:bg-primary/20 rounded-xl flex items-center justify-center mb-2 text-primary",children:_.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"account_balance_wallet"})}),_.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-white",children:n("auth.welcomeBack")}),_.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:n("auth.loginSubtitle")})]}),t&&_.jsx(Hm,{title:n("auth.loginFailed"),message:t,onClose:()=>e("")}),_.jsxs("form",{onSubmit:l(f),className:"flex flex-col gap-4",children:[_.jsx(wn,{label:n("auth.email"),type:"email",placeholder:"name@company.com",icon:"mail",error:u.email?.message,...o("email")}),_.jsx(wn,{label:n("auth.password"),type:"password",placeholder:"",icon:"lock",error:u.password?.message,...o("password")}),_.jsx("div",{className:"pt-2",children:_.jsx(Pr,{type:"submit",variant:"primary",size:"lg",loading:h,className:"w-full",children:n("auth.signIn")})})]})]}),_.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 px-8 py-4 border-t border-slate-100 dark:border-slate-700 text-center",children:_.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[n("auth.newAccount")," ",_.jsx(ph,{to:"/register",className:"font-semibold text-primary hover:text-primary-hover transition-colors",children:n("auth.createAccount")})]})})]}),_.jsxs("div",{className:"mt-8 flex gap-6 text-sm text-slate-500 dark:text-slate-400 z-10",children:[_.jsx("a",{href:"#",className:"hover:text-slate-900 dark:hover:text-slate-200 transition-colors",children:"Privacy Policy"}),_.jsx("a",{href:"#",className:"hover:text-slate-900 dark:hover:text-slate-200 transition-colors",children:"Terms of Service"}),_.jsx("a",{href:"#",className:"hover:text-slate-900 dark:hover:text-slate-200 transition-colors",children:"Contact Support"})]})]})},DP=()=>{const{t:n}=gi(),[t,e]=k.useState(""),{register:s}=wh(),r=Fl(),{register:o,handleSubmit:l,formState:{errors:u,isSubmitting:h}}=Nm({resolver:Im(RP)}),f=async p=>{e("");const m=await s(p.email,p.password);m.success?r("/dashboard/upload"):e(m.error)};return _.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8 bg-background-light dark:bg-background-dark relative",children:[_.jsx("div",{className:"absolute top-6 ltr:right-6 rtl:left-6 z-20",children:_.jsx($m,{})}),_.jsxs("div",{className:"w-full max-w-md",children:[_.jsx("div",{className:"flex justify-center mb-8",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"size-10 bg-primary/10 dark:bg-primary/20 rounded-lg flex items-center justify-center text-primary",children:_.jsx("span",{className:"material-symbols-outlined text-2xl",children:"account_balance_wallet"})}),_.jsx("h1",{className:"text-xl font-bold tracking-tight text-slate-900 dark:text-white",children:n("auth.appTitle")||"Expense Manager"})]})}),_.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",children:[_.jsxs("div",{className:"p-8",children:[_.jsxs("div",{className:"mb-8 text-center",children:[_.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-900 dark:text-white",children:n("auth.createAccountTitle")}),_.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:n("auth.registerSubtitle")})]}),t&&_.jsx("div",{className:"mb-6",children:_.jsx(Hm,{title:n("auth.registerFailed"),message:t,onClose:()=>e("")})}),_.jsxs("form",{onSubmit:l(f),className:"flex flex-col gap-5",children:[_.jsx(wn,{label:n("auth.email"),type:"email",placeholder:"name@company.com",error:u.email?.message,required:!0,...o("email")}),_.jsx(wn,{label:n("auth.password"),type:"password",placeholder:"",error:u.password?.message,required:!0,...o("password")}),_.jsx(wn,{label:n("auth.confirmPassword"),type:"password",placeholder:"",error:u.confirmPassword?.message,required:!0,...o("confirmPassword")}),_.jsx(Pr,{type:"submit",variant:"primary",size:"lg",loading:h,className:"w-full mt-2",children:n("auth.createAccount")})]})]}),_.jsx("div",{className:"border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800 px-8 py-4 text-center",children:_.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[n("auth.haveAccount")," ",_.jsx(ph,{to:"/login",className:"font-semibold text-primary hover:text-primary-hover hover:underline transition-colors",children:n("auth.loginHere")})]})})]}),_.jsxs("div",{className:"mt-8 flex justify-center gap-6 text-sm text-slate-500 dark:text-slate-400",children:[_.jsx("a",{href:"#",className:"hover:text-slate-900 dark:hover:text-slate-200 transition-colors",children:"Privacy"}),_.jsx("a",{href:"#",className:"hover:text-slate-900 dark:hover:text-slate-200 transition-colors",children:"Terms"}),_.jsx("a",{href:"#",className:"hover:text-slate-900 dark:hover:text-slate-200 transition-colors",children:"Help"})]})]})]})},kP=()=>{const{t:n}=gi(),{logout:t}=wh(),e=Fl(),s=async()=>{await t(),e("/login")};return _.jsxs("header",{className:"sticky top-0 z-30 flex items-center justify-between whitespace-nowrap border-b border-solid border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-6 py-3 shadow-sm",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"flex items-center justify-center size-10 rounded-lg bg-primary/10 text-primary",children:_.jsx("span",{className:"material-symbols-outlined text-2xl",children:"account_balance_wallet"})}),_.jsx("h1",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight tracking-tight",children:"Expense & Invoice Manager"})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx($m,{}),_.jsx(Pr,{variant:"ghost",size:"sm",icon:"logout",onClick:s,children:n("auth.logout")})]})]})},MP=()=>{const{t:n}=gi();return _.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex flex-col",children:[_.jsx(kP,{}),_.jsxs("main",{className:"flex-1 w-full max-w-[1440px] mx-auto p-6 md:p-8 flex flex-col gap-6",children:[_.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:_.jsxs("nav",{"aria-label":"Tabs",className:"flex gap-8",children:[_.jsxs(Fp,{to:"/dashboard/upload",className:({isActive:t})=>`group flex items-center gap-2 border-b-[3px] pb-3 px-1 text-sm font-bold transition-colors ${t?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[_.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"cloud_upload"}),_.jsx("span",{children:n("dashboard.uploadTab")})]}),_.jsxs(Fp,{to:"/dashboard/expenses",className:({isActive:t})=>`group flex items-center gap-2 border-b-[3px] pb-3 px-1 text-sm font-bold transition-colors ${t?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[_.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"receipt_long"}),_.jsx("span",{children:n("dashboard.expensesTab")})]})]})}),_.jsx(RR,{})]})]})},NP=async n=>{const t=new FormData;return t.append("file",n),(await Es.post("/documents",t)).data},LP=async n=>(await Es.post(`/documents/${n}/analyze`,null,{timeout:12e4})).data,PP={documents:["documents"]},FP=()=>{const n=no();return jl({mutationFn:NP,onSuccess:()=>{n.invalidateQueries({queryKey:PP.documents})}})},zP=()=>jl({mutationFn:LP}),jP=async(n={})=>{const t=Object.fromEntries(Object.entries(n).filter(([s,r])=>r!=null&&r!==""));return(await Es.get("/expenses",{params:t})).data},BP=async n=>(await Es.post("/expenses",n)).data,IP=async(n,t)=>(await Es.patch(`/expenses/${n}`,t)).data,UP=async n=>(await Es.delete(`/expenses/${n}`)).data,IA={expenses:n=>["expenses",n],expense:n=>["expense",n]},HP=(n={})=>VO({queryKey:IA.expenses(n),queryFn:()=>jP(n),keepPreviousData:!0}),$P=()=>{const n=no();return jl({mutationFn:BP,onSuccess:()=>{n.invalidateQueries({queryKey:["expenses"]})}})},VP=()=>{const n=no();return jl({mutationFn:({expenseId:t,data:e})=>IP(t,e),onSuccess:(t,e)=>{n.invalidateQueries({queryKey:IA.expense(e.expenseId)}),n.invalidateQueries({queryKey:["expenses"]})}})},qP=()=>{const n=no();return jl({mutationFn:UP,onSuccess:()=>{n.invalidateQueries({queryKey:["expenses"]})}})},sh=k.forwardRef(({label:n,options:t=[],error:e="",required:s=!1,placeholder:r="Select an option",className:o="",...l},u)=>_.jsxs("div",{className:"space-y-1.5 w-full",children:[n&&_.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[n,s&&_.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),_.jsxs("div",{className:"relative",children:[_.jsxs("select",{ref:u,className:Wi("block w-full h-11 rounded-lg border text-sm transition-all appearance-none","bg-slate-50 dark:bg-slate-800","text-slate-900 dark:text-white","focus:outline-none focus:ring-2 focus:ring-primary/10","px-3 pr-10",e?"border-red-300 dark:border-red-700 focus:border-red-500":"border-slate-200 dark:border-slate-700 focus:border-primary",o),...l,children:[r&&_.jsx("option",{value:"",children:r}),t.map(h=>_.jsx("option",{value:h.value,children:h.label},h.value))]}),_.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:_.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"expand_more"})})]}),e&&_.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:e})]}));sh.displayName="Select";const GP=({data:n,onSave:t,onDiscard:e,loading:s})=>{const{t:r}=gi(),o=Vl({vendorName:We().min(1,r("form.required")),date:We().min(1,r("form.required")),totalAmount:Ua().min(0,r("form.amountPositive")),currency:We().optional(),description:We().optional(),category:Um(["FOOD","VEHICLE","IT","OPERATIONS","TRAINING","OTHER"])}),{register:l,handleSubmit:u,formState:{errors:h},reset:f}=Nm({resolver:Im(o),defaultValues:{vendorName:"",date:"",totalAmount:0,currency:"USD",description:"",category:"OTHER"}});k.useEffect(()=>{n&&f({vendorName:n.vendorName||"",date:n.date||"",totalAmount:n.totalAmount||0,currency:n.currency||"USD",description:n.description||"",category:"OTHER"})},[n,f]);const p=b=>{t(b)},m=Tm.map(b=>({value:b.value,label:r(`categories.${b.value}`)}));return _.jsxs("form",{onSubmit:u(p),className:"space-y-4",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsx(wn,{label:r("form.vendorName"),placeholder:r("expenses.businessName"),error:h.vendorName?.message,...l("vendorName")}),_.jsx(wn,{label:r("form.date"),type:"date",error:h.date?.message,...l("date")}),_.jsx(wn,{label:r("form.totalAmount"),type:"number",step:"0.01",placeholder:"0.00",error:h.totalAmount?.message,...l("totalAmount",{valueAsNumber:!0})}),_.jsx(wn,{label:r("form.currency"),placeholder:"USD",error:h.currency?.message,...l("currency")}),_.jsx("div",{className:"md:col-span-2",children:_.jsx(sh,{label:r("form.category"),options:m,error:h.category?.message,...l("category")})}),_.jsxs("div",{className:"md:col-span-2",children:[_.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r("form.description")}),_.jsx("textarea",{rows:3,placeholder:r("form.descriptionPlaceholder"),className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2.5 text-slate-900 dark:text-white placeholder-slate-400 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-colors",...l("description")}),h.description&&_.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.description.message})]})]}),_.jsxs("div",{className:"flex gap-3 pt-2",children:[_.jsx(Pr,{type:"button",variant:"secondary",onClick:e,disabled:s,className:"flex-1",children:r("form.discard")}),_.jsx(Pr,{type:"submit",variant:"primary",loading:s,className:"flex-1",children:r("form.confirmSave")})]})]})},bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Jp=[.001,0,0,.001,0,0],vp=1.35,qn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Us={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Rl="pdfjs_internal_editor_",kt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},qt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},UA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},an={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Sl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Oe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Pa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ql={ERRORS:0,WARNINGS:1,INFOS:5},Za={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},_u={moveTo:0,lineTo:1,curveTo:2,closePath:3},HA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Oh=ql.WARNINGS;function YP(n){Number.isInteger(n)&&(Oh=n)}function XP(){return Oh}function Dh(n){Oh>=ql.INFOS&&console.info(`Info: ${n}`)}function Mt(n){Oh>=ql.WARNINGS&&console.warn(`Warning: ${n}`)}function ue(n){throw new Error(n)}function Yt(n,t){n||ue(t)}function ZP(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Vm(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=tF(n)}catch{}const s=t?URL.parse(n,t):URL.parse(n);return ZP(s)?s:null}function qm(n,t,e=!1){const s=URL.parse(n);return s?(s.hash=t,s.href):e&&Vm(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function zt(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Ur=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class aS extends Ur{constructor(t,e){super(t,"PasswordException"),this.code=e}}class wp extends Ur{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ih extends Ur{constructor(t){super(t,"InvalidPDFException")}}class Ol extends Ur{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class KP extends Ur{constructor(t){super(t,"FormatError")}}class fi extends Ur{constructor(t){super(t,"AbortException")}}function $A(n){(typeof n!="object"||n?.length===void 0)&&ue("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),l=n.subarray(r,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Gl(n){typeof n!="string"&&ue("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function WP(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function QP(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function JP(){try{return new Function(""),!0}catch{return!1}}class Qe{static get isLittleEndian(){return zt(this,"isLittleEndian",QP())}static get isEvalSupported(){return zt(this,"isEvalSupported",JP())}static get isOffscreenCanvasSupported(){return zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return zt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return zt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return zt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Sp=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class gt{static makeHexColor(t,e,s){return`#${Sp[t]}${Sp[e]}${Sp[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,s=0){const r=t[s],o=t[s+1];t[s]=r*e[0]+o*e[2]+e[4],t[s+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const r=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const m=t[s+p],b=t[s+p+1];t[s+p]=m*r+b*l+h,t[s+p+1]=m*o+b*u+f}}static applyInverseTransform(t,e){const s=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-s*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,s){const r=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5],p=t[0],m=t[1],b=t[2],v=t[3];let w=r*p+h,S=w,A=r*b+h,E=A,T=u*m+f,R=T,O=u*v+f,D=O;if(o!==0||l!==0){const z=o*p,N=o*b,U=l*m,H=l*v;w+=U,E+=U,A+=H,S+=H,T+=z,D+=z,O+=N,R+=N}s[0]=Math.min(s[0],w,A,S,E),s[1]=Math.min(s[1],T,O,R,D),s[2]=Math.max(s[2],w,A,S,E),s[3]=Math.max(s[3],T,O,R,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],r=t[1],o=t[2],l=t[3],u=s**2+r**2,h=s*o+r*l,f=o**2+l**2,p=(u+f)/2,m=Math.sqrt(p**2-(u*f-h**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[s,o,r,l]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],e,r)}static#t(t,e,s,r,o,l,u,h,f,p){if(f<=0||f>=1)return;const m=1-f,b=f*f,v=b*f,w=m*(m*(m*t+3*f*e)+3*b*s)+v*r,S=m*(m*(m*o+3*f*l)+3*b*u)+v*h;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],S)}static#e(t,e,s,r,o,l,u,h,f,p,m,b){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,s,r,o,l,u,h,-m/p,b);return}const v=p**2-4*m*f;if(v<0)return;const w=Math.sqrt(v),S=2*f;this.#t(t,e,s,r,o,l,u,h,(-p+w)/S,b),this.#t(t,e,s,r,o,l,u,h,(-p-w)/S,b)}static bezierBoundingBox(t,e,s,r,o,l,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),this.#e(t,s,o,u,e,r,l,h,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,e,r,l,h,3*(-e+3*(r-l)+h),6*(e-2*r+l),3*(r-e),f)}}function tF(n){return decodeURIComponent(escape(n))}let xp=null,oS=null;function VA(n){return xp||(xp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,oS=new Map([["","t"]])),n.replaceAll(xp,(t,e,s)=>e?e.normalize("NFKC"):oS.get(s))}function Gm(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),$A(n)}const Ym="pdfjs_internal_id_";function eF(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,r,...o]=e;if(!n(s)&&!Number.isInteger(s)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function un(n,t,e){return Math.min(Math.max(n,t),e)}function qA(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa($A(n))}function nF(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Gl(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});class Dl{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Dl.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const h of o.children)r(h)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Xm{static setupStorage(t,e,s,r,o){const l=r.getValue(e,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:r,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:s});const u=o!=="richText",h=t.div;if(h.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);l.append(m),u&&Dl.shouldBuildText(r.name)&&f.push(m)}return{textDivs:f}}const p=[[r,-1,l]];for(;p.length>0;){const[m,b,v]=p.at(-1);if(b+1===m.children.length){p.pop();continue}const w=m.children[++p.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);f.push(E),v.append(E);continue}const A=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(v.append(A),w.attributes&&this.setAttributes({html:A,element:w,storage:e,intent:o,linkService:s}),w.children?.length>0)p.push([w,-1,A]);else if(w.value){const E=document.createTextNode(w.value);u&&Dl.shouldBuildText(S)&&f.push(E),A.append(E)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ci="http://www.w3.org/2000/svg";class Fr{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ao(n,t="text"){if(pl(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Yl{constructor({viewBox:t,userUnit:e,scale:s,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=l,s*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,m,b,v;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,m=0,b=0,v=1;break;case 90:p=0,m=1,b=1,v=0;break;case 270:p=0,m=-1,b=-1,v=0;break;case 0:p=1,m=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let w,S,A,E;p===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(h-t[0])*s+l,A=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(h-t[0])*s+o,S=Math.abs(f-t[1])*s+l,A=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[p*s,m*s,b*s,v*s,w-p*s*h-b*s*f,S-m*s*h-v*s*f],this.width=A,this.height=E}get rawDims(){const t=this.viewBox;return zt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Yl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const s=[t,e];return gt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];gt.applyTransform(e,this.transform);const s=[t[2],t[3]];return gt.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return gt.applyInverseTransform(s,this.transform),s}}class kh extends Ur{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Xl(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Mh(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function GA(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function YA(n,t="document.pdf"){if(typeof n!="string")return t;if(Xl(n))return Mt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return r(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const h=Array.from(s.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return r(f)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return t}class lS{started=Object.create(null);times=[];time(t){t in this.started&&Mt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Mt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(e)} ${o-r}ms
`);return t.join("")}}function pl(n,t){const e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function Zn(n){n.preventDefault()}function xe(n){n.preventDefault(),n.stopPropagation()}function sF(n){console.log("Deprecated API usage: "+n)}class rh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(l+=p,u+=m):f==="+"&&(l-=p,u-=m),new Date(Date.UTC(s,r,o,l,u,h))}}function XA(n,{scale:t=1,rotation:e=0}){const{width:s,height:r}=n.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Yl({viewBox:o,userUnit:1,scale:t,rotation:e})}function oo(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Mt(`Not a valid color format: "${n}"`),[0,0,0])}function iF(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,oo(s))}t.remove()}function Se(n){const{a:t,b:e,c:s,d:r,e:o,f:l}=n.getTransform();return[t,e,s,r,o,l]}function Ps(n){const{a:t,b:e,c:s,d:r,e:o,f:l}=n.getTransform().invertSelf();return[t,e,s,r,o,l]}function Zi(n,t,e=!1,s=!0){if(t instanceof Yl){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=n,u=Qe.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}s&&n.setAttribute("data-main-rotation",t.rotation)}class Ss{constructor(){const{pixelRatio:t}=Ss;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,r,o=-1){let l=1/0,u=1/0,h=1/0;s=Ss.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*e))),r!==-1&&(u=r/t,h=r/e);const f=Math.min(l,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const ah=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class rF{static get isDarkMode(){return zt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class ZA{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),zt(this,"commentForegroundColor",oo(s))}}function KA(n,t,e,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),t=Math.round(t*s+r),e=Math.round(e*s+r),[n,t,e]}function cS(n,t){const e=n[0]/255,s=n[1]/255,r=n[2]/255,o=Math.max(e,s,r),l=Math.min(e,s,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const h=o-l;switch(t[1]=u<.5?h/(o+l):h/(2-o-l),o){case e:t[0]=((s-r)/h+(s<r?6:0))*60;break;case s:t[0]=((r-e)/h+2)*60;break;case r:t[0]=((e-s)/h+4)*60;break}}t[2]=u}function tm(n,t){const e=n[0],s=n[1],r=n[2],o=(1-Math.abs(2*r-1))*s,l=o*(1-Math.abs(e/60%2-1)),u=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function uS(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function hS(n,t,e){tm(n,e),e.map(uS);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];tm(t,e),e.map(uS);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const dS=new Map;function WA(n,t){const e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=dS.get(e);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);cS(n,l);const u=r.subarray(6,9);cS(t,u);const h=u[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),hS(l,u,o)<f){let p,m;h?(p=l[2],m=1):(p=0,m=l[2]);const b=.005;for(;m-p>b;){const v=l[2]=(p+m)/2;h===hS(l,u,o)<f?p=v:m=v}l[2]=h?m:p}return tm(l,o),s=gt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),dS.set(e,s),s}function Zm({html:n,dir:t,className:e},s){const r=document.createDocumentFragment();if(typeof n=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=n.split(/(?:\r\n?|\n)/);for(let u=0,h=l.length;u<h;++u){const f=l[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}r.append(o)}else Xm.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),s.append(r)}class xl{#t=null;#e=null;#s;#n=null;#i=null;#r=null;#a=null;#o=null;static#c=null;constructor(t){this.#s=t,xl.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Zn,{signal:e}),t.addEventListener("pointerdown",xl.#l,{signal:e}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const r=this.#s.toolbarPosition;if(r){const{style:o}=t,l=this.#s._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#s._focusEventsAllowed=!1,xe(t)}#h(t){this.#s._focusEventsAllowed=!0,xe(t)}#f(t){const e=this.#s._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Zn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#i?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",xl.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#n.append(s)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#i=t}addComment(t,e=null){if(this.#r)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#a=this.#g;e?(this.#n.insertBefore(s,e),this.#n.insertBefore(r,e)):this.#n.append(s,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#s);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#a?.remove(),this.#a=null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,s){const r=this.#n.querySelector(s);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class aF{#t=null;#e=null;#s;constructor(t){this.#s=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#s._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Zn,{signal:e});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#s.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),t}#i(t,e){let s=0,r=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(e?o.width:0);if(l>s){r=u,s=l;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,s]}show(t,e,s){const[r,o]=this.#i(e,s),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,s,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#s._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",Zn,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function QA(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}class oF{#t=0;get id(){return`${Rl}${this.#t++}`}}class Km{#t=Gm();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return zt(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#s||=new Map;let s=this.#s.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(s.url=e,r=await ao(e,"blob")):e instanceof File?r=s.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=Km._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},l.onload=async()=>{const m=s.svgUrl=l.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=l.onerror=p});l.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){Mt(r),s=null}return this.#s.set(t,s),s&&this.#s.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:r,type:o}=t;return this.#n(`${e}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const s=await e;return this.#n(t,s)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let s=this.#s.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,s),this.#s.set(s.id,s),s}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class lF{#t=[];#e=!1;#s;#n=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:e,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(h);return}if(l&&this.#t[this.#n].type===o){u&&(h.undo=this.#t[this.#n].undo),this.#t[this.#n]=h;return}const f=this.#n+1;f===this.#s?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Zl{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Qe.platform;for(const[s,r,o={}]of t)for(const l of s){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,e)||(r.bind(t,...l,e)(),o||xe(e))}}class Wm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return iF(t),zt(this,"_colors",t)}convert(t){const e=oo(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,r]of this._colors)if(r.every((o,l)=>o===e[l]))return Wm._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?gt.makeHexColor(...e):t}}class pi{#t=new AbortController;#e=null;#s=null;#n=new Map;#i=new Map;#r=null;#a=null;#o=null;#c=new lF;#l=null;#d=null;#h=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#E=null;#x=null;#w=null;#T=null;#A=!1;#_=null;#D=new oF;#R=!1;#O=!1;#z=!1;#M=null;#L=null;#j=null;#P=null;#V=null;#C=kt.NONE;#S=new Set;#N=null;#B=null;#U=null;#Y=null;#G=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#F=null;#q=null;#Q=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=pi.prototype,e=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Zl([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,s,r,o,l,u,h,f,p,m,b,v,w,S,A){const E=this._signal=this.#t.signal;this.#q=t,this.#Q=e,this.#J=s,this.#r=r,this.#l=o,this.#B=l,this.#G=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#O=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#O=!1},{capture:!0,signal:E}),this.#lt(),this.#dt(),this.#et(),this.#a=h.annotationStorage,this.#E=h.filterFactory,this.#U=f,this.#T=p||null,this.#y=m,this.#v=b,this.#b=v,this.#V=w||null,this.viewParameters={realScale:Fr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=A!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#m.clear(),this.#P?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#_?.hide(),this.#_=null,this.#j?.destroy(),this.#j=null,this.#s=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#F&&(clearTimeout(this.#F),this.#F=null),this._editorUndoBar?.destroy(),this.#G=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return zt(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return zt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return zt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return zt(this,"highlightColors",null);const e=new Map,s=!!this.#U;for(const[r,o]of t){const l=r.endsWith("_HCM");if(s&&l){e.set(r.replace("_HCM",""),o);continue}!s&&!l&&e.set(r,o)}return zt(this,"highlightColors",e)}get highlightColorNames(){return zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,s,r){this.#l?.showDialog(this,t,e,s,r)}selectComment(t,e){this.#i.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,s=void 0){this.#l?.toggleCommentPopup(t,e,s)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#i.has(t-1))return;const{resolve:e,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#B?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#B}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const s of this.#i.values()){const{x:r,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+l&&e>=o&&e<=o+u)return s}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Fr.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#i.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",e=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=s,h=s.toString(),p=this.#W(s).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;s.empty();const b=this.#tt(p),v=this.#C===kt.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:h});v&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(v){this.switchToMode(kt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#W(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#_||=new aF(this),this.#_.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${Rl}${t}`,s=this.#a.getRawValue(e);return s&&this.#a.remove(e),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#_?.hide(),this.#N=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#N)return;const r=this.#W(t).closest(".textLayer");if(!r){this.#N&&(this.#_?.hide(),this.#N=null,this.#k({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#N=e,this.#k({hasSelectedText:!0}),!(this.#C!==kt.HIGHLIGHT&&this.#C!==kt.NONE)&&(this.#C===kt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===kt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#O){const l=new AbortController,u=this.combinedSignal(l),h=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#Z("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#Z("main_toolbar")}}#Z(t=""){this.#C===kt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#Z("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#M)return;this.#M=new AbortController;const t=this.combinedSignal(this.#M);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#M?.abort(),this.#M=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#st(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#st()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#S){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){Mt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const h of s){const f=await r.deserialize(h);if(!f)return;o.push(f)}const l=()=>{for(const h of o)this.#it(h);this.#rt(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){Mt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==kt.NONE&&!this.isEditorHandlingKeyboard&&pi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#Z("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(t){Object.entries(t).some(([s,r])=>this.#X[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#C===kt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#$([[qt.HIGHLIGHT_FREE,!0]]))}#$(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#k({isEditing:this.#C!==kt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#st(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#$(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#i.get(this.#f)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#i.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,r=!1,o=!1){if(this.#C!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===kt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===kt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===kt.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#i.values())l.updateMode(t);if(t===kt.POPUP){this.#s||=await this.#G.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const l=new Set,u=[];for(const h of this.#n.values()){const{annotationElementId:f,hasComment:p,deleted:m}=h;f&&l.add(f),p&&!m&&u.push(h.getData())}for(const h of this.#s){const{id:f,popupRef:p,contentsObj:m}=h;p&&m?.str&&!l.has(f)&&!this.#g.has(f)&&u.push(h)}this.#l?.showSidebar(u)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():r?l.enterInEditMode():l.focus()):l.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case qt.CREATE:this.currentLayer.addNewEditor(e);return;case qt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const s of this.#S)s.updateParams(t,e);else for(const s of this.#u)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#Y?.get(qt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#$([[qt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#P?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#$(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#mt===t&&this.#$(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#$(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],s=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},r=()=>{for(const o of e)this.#it(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#rt(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#rt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==kt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[r,o]=this.#H,l=[...this.#S],u=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(r,o),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-r,-o),h.translationDone())},mustExec:!1})},u);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,e||=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const s=(r,o,l,u)=>{if(this.#n.has(r.id)){const h=this.#i.get(u);h?r._setParentAndPosition(h,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)s(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const s of this.#p.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==kt.NONE}get imageManager(){return zt(this,"imageManager",new Km)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,m,b)=>({x:(p-r)/l,y:1-(f+m-s)/o,width:b/l,height:m/o});break;case"180":u=(f,p,m,b)=>({x:1-(f+m-s)/o,y:1-(p+b-r)/l,width:m/o,height:b/l});break;case"270":u=(f,p,m,b)=>({x:1-(p+b-r)/l,y:(f-s)/o,width:b/l,height:m/o});break;default:u=(f,p,m,b)=>({x:(f-s)/o,y:(p-r)/l,width:m/o,height:b/l});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:b,y:v,width:w,height:S}of m.getClientRects())w===0||S===0||h.push(u(b,v,w,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const s=this.#a.getRawValue(e);s&&(this.#C===kt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const r=this.#P?.get(t);r&&(r.setCanvas(e,s),this.#P.delete(t))}addMissingCanvas(t,e){(this.#P||=new Map).set(t,e)}}class Bs{#t=null;#e=!1;#s=null;#n=null;#i=null;#r=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Bs.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Bs._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Bs.#f.missing),e.setAttribute("data-l10n-id",Bs.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",Zn,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,r(o))},{signal:s}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Bs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#s&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#i=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#s;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Bs.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Bs.#f[`${this.#g}-label`]),!this.#t){this.#i?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#i?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#i;if(!e){this.#i=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#i.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Tu{#t=null;#e=null;#s=!1;#n=null;#i=null;#r=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:s}=this.#t.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-r)/l,(e+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",Zn,{signal:s}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,xe(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,xe(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const e=this.commentPopupPositionInLayer;let s,r;if(e)[s,r]=e;else{[s,r]=this.#n.commentButtonPosition;const{width:p,height:m,x:b,y:v}=this.#n;s=b+s*p,r=v+r*m}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:h,height:f}=o;this.#n._uiManager.editComment(this.#n,l+s*h,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#i}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#r=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#i=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#r=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class Kl{#t;#e=!1;#s=null;#n;#i;#r;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#s=s,this.#n=e,this.#i=r,this.#r=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ss.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(xe(f),h(f))},u),l.addEventListener("pointerup",h,u),l.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",xe,l),o.addEventListener("pointermove",xe,l),o.addEventListener("pointercancel",xe,l),o.addEventListener("pointerup",xe,l),this.#i?.()}if(xe(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;xe(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:r,screenY:o}=e,{screenX:l,screenY:u}=s,h=this.#l,{touch0X:f,touch0Y:p,touch1X:m,touch1Y:b}=h,v=m-f,w=b-p,S=l-r,A=u-o,E=Math.hypot(S,A)||1,T=Math.hypot(v,w)||1;if(!this.#e&&Math.abs(T-E)<=Kl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!this.#e){this.#e=!0;return}const R=[(r+l)/2,(o+u)/2];this.#r?.(R,T,E)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(xe(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Et{#t=null;#e=null;#s=null;#n=null;#i=null;#r=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#v=!1;#b=null;#E=0;#x=0;#w=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#_=Et._zIndex++;static _borderLineWidth=-1;static _colorManager=new Wm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Et.prototype._resizeWithKeyboard,e=pi.TRANSLATE_SMALL,s=pi.TRANSLATE_BIG;return zt(this,"_resizerKeyboardManager",new Zl([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Et.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new cF({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Et._l10n??=t,Et._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Et._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Et._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#F(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,r){const[o,l]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(e+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,r]=this.parentDimensions;this.setAt(t*s,e*r,this.width*s,this.height*r),this._onTranslated()}#D([t,e],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,f]=this.getBaseTranslation();l+=h,u+=f;const{style:p}=s;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=Et,r=s/t,o=s/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,r]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=s,h*=r,o*=s,l*=r,this._mustFixPosition)switch(t){case 0:o=un(o,0,s-u),l=un(l,0,r-h);break;case 90:o=un(o,0,s-h),l=un(l,u,r);break;case 180:o=un(o,u,s),l=un(l,h,r);break;case 270:o=un(o,h,s),l=un(l,0,r-u);break}this.x=o/=s,this.y=l/=r;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Et.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Et.#R(t,e,360-this.parentRotation)}#O(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(){const{div:{style:t},width:e,height:s}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#M.bind(this,s),{signal:e}),r.addEventListener("contextmenu",Zn,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#M(t,e){e.preventDefault();const{isMac:s}=Qe.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#s?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#P.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",xe,{passive:!1,signal:l}),window.addEventListener("contextmenu",Zn,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#j()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#L(t,e,s,r){this.width=s,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,h=this.height;o===t&&l===e&&u===s&&h===r||this.addCommands({cmd:this.#L.bind(this,o,l,u,h),undo:this.#L.bind(this,t,e,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#P(t,e){const[s,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,f=Et.MIN_SIZE/s,p=Et.MIN_SIZE/r,m=this.#O(this.rotation),b=(L,$)=>[m[0]*L+m[2]*$,m[1]*L+m[3]*$],v=this.#O(360-this.rotation),w=(L,$)=>[v[0]*L+v[2]*$,v[1]*L+v[3]*$];let S,A,E=!1,T=!1;switch(t){case"topLeft":E=!0,S=(L,$)=>[0,0],A=(L,$)=>[L,$];break;case"topMiddle":S=(L,$)=>[L/2,0],A=(L,$)=>[L/2,$];break;case"topRight":E=!0,S=(L,$)=>[L,0],A=(L,$)=>[0,$];break;case"middleRight":T=!0,S=(L,$)=>[L,$/2],A=(L,$)=>[0,$/2];break;case"bottomRight":E=!0,S=(L,$)=>[L,$],A=(L,$)=>[0,0];break;case"bottomMiddle":S=(L,$)=>[L/2,$],A=(L,$)=>[L/2,0];break;case"bottomLeft":E=!0,S=(L,$)=>[0,$],A=(L,$)=>[L,0];break;case"middleLeft":T=!0,S=(L,$)=>[0,$/2],A=(L,$)=>[L,$/2];break}const R=S(u,h),O=A(u,h);let D=b(...O);const z=Et._round(o+D[0]),N=Et._round(l+D[1]);let U=1,H=1,V,B;if(e.fromKeyboard)({deltaX:V,deltaY:B}=e);else{const{screenX:L,screenY:$}=e,[it,ft]=this.#l;[V,B]=this.screenToPageTranslation(L-it,$-ft),this.#l[0]=L,this.#l[1]=$}if([V,B]=w(V/s,B/r),E){const L=Math.hypot(u,h);U=H=Math.max(Math.min(Math.hypot(O[0]-R[0]-V,O[1]-R[1]-B)/L,1/u,1/h),f/u,p/h)}else T?U=un(Math.abs(O[0]-R[0]-V),f,1)/u:H=un(Math.abs(O[1]-R[1]-B),p,1)/h;const W=Et._round(u*U),at=Et._round(h*H);D=b(...A(W,at));const ot=z-D[0],dt=N-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=W,this.height=at,this.x=ot,this.y=dt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new xl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(Bs.initialize(Et._l10n),this.#s=new Bs(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Tu(this)}addStandaloneCommentButton(){if(this.#i){this._uiManager.isEditingMode()&&this.#i.classList.remove("hidden");return}this.hasComment&&(this.#i=this.#n.renderForStandalone(),this.div.append(this.#i))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#i=null}hideStandaloneCommentButton(){this.#i?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:s,deleted:r}}=this.#n;return{text:e,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Tu(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:s}){if(!e||(this.#n||=new Tu(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Tu(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),QA(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Kl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,e,s){let o=.7*(s/e)+1-.7;if(o===1)return;const l=this.#O(this.rotation),u=(z,N)=>[l[0]*z+l[2]*N,l[1]*z+l[3]*N],[h,f]=this.parentDimensions,p=this.x,m=this.y,b=this.width,v=this.height,w=Et.MIN_SIZE/h,S=Et.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/v),w/b,S/v);const A=Et._round(b*o),E=Et._round(v*o);if(A===b&&E===v)return;this.#u||=[p,m,b,v];const T=u(b/2,v/2),R=Et._round(p+T[0]),O=Et._round(m+T[1]),D=u(A/2,E/2);this.x=R-D[0],this.y=O-D[1],this.width=A,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(t){const{isMac:e}=Qe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#B(t);return}this.#N(t)}#N(t){const{isMac:e}=Qe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#N(f),s&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#x=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:b}=f;if(b!==this.#a){xe(f);return}const[v,w]=this.screenToPageTranslation(p-this.#E,m-this.#x);this.#E=p,this.#x=m,this._uiManager.dragSelectedEditors(v,w)},l),window.addEventListener("touchmove",xe,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&u(f),xe(f)},l));const h=f=>{if(!this.#a||this.#a===f.pointerId){u(f);return}xe(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,p=e/r,m=this.x*o,b=this.y*l,v=this.width*o,w=this.height*l;switch(s){case 0:return[m+f+u,l-b-p-w+h,m+f+v+u,l-b-p+h];case 90:return[m+p+u,l-b+f+h,m+p+w+u,l-b+f+v+h];case 180:return[m-f-v+u,l-b+p+h,m-f+u,l-b+p+w+h];case 270:return[m-p-w+u,l-b-f-v+h,m-p+u,l-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,r,o,l]=t,u=o-s,h=l-r;switch(this.rotation){case 0:return[s,e-l,u,h];case 90:return[s,e-r,h,u];case 180:return[o,e-r,u,h];case 270:return[o,e-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Et._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:s,opacity:r,deleted:o,richText:l},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||p,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&r>0&&t<o&&s>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,s){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,h,f,p]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=h/l,r.width=f/o,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#F(),this.removeEditToolbar(),this.#w){for(const t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[s,r,o,l]=this.getPDFRect();return[Et._round(s+(o-s)*t),Et._round(r+(l-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#Y.bind(this),u=this.#G.bind(this),h=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#X.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",Et._l10nResizer[p])}}const s=this.#e[0];let r=0;for(const l of e){if(l===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of e){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Et._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){Et._resizerKeyboardManager.exec(this,t)}#G(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#F()}#X(t){this.#g=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#P(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#F(){this.#v=!1,this.#H(-1),this.#j()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#w||=new Map;const{action:s}=t;let r=this.#w.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(s),this.#w.size===0&&(this.#w=null)},Et._telemetryTimeout),this.#w.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class cF extends Et{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const fS=3285377520,cs=4294901760,Fs=65535;class JA{constructor(t){this.h1=t?t&4294967295:fS,this.h2=t?t&4294967295:fS}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let S=0,A=t.length;S<A;S++){const E=t.charCodeAt(S);E<=255?e[s++]=E:(e[s++]=E>>>8,e[s++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,l=new Uint32Array(e.buffer,0,r);let u=0,h=0,f=this.h1,p=this.h2;const m=3432918353,b=461845907,v=m&Fs,w=b&Fs;for(let S=0;S<r;S++)S&1?(u=l[S],u=u*m&cs|u*v&Fs,u=u<<15|u>>>17,u=u*b&cs|u*w&Fs,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[S],h=h*m&cs|h*v&Fs,h=h<<15|h>>>17,h=h*b&cs|h*w&Fs,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*m&cs|u*v&Fs,u=u<<15|u>>>17,u=u*b&cs|u*w&Fs,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&cs|t*36045&Fs,e=e*4283543511&cs|((e<<16|t>>>16)*2950163797&cs)>>>16,t^=e>>>1,t=t*444984403&cs|t*60499&Fs,e=e*3301882366&cs|((e<<16|t>>>16)*3120437893&cs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const em=Object.freeze({map:null,hash:"",transfer:void 0});class Qm{#t=!1;#e=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#n.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof Et&&this.#s.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof Et)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#n.get(t);let r=!1;if(s!==void 0)for(const[o,l]of Object.entries(e))s[o]!==l&&(r=!0,s[o]=l);else r=!0,this.#n.set(t,e);r&&this.#i(),e instanceof Et&&((this.#s||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tE(this)}get serializable(){if(this.#n.size===0)return em;const t=new Map,e=new JA,s=[],r=Object.create(null);let o=!1;for(const[l,u]of this.#n){const h=u instanceof Et?u.serialize(!1,r):u;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:em}get editorStats(){let t=null;const e=new Map;let s=0,r=0;for(const o of this.#n.values()){if(!(o instanceof Et)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,p]of Object.entries(l)){if(f==="type")continue;let m=h.get(f);m||(m=new Map,h.set(f,m));const b=m.get(p)??0;m.set(p,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const s=this.#s?.get(t);return s?(s.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#s?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#s)for(const e of this.#s.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class tE extends Qm{#t;constructor(t){super();const{map:e,hash:s,transfer:r}=t.serializable,o=structuredClone(e,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){ue("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return zt(this,"modifiedIds",{ids:new Set,hash:""})}}class uF{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Yt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{Mt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}ue("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw Mt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return zt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return zt(this,"isSyncFontLoadingSupported",bn||Qe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Yt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:e,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return zt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(O,D){return O.charCodeAt(D)<<24|O.charCodeAt(D+1)<<16|O.charCodeAt(D+2)<<8|O.charCodeAt(D+3)&255}function r(O,D,z,N){const U=O.substring(0,D),H=O.substring(D+z);return U+N+H}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(O,D){if(++f>30){Mt("Load test font never loaded."),D();return}if(h.font="30px "+O,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,O,D))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,m.length,m);const w=16,S=1482184792;let A=s(b,w);for(o=0,l=m.length-3;o<l;o+=4)A=A-S+s(m,o)|0;o<m.length&&(A=A-S+s(m+"XXX",o)|0),b=r(b,w,4,WP(A));const E=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${m}";src:${E}}`;this.insertRule(T);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const O of[t.loadedName,m]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=O,R.append(D)}this._document.body.append(R),p(m,()=>{R.remove(),e.complete()})}}class hF{#t;constructor(t,e=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${qA(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let r;try{r=t.get(s)}catch(l){Mt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function dF(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(bn)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function fF(n){if(bn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Gl(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Cu(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const nm=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,pF=n=>typeof n=="object"&&typeof n?.name=="string",eE=eF.bind(null,nm,pF);class mF{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,e,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){Mt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Ru={DATA:1,ERROR:2},ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function pS(){}function kn(n){if(n instanceof fi||n instanceof ih||n instanceof aS||n instanceof Ol||n instanceof wp)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new fi(n.message);case"InvalidPDFException":return new ih(n.message);case"PasswordException":return new aS(n.message,n.code);case"ResponseException":return new Ol(n.message,n.status,n.missing);case"UnknownErrorException":return new wp(n.message,n.details)}return new wp(n.message,n.toString())}class ml{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Ru.DATA)r.resolve(t.data);else if(t.callback===Ru.ERROR)r.reject(kn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:s,targetName:r,callback:Ru.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:r,callback:Ru.ERROR,callbackId:t.callbackId,reason:kn(l)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,s,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:ze.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Yt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:ze.CANCEL,streamId:o,reason:kn(f)}),p.promise}},s)}#s(t){const e=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,m){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=p,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:ze.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ze.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){Yt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ze.ERROR,streamId:e,reason:kn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ze.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ze.START_COMPLETE,streamId:e,reason:kn(f)})})}#n(t){const e=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case ze.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(kn(t.reason));break;case ze.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(kn(t.reason));break;case ze.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:ze.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||pS).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ze.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ze.PULL_COMPLETE,streamId:e,reason:kn(f)})});break;case ze.ENQUEUE:if(Yt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ze.CLOSE:if(Yt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#i(l,e);break;case ze.ERROR:Yt(l,"error should have stream controller"),l.controller.error(kn(t.reason)),this.#i(l,e);break;case ze.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(kn(t.reason)),this.#i(l,e);break;case ze.CANCEL:if(!u)break;const h=kn(t.reason);Promise.try(u.onCancel||pS,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ze.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ze.CANCEL_COMPLETE,streamId:e,reason:kn(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#i(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class nE{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ue("Abstract method `_createCanvas` called.")}}class gF extends nE{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class sE{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ue("Abstract method `_fetch` called.")}}class mS extends sE{async _fetch(t){const e=await ao(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Gl(e)}}class iE{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,r,o){return"none"}destroy(t=!1){}}class yF extends iE{#t;#e;#s;#n;#i;#r;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#i=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#s){const t=this.#i.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#i.createElementNS(ci,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#i.createElementNS(ci,"defs"),t.append(s),s.append(this.#s),this.#i.body.append(t)}return this.#s}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=h[m]/255;const p=f.join(",");return[p,p,p]}const[e,s,r]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=e[h]/255,l[h]=s[h]/255,u[h]=r[h]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#i.URL;e!==this.#i.baseURI&&(Xl(e)?Mt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=qm(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[s,r,o]=this.#d(t),l=t.length===1?s:`${s}${r}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#a++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(l,h);const f=this.#p(u);return this.#m(s,r,o,f),h}addHCMFilter(t,e){const s=`${t}-${e}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!t||!e))return o.url;const l=this.#v(t);t=gt.makeHexColor(...l);const u=this.#v(e);if(e=gt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const h=new Array(256);for(let v=0;v<=255;v++){const w=v/255;h[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#n}_hcm_filter`,m=o.filter=this.#p(p);this.#m(f,f,f,m),this.#g(m);const b=(v,w)=>{const S=l[v]/255,A=u[v]/255,E=new Array(w+1);for(let T=0;T<=w;T++)E[T]=S+T/w*(A-S);return E.join(",")};return this.#m(b(0,5),b(1,5),b(2,5),m),o.url=this.#h(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[s]=this.#d([t]),r=`alpha_${s}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#p(o);return this.#y(s,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#p(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,e,s,r,o){const l=`${e}-${s}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!e||!s))return u.url;const[h,f]=[e,s].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[r,o].map(this.#v.bind(this));m<p&&([p,m,b,v]=[m,p,v,b]),this.#l.style.color="";const w=(E,T,R)=>{const O=new Array(256),D=(m-p)/R,z=E/255,N=(T-E)/(255*R);let U=0;for(let H=0;H<=R;H++){const V=Math.round(p+H*D),B=z+H*N;for(let W=U;W<=V;W++)O[W]=B;U=V+1}for(let H=U;H<256;H++)O[H]=O[U-1];return O.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,A=u.filter=this.#p(S);return this.#g(A),this.#m(w(b[0],v[0],5),w(b[1],v[1],5),w(b[2],v[2],5),A),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#r?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#a=0)}#f(t){const e=this.#i.createElementNS(ci,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#i.createElementNS(ci,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#i.createElementNS(ci,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,s){const r=this.#i.createElementNS(ci,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#m(t,e,s,r){const o=this.#i.createElementNS(ci,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",s)}#y(t,e){const s=this.#i.createElementNS(ci,"feComponentTransfer");e.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,oo(getComputedStyle(this.#l).getPropertyValue("color"))}}class rE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ue("Abstract method `_fetch` called.")}}class gS extends rE{async _fetch(t){const e=await ao(t,"arraybuffer");return new Uint8Array(e)}}class aE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ue("Abstract method `_fetch` called.")}}class yS extends aE{async _fetch(t){const e=await ao(t,"arraybuffer");return new Uint8Array(e)}}bn&&Mt("Please use the `legacy` build in Node.js environments.");async function Jm(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class bF extends iE{}class vF extends nE{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class wF extends sE{async _fetch(t){return Jm(t)}}class SF extends rE{async _fetch(t){return Jm(t)}}class xF extends aE{async _fetch(t){return Jm(t)}}const Ma="__forcedDependency",{floor:bS,ceil:vS}=Math;function Ou(n,t,e,s,r,o){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],s),n[t*4+2]=Math.max(n[t*4+2],r),n[t*4+3]=Math.max(n[t*4+3],o)}const sm=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class AF{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===sm}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Du=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e};class EF{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ma]:[]};#s=new Map;#n=[];#i=[];#r=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#p;#u;#m;constructor(t,e,s=!1){this.#f=t.width,this.#g=t.height,this.#y(e),s&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),e&&e.length>0?(this.#u.set(e),this.#u.fill(sm,e.length)):this.#u.fill(sm)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ma]:{__proto__:this.#e[Ma]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(Du(this.#m,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Du(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#i.push(t),this}endMarkedContent(t){const e=this.#i.pop();return e!==void 0&&(Du(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(gt.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#s.set(t,e),this}recordSimpleDataFromNamed(t,e,s){this.#t[t]=this.#s.get(e)??s}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Ma,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Ma,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,s,r,o,l){const u=gt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];gt.axialAlignedBoundingBox([s,o,r,l],u,h);const f=gt.intersect(this.#a,h);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,s,r,o,l){const u=this.#a;if(u[0]===1/0)return this;const h=gt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(u[0]===-1/0)return gt.axialAlignedBoundingBox([s,o,r,l],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return gt.axialAlignedBoundingBox([s,o,r,l],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,s,r=1,o=0,l=0,u){const h=s.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(s),f!==!1&&(p=[0,0,0,0],gt.axialAlignedBoundingBox(h,s.fontMatrix,p),(r!==1||o!==0||l!==0)&&gt.scaleMinMax([r,0,0,-r,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const m=u();return h&&p&&f===void 0&&(f=p[0]<=o-m.actualBoundingBoxLeft&&p[2]>=o+m.actualBoundingBoxRight&&p[1]<=l-m.actualBoundingBoxAscent&&p[3]>=l+m.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const s=this.#l,r=this.#t,o=this.#e;for(const l of e)l in this.#t?s.add(r[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,e){return this.#s.has(e)&&this.#l.add(this.#s.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Ma]),this.#m){const s=Du(this.#m,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#i.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=bS(this.#o[0]*256/this.#f),r=bS(this.#o[1]*256/this.#g),o=vS(this.#o[2]*256/this.#f),l=vS(this.#o[3]*256/this.#g);Ou(this.#p,t,s,r,o,l);for(const u of this.#l)u!==t&&Ou(this.#p,u,s,r,o,l);for(const u of this.#n)u!==t&&Ou(this.#p,u,s,r,o,l);for(const u of this.#i)u!==t&&Ou(this.#p,u,s,r,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const s=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new AF(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class oh{#t;#e;#s;#n=0;#i=0;constructor(t,e,s){if(t instanceof oh&&t.#s===!!s)return t;this.#t=t,this.#e=e,this.#s=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#i++,this.#t.save(this.#e),this}restore(t){return this.#i>0&&(this.#t.restore(this.#e),this.#i--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,s){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#s||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,s,r,o,l){return this.#s||this.#t.recordClipBox(this.#e,e,s,r,o,l),this}recordBBox(t,e,s,r,o,l){return this.#s||this.#t.recordBBox(this.#e,e,s,r,o,l),this}recordCharacterBBox(t,e,s,r,o,l,u){return this.#s||this.#t.recordCharacterBBox(this.#e,e,s,r,o,l,u),this}recordFullPageBBox(t){return this.#s||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#s||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const us={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},on={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function im(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,s),n.clip(r)}class tg{isModifyingCurrentTransform(){return!1}getPattern(){ue("Abstract method `getPattern` called.")}}class _F extends tg{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,r){let o;if(r===on.STROKE||r===on.FILL){const l=e.current.getClippedPathBoundingBox(r,Se(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),s=gt.transform(s,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),im(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(s);o.setTransform(m)}else im(t,this._bbox),o=this._createGradient(t);return o}}function Ap(n,t,e,s,r,o,l,u){const h=t.coords,f=t.colors,p=n.data,m=n.width*4;let b;h[e+1]>h[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b),h[s+1]>h[r+1]&&(b=s,s=r,r=b,b=l,l=u,u=b),h[e+1]>h[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b);const v=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,A=(h[s+1]+t.offsetY)*t.scaleY,E=(h[r]+t.offsetX)*t.scaleX,T=(h[r+1]+t.offsetY)*t.scaleY;if(w>=T)return;const R=f[o],O=f[o+1],D=f[o+2],z=f[l],N=f[l+1],U=f[l+2],H=f[u],V=f[u+1],B=f[u+2],W=Math.round(w),at=Math.round(T);let ot,dt,L,$,it,ft,_t,M;for(let X=W;X<=at;X++){if(X<A){const St=X<w?0:(w-X)/(w-A);ot=v-(v-S)*St,dt=R-(R-z)*St,L=O-(O-N)*St,$=D-(D-U)*St}else{let St;X>T?St=1:A===T?St=0:St=(A-X)/(A-T),ot=S-(S-E)*St,dt=z-(z-H)*St,L=N-(N-V)*St,$=U-(U-B)*St}let nt;X<w?nt=0:X>T?nt=1:nt=(w-X)/(w-T),it=v-(v-E)*nt,ft=R-(R-H)*nt,_t=O-(O-V)*nt,M=D-(D-B)*nt;const ct=Math.round(Math.min(ot,it)),vt=Math.round(Math.max(ot,it));let xt=m*X+ct*4;for(let St=ct;St<=vt;St++)nt=(ot-St)/(ot-it),nt<0?nt=0:nt>1&&(nt=1),p[xt++]=dt-(dt-ft)*nt|0,p[xt++]=L-(L-_t)*nt|0,p[xt++]=$-($-M)*nt|0,p[xt++]=255}}function TF(n,t,e){const s=t.coords,r=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let m=0;m<f;m++,p++)Ap(n,e,s[p],s[p+1],s[p+u],r[p],r[p+1],r[p+u]),Ap(n,e,s[p+u+1],s[p+1],s[p+u],r[p+u+1],r[p+1],r[p+u])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)Ap(n,e,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class CF extends tg{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),v=f/m,w=p/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/v,scaleY:1/w},A=m+4,E=b+4,T=s.getCanvas("mesh",A,E),R=T.context,O=R.createImageData(m,b);if(e){const z=O.data;for(let N=0,U=z.length;N<U;N+=4)z[N]=e[0],z[N+1]=e[1],z[N+2]=e[2],z[N+3]=255}for(const z of this._figures)TF(O,z,S);return R.putImageData(O,2,2),{canvas:T.canvas,offsetX:u-2*v,offsetY:h-2*w,scaleX:v,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,r){im(t,this._bbox);const o=new Float32Array(2);if(r===on.SHADING)gt.singularValueDecompose2dScale(Se(t),o);else if(this.matrix){gt.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;gt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=h}else gt.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,r===on.SHADING?null:this._background,e.cachedCanvases);return r!==on.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class RF extends tg{getPattern(){return"hotpink"}}function OF(n){switch(n[0]){case"RadialAxial":return new _F(n);case"Mesh":return new CF(n);case"Dummy":return new RF}throw new Error(`Unknown IR type: ${n[0]}`)}const wS={COLORED:1,UNCOLORED:2};class eg{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:s,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Dh("TilingType: "+l);const m=s[0],b=s[1],v=s[2],w=s[3],S=v-m,A=w-b,E=new Float32Array(2);gt.singularValueDecompose2dScale(this.matrix,E);const[T,R]=E;gt.singularValueDecompose2dScale(this.baseTransform,E);const O=T*E[0],D=R*E[1];let z=S,N=A,U=!1,H=!1;const V=Math.ceil(f*O),B=Math.ceil(p*D),W=Math.ceil(S*O),at=Math.ceil(A*D);V>=W?z=f:U=!0,B>=at?N=p:H=!0;const ot=this.getSizeAndScale(z,this.ctx.canvas.width,O),dt=this.getSizeAndScale(N,this.ctx.canvas.height,D),L=t.cachedCanvases.getCanvas("pattern",ot.size,dt.size),$=L.context,it=h.createCanvasGraphics($,e);if(it.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(it,o,u),$.translate(-ot.scale*m,-dt.scale*b),it.transform(0,ot.scale,0,0,dt.scale,0,0),$.save(),it.dependencyTracker?.save(),this.clipBbox(it,m,b,v,w),it.baseTransform=Se(it.ctx),it.executeOperatorList(r),it.endDrawing(),it.dependencyTracker?.restore(),$.restore(),U||H){const ft=L.canvas;U&&(z=f),H&&(N=p);const _t=this.getSizeAndScale(z,this.ctx.canvas.width,O),M=this.getSizeAndScale(N,this.ctx.canvas.height,D),X=_t.size,nt=M.size,ct=t.cachedCanvases.getCanvas("pattern-workaround",X,nt),vt=ct.context,xt=U?Math.floor(S/f):0,St=H?Math.floor(A/p):0;for(let Jt=0;Jt<=xt;Jt++)for(let jt=0;jt<=St;jt++)vt.drawImage(ft,X*Jt,nt*jt,X,nt,0,0,X,nt);return{canvas:ct.canvas,scaleX:_t.scale,scaleY:M.scale,offsetX:m,offsetY:b}}return{canvas:L.canvas,scaleX:ot.scale,scaleY:dt.scale,offsetX:m,offsetY:b}}getSizeAndScale(t,e,s){const r=Math.max(eg.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,e,s,r,o){const l=r-e,u=o-s;t.ctx.rect(e,s,l,u),gt.axialAlignedBoundingBox([e,s,r,o],Se(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const r=t.ctx,o=t.current;switch(e){case wS.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case wS.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new KP(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,r,o){let l=s;r!==on.SHADING&&(l=gt.transform(l,e.baseTransform),this.matrix&&(l=gt.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function DF({src:n,srcPos:t=0,dest:e,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Qe.isLittleEndian?4278190080:255,[h,f]=l?[o,u]:[u,o],p=s>>3,m=s&7,b=n.length;e=new Uint32Array(e.buffer);let v=0;for(let w=0;w<r;w++){for(const A=t+p;t<A;t++){const E=t<b?n[t]:255;e[v++]=E&128?f:h,e[v++]=E&64?f:h,e[v++]=E&32?f:h,e[v++]=E&16?f:h,e[v++]=E&8?f:h,e[v++]=E&4?f:h,e[v++]=E&2?f:h,e[v++]=E&1?f:h}if(m===0)continue;const S=t<b?n[t++]:255;for(let A=0;A<m;A++)e[v++]=S&1<<7-A?f:h}return{srcPos:t,destPos:v}}const SS=16,xS=100,kF=15,AS=10,Mn=16,Ep=new DOMMatrix,Yn=new Float32Array(2),ja=new Float32Array([1/0,1/0,-1/0,-1/0]);function MF(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},n.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},n.transform=function(e,s,r,o,l,u){t.transform(e,s,r,o,l,u),this.__originalTransform(e,s,r,o,l,u)},n.setTransform=function(e,s,r,o,l,u){t.setTransform(e,s,r,o,l,u),this.__originalSetTransform(e,s,r,o,l,u)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,r,o,l,u){t.bezierCurveTo(e,s,r,o,l,u),this.__originalBezierCurveTo(e,s,r,o,l,u)},n.rect=function(e,s,r,o){t.rect(e,s,r,o),this.__originalRect(e,s,r,o)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class NF{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,s)):(r=this.canvasFactory.create(e,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ku(n,t,e,s,r,o,l,u,h,f){const[p,m,b,v,w,S]=Se(n);if(m===0&&b===0){const T=l*p+w,R=Math.round(T),O=u*v+S,D=Math.round(O),z=(l+h)*p+w,N=Math.abs(Math.round(z)-R)||1,U=(u+f)*v+S,H=Math.abs(Math.round(U)-D)||1;return n.setTransform(Math.sign(p),0,0,Math.sign(v),R,D),n.drawImage(t,e,s,r,o,0,0,N,H),n.setTransform(p,m,b,v,w,S),[N,H]}if(p===0&&v===0){const T=u*b+w,R=Math.round(T),O=l*m+S,D=Math.round(O),z=(u+f)*b+w,N=Math.abs(Math.round(z)-R)||1,U=(l+h)*m+S,H=Math.abs(Math.round(U)-D)||1;return n.setTransform(0,Math.sign(m),Math.sign(b),0,R,D),n.drawImage(t,e,s,r,o,0,0,H,N),n.setTransform(p,m,b,v,w,S),[H,N]}n.drawImage(t,e,s,r,o,l,u,h,f);const A=Math.hypot(p,m),E=Math.hypot(b,v);return[A*h,E*f]}class ES{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Jp;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=an.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,s){s?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ja.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=on.FILL,e=null){const s=this.minMax.slice();if(t===on.STROKE){e||ue("Stroke bounding box must include transform."),gt.singularValueDecompose2dScale(e,Yn);const r=Yn[0]*this.lineWidth/2,o=Yn[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=gt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ja,0)}getClippedPathBoundingBox(t=on.FILL,e=null){return gt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function _S(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,r=e%Mn,o=(e-r)/Mn,l=r===0?o:o+1,u=n.createImageData(s,Mn);let h=0,f;const p=t.data,m=u.data;let b,v,w,S;if(t.kind===Sl.GRAYSCALE_1BPP){const A=p.byteLength,E=new Uint32Array(m.buffer,0,m.byteLength>>2),T=E.length,R=s+7>>3,O=4294967295,D=Qe.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(w=b<o?Mn:r,f=0,v=0;v<w;v++){const z=A-h;let N=0;const U=z>R?s:z*8-7,H=U&-8;let V=0,B=0;for(;N<H;N+=8)B=p[h++],E[f++]=B&128?O:D,E[f++]=B&64?O:D,E[f++]=B&32?O:D,E[f++]=B&16?O:D,E[f++]=B&8?O:D,E[f++]=B&4?O:D,E[f++]=B&2?O:D,E[f++]=B&1?O:D;for(;N<U;N++)V===0&&(B=p[h++],V=128),E[f++]=B&V?O:D,V>>=1}for(;f<T;)E[f++]=0;n.putImageData(u,0,b*Mn)}}else if(t.kind===Sl.RGBA_32BPP){for(v=0,S=s*Mn*4,b=0;b<o;b++)m.set(p.subarray(h,h+S)),h+=S,n.putImageData(u,0,v),v+=Mn;b<l&&(S=s*r*4,m.set(p.subarray(h,h+S)),n.putImageData(u,0,v))}else if(t.kind===Sl.RGB_24BPP)for(w=Mn,S=s*w,b=0;b<l;b++){for(b>=o&&(w=r,S=s*w),f=0,v=S;v--;)m[f++]=p[h++],m[f++]=p[h++],m[f++]=p[h++],m[f++]=255;n.putImageData(u,0,b*Mn)}else throw new Error(`bad image kind: ${t.kind}`)}function TS(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,r=e%Mn,o=(e-r)/Mn,l=r===0?o:o+1,u=n.createImageData(s,Mn);let h=0;const f=t.data,p=u.data;for(let m=0;m<l;m++){const b=m<o?Mn:r;({srcPos:h}=DF({src:f,srcPos:h,dest:p,width:s,height:b,nonBlackColor:0})),n.putImageData(u,0,m*Mn)}}function al(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Mu(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function CS(n,t){if(t)return!0;gt.singularValueDecompose2dScale(n,Yn);const e=Math.fround(Ss.pixelRatio*Fr.PDF_TO_CSS_UNITS);return Yn[0]<=e&&Yn[1]<=e}const LF=["butt","round","square"],PF=["miter","round","bevel"],FF={},RS={};class Ha{constructor(t,e,s,r,o,{optionalContentConfig:l,markedContentStack:u=null},h,f,p){this.ctx=t,this.current=new ES(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new NF(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,s=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):s}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Se(this.compositeCtx))}this.ctx.save(),Mu(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Se(this.ctx)}executeOperatorList(t,e,s,r,o){const l=t.argsArray,u=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const p=f-h>AS&&typeof s=="function",m=p?Date.now()+kF:0;let b=0;const v=this.commonObjs,w=this.objs;let S,A;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!o||o(h))if(S=u[h],A=l[h]??null,S!==Za.dependency)A===null?this[S](h):this[S](h,...A);else for(const E of A){this.dependencyTracker?.recordNamedData(E,h);const T=E.startsWith("g_")?v:w;if(!T.has(E))return T.get(E,s),h}if(h++,h===f)return h;if(p&&++b>AS){if(Date.now()>m)return s(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=s,h=r,f="prescale1",p,m;for(;o>2&&u>1||l>2&&h>1;){let b=u,v=h;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/v),p=this.cachedCanvases.getCanvas(f,b,v),m=p.context,m.clearRect(0,0,b,v),m.drawImage(t,0,0,u,h,0,0,b,v),t=p.canvas,u=b,h=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){const s=this.ctx,{width:r,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,h=Se(s);let f,p,m,b;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(V),f||(f=new Map,this._cachedBitmapsMap.set(V,f));const B=f.get(p);if(B&&!u){const W=Math.round(Math.min(h[0],h[2])+h[4]),at=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,us.transformAndFill),{canvas:B,offsetX:W,offsetY:at}}m=B}m||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),TS(b.context,e));let v=gt.transform(h,[1/r,0,0,-1/o,0,0]);v=gt.transform(v,[1,0,0,1,0,-o]);const w=ja.slice();gt.axialAlignedBoundingBox([0,0,r,o],v,w);const[S,A,E,T]=w,R=Math.round(E-S)||1,O=Math.round(T-A)||1,D=this.cachedCanvases.getCanvas("fillCanvas",R,O),z=D.context,N=S,U=A;z.translate(-N,-U),z.transform(...v),m||(m=this._scaleImage(b.canvas,Ps(z)),m=m.img,f&&u&&f.set(p,m)),z.imageSmoothingEnabled=CS(Se(z),e.interpolate),ku(z,m,0,0,m.width,m.height,0,0,r,o),z.globalCompositeOperation="source-in";const H=gt.transform(Ps(z),[1,0,0,1,-N,-U]);return z.fillStyle=u?l.getPattern(s,this,H,on.FILL,t):l,z.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),this.dependencyTracker?.recordDependencies(t,us.transformAndFill),{canvas:D.canvas,offsetX:Math.round(N),offsetY:Math.round(U)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=LF[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=PF[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=s)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[s,r]of e)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),al(this.suspendedCtx,l),MF(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),al(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,r){const o=r[0],l=r[1],u=r[2]-o,h=r[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,s,u,h,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,r,o,l,u,h,f,p,m){let b=t.canvas,v=h-p,w=f-m;if(l)if(v<0||w<0||v+s>b.width||w+r>b.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,r),E=A.context;E.drawImage(b,-v,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,s,r),E.globalCompositeOperation="source-over",b=A.canvas,v=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(v,w,s,r),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(v,w,s,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,f,s,r),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,v,w,s,r,h,f,s,r),e.restore()}save(t){this.inSMaskMode&&al(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&al(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,r,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,s,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Za.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let u=0,h=o.length;u<h;)switch(o[u++]){case _u.moveTo:l.moveTo(o[u++],o[u++]);break;case _u.lineTo:l.lineTo(o[u++],o[u++]);break;case _u.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case _u.closePath:l.closePath();break;default:Mt(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}gt.axialAlignedBoundingBox(r,Se(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Ps(r),on.STROKE,t),l){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,us.stroke),s&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(on.STROKE,Se(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,s=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,Ps(r),on.FILL,t),f){const p=new Path2D;p.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,us.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,us.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=FF}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=RS}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:f,path:p}of e)p&&r.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||Jp,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Mt("Invalid font matrix for font "+e),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let p=s;s<SS?p=SS:s>xS&&(p=xS),this.current.fontSizeScale=s/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,e,s){this.setLeading(t,-s),this.moveText(t,e,s)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=e,s.textMatrixScale=Math.hypot(e[0],e[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#s(t,e,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),r}paintChar(t,e,s,r,o,l){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,b=p&an.FILL_STROKE_MASK,v=!!(p&an.ADD_TO_PATH_FLAG),w=h.patternFill&&!f.missingFile,S=h.patternStroke&&!f.missingFile;let A;if((f.disableFontFace||v||w||S)&&!f.missingFile&&(A=f.getPathGenerator(this.commonObjs,e)),A&&(f.disableFontFace||w||S)){u.save(),u.translate(s,r),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(b===an.FILL||b===an.FILL_STROKE)if(o){E=u.getTransform(),u.setTransform(...o);const T=this.#s(A,E,o);u.fill(T)}else u.fill(A);if(b===an.STROKE||b===an.FILL_STROKE)if(l){E||=u.getTransform(),u.setTransform(...l);const{a:T,b:R,c:O,d:D}=E,z=gt.inverseTransform(l),N=gt.transform([T,R,O,D,0,0],z);gt.singularValueDecompose2dScale(N,Yn),u.lineWidth*=Math.max(Yn[0],Yn[1])/m,u.stroke(this.#s(A,E,l))}else u.lineWidth/=m,u.stroke(A);u.restore()}else(b===an.FILL||b===an.FILL_STROKE)&&(u.fillText(e,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,s,r,()=>u.measureText(e))),(b===an.STROKE||b===an.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,m,s,r,()=>u.measureText(e)).recordDependencies(t,us.stroke),u.strokeText(e,s,r));v&&((this.pendingTextPaths||=[]).push({transform:Se(u),x:s,y:r,fontSize:m,path:A}),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){s=!0;break}return zt(this,"isFontSubpixelAAEnabled",s)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,us.showText).resetBBox(t),this.current.textRenderingMode&an.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,h=s.charSpacing,f=s.wordSpacing,p=s.fontDirection,m=s.textHScale*p,b=e.length,v=r.vertical,w=v?1:-1,S=r.defaultVMetrics,A=o*s.fontMatrix[0],E=s.textRenderingMode===an.FILL&&!r.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),p>0?l.scale(m,-1):l.scale(m,1);let T,R;if(s.patternFill){l.save();const U=s.fillColor.getPattern(l,this,Ps(l),on.FILL,t);T=Se(l),l.restore(),l.fillStyle=U}if(s.patternStroke){l.save();const U=s.strokeColor.getPattern(l,this,Ps(l),on.STROKE,t);R=Se(l),l.restore(),l.strokeStyle=U}let O=s.lineWidth;const D=s.textMatrixScale;if(D===0||O===0){const U=s.textRenderingMode&an.FILL_STROKE_MASK;(U===an.STROKE||U===an.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=D;if(u!==1&&(l.scale(u,u),O/=u),l.lineWidth=O,r.isInvalidPDFjsFont){const U=[];let H=0;for(const B of e)U.push(B.unicode),H+=B.width;const V=U.join("");if(l.fillText(V,0,0),this.dependencyTracker!==null){const B=l.measureText(V);this.dependencyTracker.recordBBox(t,this.ctx,-B.actualBoundingBoxLeft,B.actualBoundingBoxRight,-B.actualBoundingBoxAscent,B.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=H*A*m,l.restore(),this.compose();return}let z=0,N;for(N=0;N<b;++N){const U=e[N];if(typeof U=="number"){z+=w*U*o/1e3;continue}let H=!1;const V=(U.isSpace?f:0)+h,B=U.fontChar,W=U.accent;let at,ot,dt=U.width;if(v){const it=U.vmetric||S,ft=-(U.vmetric?it[1]:dt*.5)*A,_t=it[2]*A;dt=it?-it[0]:dt,at=ft/u,ot=(z+_t)/u}else at=z/u,ot=0;let L;if(r.remeasure&&dt>0){L=l.measureText(B);const it=L.width*1e3/o*u;if(dt<it&&this.isFontSubpixelAAEnabled){const ft=dt/it;H=!0,l.save(),l.scale(ft,1),at/=ft}else dt!==it&&(at+=(dt-it)/2e3*o/u)}if(this.contentVisible&&(U.isInFont||r.missingFile)){if(E&&!W)l.fillText(B,at,ot),this.dependencyTracker?.recordCharacterBBox(t,l,L?{bbox:null}:r,o/u,at,ot,()=>L??l.measureText(B));else if(this.paintChar(t,B,at,ot,T,R),W){const it=at+o*W.offset.x/u,ft=ot-o*W.offset.y/u;this.paintChar(t,W.fontChar,it,ft,T,R)}}const $=v?dt*A-V*p:dt*A+V*p;z+=$,H&&l.restore()}v?s.y-=z:s.x+=z*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const s=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,h=o.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,m=r.textHScale*u,b=r.fontMatrix||Jp,v=e.length,w=r.textRenderingMode===an.INVISIBLE;let S,A,E,T;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(m,u);const R=this.dependencyTracker;for(this.dependencyTracker=R?new oh(R,t):null,S=0;S<v;++S){if(A=e[S],typeof A=="number"){T=h*A*l/1e3,this.ctx.translate(T,0),r.x+=T*m;continue}const O=(A.isSpace?p:0)+f,D=o.charProcOperatorList[A.operatorListId];D?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(D),this.restore()):Mt(`Type3 character "${A.operatorListId}" is not available.`);const z=[A.width,0];gt.applyTransform(z,b),E=z[0]*l+O,s.translate(E,0),r.x+=E*m}s.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,s){}setCharWidthAndBounds(t,e,s,r,o,l,u){const h=new Path2D;h.rect(r,o,l-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let s;if(e[0]==="TilingPattern"){const r=this.baseTransform||Se(this.ctx),o={createCanvasGraphics:(l,u)=>new Ha(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new oh(this.dependencyTracker,u,!0):null)};s=new eg(e,this.ctx,o,r)}else s=this._getPattern(t,e[1],e[2]);return s}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,s=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=OF(this.getObject(t,e)),this.cachedPatterns.set(e,r)),s&&(r.matrix=s),r}shadingFill(t,e){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,e);s.fillStyle=r.getPattern(s,this,Ps(s),on.SHADING,t);const o=Ps(s);if(o){const{width:l,height:u}=s.canvas,h=ja.slice();gt.axialAlignedBoundingBox([0,0,l,u],o,h);const[f,p,m,b]=h;this.ctx.fillRect(f,p,m-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,us.transform).recordDependencies(t,us.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ue("Should not call beginInlineImage")}beginImageData(){ue("Should not call beginImageData")}paintFormXObjectBegin(t,e,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Se(this.ctx),s)){gt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,l,u]=s,h=new Path2D;h.rect(r,o,l-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||Dh("TODO: Support non-isolated groups."),e.knockout&&Mt("Knockout groups not supported.");const r=Se(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=ja.slice();gt.axialAlignedBoundingBox(e.bbox,Se(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=gt.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(m,f,p),v=b.context;v.translate(-u,-h),v.transform(...r);let w=new Path2D;const[S,A,E,T]=e.bbox;if(w.rect(S,A,E-S,T-A),e.matrix){const R=new Path2D;R.addPath(w,new DOMMatrix(e.matrix)),w=R}v.clip(w),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),al(s,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Se(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ja.slice();gt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,s,r,o,l){if(this.#t(),Mu(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,gt.singularValueDecompose2dScale(Se(this.ctx),Yn);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),m=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(Yn[0],0,0,-Yn[1],0,h*Yn[1]),Mu(this.ctx)}else{Mu(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,h),this.ctx.clip(f)}}this.current=new ES(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(t,e.data,e),e.count=s;const r=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s,r=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=Se(h);h.transform(s,r,o,l,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,b=u.length;m<b;m+=2){const v=gt.transform(f,[s,r,o,l,u[m],u[m+1]]);h.drawImage(p.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+p.canvas.width,v[5],v[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,us.transformAndFill);for(const l of e){const{data:u,width:h,height:f,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=m.context;b.save();const v=this.getObject(t,u,l);TS(b,v),b.globalCompositeOperation="source-in",b.fillStyle=o?r.getPattern(b,this,Ps(s),on.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),s.save(),s.transform(...p),s.scale(1,-1),ku(s,m.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,h,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s){Mt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,e,s,r,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Mt("Dependent image isn't ready yet");return}const u=l.width,h=l.height,f=[];for(let p=0,m=o.length;p<m;p+=2)f.push({transform:[s,0,0,r,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const s=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",s,r).context;_S(p,e),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,Ps(o));o.imageSmoothingEnabled=CS(Se(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-r,0).recordDependencies(t,us.imageXObject).recordOperation(t),ku(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;_S(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)r.save(),r.transform(...l.transform),r.scale(1,-1),ku(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,us.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,s){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,s){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===RS?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Se(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:r,d:o}=this.ctx.getTransform();let l,u;if(s===0&&r===0){const h=Math.abs(e),f=Math.abs(o);if(h===f)if(t===0)l=u=1/h;else{const p=h*t;l=u=p<1?1/p:1}else if(t===0)l=1/h,u=1/f;else{const p=h*t,m=f*t;l=p<1?1/p:1,u=m<1?1/m:1}}else{const h=Math.abs(e*o-s*r),f=Math.hypot(e,s),p=Math.hypot(r,o);if(t===0)l=p/h,u=f/h;else{const m=t*h;l=p>m?p/m:1,u=f>m?f/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();e&&s.save(),s.scale(o,l),Ep.a=1/o,Ep.d=1/l;const h=new Path2D;if(h.addPath(t,Ep),u.length>0){const f=Math.max(o,l);s.setLineDash(u.map(p=>p/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(h),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const n in Za)Ha.prototype[n]!==void 0&&(Ha.prototype[Za[n]]=Ha.prototype[n]);class $a{#t;#e;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,s={};let r=0;for(const f of $a.strings){const p=e.encode(t[f]);s[f]=p,r+=4+p.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of $a.strings){const p=s[f],m=p.length;u.setUint32(h,m),l.set(p,h+4),h+=4+m}return Yt(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}#n(t){Yt(t<$a.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Va{#t;#e;#s;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,s={};let r=0;for(const b of Va.strings){const v=e.encode(t[b]);s[b]=v,r+=4+v.length}r+=4;let o,l,u=1+r;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let m=0;p.setUint8(m++,t.guessFallback?1:0),p.setUint32(m,0),m+=4,r=0;for(const b of Va.strings){const v=s[b],w=v.length;r+=4+w,p.setUint32(m,w),f.set(v,m+4),m+=4+w}return p.setUint32(m-r-4,r),t.style&&(p.setUint32(m,o.length),f.set(o,m+4),m+=4+o.length,p.setUint32(m,l.length),f.set(l,m+4),m+=4+l.length),Yt(m<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Yt(t<Va.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),s=this.#s.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),o=this.#s.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:o}}}class ae{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#s=this.#e+1+8;static#n=this.#s+1+48;static#i=this.#n+1+6;#r;#a;#o;constructor({data:t,extra:e}){this.#r=t,this.#a=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){Yt(t<ae.bools.length,"Invalid boolean index");const e=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(e)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Yt(t<ae.numbers.length,"Invalid number index"),this.#o.getFloat64(ae.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=ae.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=ae.#s;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=ae.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Yt(t<ae.strings.length,"Invalid string index");let e=ae.#i+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const s=this.#o.getUint32(e),r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,e+4,s)),this.#a.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=ae.#i;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#r,t+4,o)}clearData(){let t=ae.#i;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=ae.#i;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#r,t+4,r)),new $a(o.buffer)}get systemFontInfo(){let t=ae.#i;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,t+4,s)),new Va(r.buffer)}static write(t){const e=t.systemFontInfo?Va.write(t.systemFontInfo):null,s=t.cssFontInfo?$a.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const S of ae.strings)o[S]=r.encode(t[S]),l+=4+o[S].length;const u=ae.#i+4+l+4+(e?e.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let m=0;const b=ae.bools.length;let v=0,w=0;for(let S=0;S<b;S++){const A=t[ae.bools[S]];v|=(A===void 0?0:A?2:1)<<w,w+=2,(w===8||S===b-1)&&(p.setUint8(m++,v),v=0,w=0)}Yt(m===ae.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of ae.numbers)p.setFloat64(m,t[S]),m+=8;if(Yt(m===ae.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(m++,4);for(const S of t.bbox)p.setInt16(m,S,!0),m+=2}else p.setUint8(m++,0),m+=8;if(Yt(m===ae.#s,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(m++,6);for(const S of t.fontMatrix)p.setFloat64(m,S,!0),m+=8}else p.setUint8(m++,0),m+=48;if(Yt(m===ae.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(m++,1);for(const S of t.defaultVMetrics)p.setInt16(m,S,!0),m+=2}else p.setUint8(m++,0),m+=6;Yt(m===ae.#i,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(ae.#i,0),m+=4;for(const S of ae.strings){const A=o[S],E=A.length;p.setUint32(m,E),f.set(A,m+4),m+=4+E}if(p.setUint32(ae.#i,m-ae.#i-4),!e)p.setUint32(m,0),m+=4;else{const S=e.byteLength;p.setUint32(m,S),Yt(m+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),m+4),m+=4+S}if(!s)p.setUint32(m,0),m+=4;else{const S=s.byteLength;p.setUint32(m,S),Yt(m+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),m+4),m+=4+S}return t.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,t.data.length),f.set(t.data,m+4),m+=4+t.data.length),Yt(m<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(m)}}class Xi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class zF{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Fa=Symbol("INTERNAL");class jF{#t=!1;#e=!1;#s=!1;#n=!0;constructor(t,{name:e,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&qn.DISPLAY),this.#e=!!(t&qn.PRINT),this.name=e,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==Fa&&ue("Internal method `_setVisible` called."),this.#s=s,this.#n=e}}class BF{#t=null;#e=new Map;#s=null;#n=null;constructor(t,e=qn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new jF(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Fa,!1);for(const s of t.on)this.#e.get(s)._setVisible(Fa,!0);for(const s of t.off)this.#e.get(s)._setVisible(Fa,!1);this.#s=this.getHash()}}#i(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let r=1;r<e;r++){const o=t[r];let l;if(Array.isArray(o))l=this.#i(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return Mt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Dh("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Mt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#i(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Mt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Mt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Mt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Mt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Mt(`Unknown optional content policy ${t.policy}.`),!0}return Mt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const r=this.#e.get(t);if(!r){Mt(`Optional content group not found: ${t}`);return}if(s&&e&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Fa,!1,!0);r._setVisible(Fa,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new JA;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class IF{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Yt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Yt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Yt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new UF(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new HF(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class UF{constructor(t,e,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=Mh(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class HF{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function $F(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),o(p)}if(e=l(n),e){const p=f(e);return o(p)}if(e=s("filename","i").exec(n),e){e=e[1];let p=u(e);return p=f(p),o(p)}function s(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const b=new TextDecoder(p,{fatal:!0}),v=Gl(m);m=b.decode(v),t=!1}catch{}}return m}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function l(p){const m=[];let b;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(p))!==null;){let[,S,A,E]=b;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[A,E]}const w=[];for(let S=0;S<m.length&&S in m;++S){let[A,E]=m[S];E=u(E),A&&(E=unescape(E),S===0&&(E=h(E))),w.push(E)}return w.join("")}function u(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let b=0;b<m.length;++b){const v=m[b].indexOf('"');v!==-1&&(m[b]=m[b].slice(0,v),m.length=b+1),m[b]=m[b].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function h(p){const m=p.indexOf("'");if(m===-1)return p;const b=p.slice(0,m),w=p.slice(m+1).replace(/^[^']*'/,"");return r(b,w)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,b,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,A){return String.fromCharCode(parseInt(A,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function oE(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const r=t[s];r!==void 0&&e.append(s,r)}return e}function Nh(n){return URL.parse(n)?.origin??null}function lE({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(n.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function cE(n){const t=n.get("Content-Disposition");if(t){let e=$F(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Mh(e))return e}return null}function Wl(n,t){return new Ol(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function uE(n){return n===200||n===206}function hE(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function dE(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Mt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class VF{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=oE(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Yt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new qF(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new GF(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class qF{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),r=e.url;fetch(r,hE(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Nh(o.url),!uE(o.status))throw Wl(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:h}=lE({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=cE(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:dE(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class GF{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${s-1}`);const l=r.url;fetch(l,hE(o,this._withCredentials,this._abortController)).then(u=>{const h=Nh(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!uE(u.status))throw Wl(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:dE(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const _p=200,Tp=206;function YF(n){const t=n.response;return typeof t!="string"?t:Gl(t).buffer}class XF{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=oE(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Tp):r.expectedStatus=_p,e.responseType="arraybuffer",Yt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||_p;if(!(o===_p&&s.expectedStatus===Tp)&&o!==s.expectedStatus){s.onError(r.status);return}const u=YF(r);if(o===Tp){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(Mt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class ZF{constructor(t){this._source=t,this._manager=new XF(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Yt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new KF(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new WF(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class KF{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Nh(e.responseURL);const s=e.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=lE({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=cE(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Wl(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class WF{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Nh(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Wl(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const QF=/^[a-z][a-z0-9\-+.]+:/i;function JF(n){if(QF.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class tz{constructor(t){this.source=t,this.url=JF(t.url),Yt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Yt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ez(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new nz(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class ez{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Wl(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class nz{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ol=Symbol("INITIAL_DATA");class fE{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ol}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const s=this.#t[t];if(!s||s.data===ol)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==ol}delete(t){const e=this.#t[t];return!e||e.data===ol?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==ol&&(yield[t,e])}}}const sz=1e5,OS=30;let kl=class hs{#t=Promise.withResolvers();#e=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#i=null;#r=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#E=new WeakMap;static#x=null;static#w=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=s.scale*Ss.pixelRatio,this.#d=s.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=r,this.#a=o,hs.#O(),Zi(e,s),this.#t.promise.finally(()=>{hs.#w.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Qe.platform;return zt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#i??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),hs.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*Ss.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,Zi(this.#l,{rotation:r})),s!==this.#h){e?.(),this.#h=s;const o={div:null,properties:null,ctx:hs.#D(this.#i)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#_(o)}}cancel(){const t=new fi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#s)return;this.#r.ctx??=hs.#D(this.#i);const e=this.#u,s=this.#g;for(const r of t){if(e.length>sz){Mt("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=gt.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=hs.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*hs.#z(u,l,this.#i);let p,m;o===0?(p=r[4],m=r[5]-f):(p=r[4]+f*Math.sin(o),m=r[5]-f*Math.cos(o));const b="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#l?(v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*m/this.#a).toFixed(2)}%`):(v.left=`${b}${p.toFixed(2)}px)`,v.top=`${b}${m.toFixed(2)}px)`),v.fontSize=`${b}${(hs.#x*h).toFixed(2)}px)`,v.fontFamily=u,s.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);S!==A&&Math.max(S,A)/Math.min(S,A)>1.5&&(w=!0)}if(w&&(s.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,s),this.#r.div=e,this.#r.properties=s,this.#_(this.#r),s.hasText&&this.#e.append(e),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:e,properties:s,ctx:r}=t,{style:o}=e;let l="";if(hs.#x>1&&(l=`scale(${1/hs.#x})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:f}=s;hs.#R(r,f*this.#h,u);const{width:p}=r.measureText(e.textContent);p>0&&(l=`scaleX(${h*this.#h/p}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let e=this.#b.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,s){const r=this.#E.get(t);e===r.size&&s===r.family||(t.font=`${e}px ${s}`,r.size=e,r.family=s)}static#O(){if(this.#x!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#x=t.getBoundingClientRect().height,t.remove()}static#z(t,e,s){const r=this.#v.get(t);if(r)return r;const o=this.#D(s);o.canvas.width=o.canvas.height=OS,this.#R(o,OS,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(Qe.platform.isFirefox&&Mt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}};const iz=100;function ng(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new sg,{docId:e}=t,s=n.url?dF(n.url):null,r=n.data?fF(n.data):null,o=n.httpHeaders||null,l=n.withCredentials===!0,u=n.password??null,h=n.range instanceof ig?n.range:null,f=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let p=n.worker instanceof Ka?n.worker:null;const m=n.verbosity,b=typeof n.docBaseUrl=="string"&&!Xl(n.docBaseUrl)?n.docBaseUrl:null,v=Cu(n.cMapUrl),w=n.cMapPacked!==!1,S=n.CMapReaderFactory||(bn?wF:mS),A=Cu(n.iccUrl),E=Cu(n.standardFontDataUrl),T=n.StandardFontDataFactory||(bn?SF:gS),R=Cu(n.wasmUrl),O=n.WasmFactory||(bn?xF:yS),D=n.stopAtErrors!==!0,z=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,U=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!bn,H=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!bn&&(Qe.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,B=typeof n.disableFontFace=="boolean"?n.disableFontFace:bn,W=n.fontExtraProperties===!0,at=n.enableXfa===!0,ot=n.ownerDocument||globalThis.document,dt=n.disableRange===!0,L=n.disableStream===!0,$=n.disableAutoFetch===!0,it=n.pdfBug===!0,ft=n.CanvasFactory||(bn?vF:gF),_t=n.FilterFactory||(bn?bF:yF),M=n.enableHWA===!0,X=n.useWasm!==!1,nt=h?h.length:n.length??NaN,ct=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!bn&&!B,vt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(S===mS&&T===gS&&O===yS&&v&&E&&R&&pl(v,document.baseURI)&&pl(E,document.baseURI)&&pl(R,document.baseURI)),xt=null;YP(m);const St={canvasFactory:new ft({ownerDocument:ot,enableHWA:M}),filterFactory:new _t({docId:e,ownerDocument:ot}),cMapReaderFactory:vt?null:new S({baseUrl:v,isCompressed:w}),standardFontDataFactory:vt?null:new T({baseUrl:E}),wasmFactory:vt?null:new O({baseUrl:R})};p||(p=Ka.create({verbosity:m,port:Xi.workerPort}),t._worker=p);const Jt={docId:e,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:$,rangeChunkSize:f,length:nt,docBaseUrl:b,enableXfa:at,evaluatorOptions:{maxImageSize:z,disableFontFace:B,ignoreErrors:D,isEvalSupported:N,isOffscreenCanvasSupported:U,isImageDecoderSupported:H,canvasMaxAreaInBytes:V,fontExtraProperties:W,useSystemFonts:ct,useWasm:X,useWorkerFetch:vt,cMapUrl:v,iccUrl:A,standardFontDataUrl:E,wasmUrl:R}},jt={ownerDocument:ot,pdfBug:it,styleElement:xt,loadingParams:{disableAutoFetch:$,enableXfa:at}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Zt=p.messageHandler.sendWithPromise("GetDocRequest",Jt,r?[r.buffer]:null);let qe;if(h)qe=new IF(h,{disableRange:dt,disableStream:L});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const fn=pl(s)?VF:bn?tz:ZF;qe=new fn({url:s,length:nt,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:dt,disableStream:L})}return Zt.then(fn=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Bt=new ml(e,fn,p.port),Xt=new oz(Bt,t,qe,jt,St,M);t._transport=Xt,Bt.send("Ready",null)})}).catch(t._capability.reject),t}class sg{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${sg.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let ig=class{#t=Promise.withResolvers();#e=[];#s=[];#n=[];#i=[];constructor(t,e,s=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#i.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#i)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#n)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class rz{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class az{#t=!1;constructor(t,e,s,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=r?new lS:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new fE,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Yl({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:s,intent:r="display",annotationMode:o=Us.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,m,b),{renderingIntent:A,cacheKey:E}=S;this.#t=!1,h||=this._transport.getOptionalContentConfig(A);let T=this._intentStates.get(E);T||(T=Object.create(null),this._intentStates.set(E,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const R=!!(A&qn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(v||O),z=H=>{if(T.renderTasks.delete(N),D){const V=N.gfx?.dependencyTracker.take();V&&(N.stepper&&N.stepper.setOperatorBBoxes(V,N.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=V))}R&&(this.#t=!0),this.#e(),H?(N.capability.reject(H),this._abortOperatorList({intentState:T,reason:H instanceof Error?H:new Error(H)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new Ba({callback:z,params:{canvas:e,canvasContext:t,dependencyTracker:D?new EF(e,T.operatorList.length,O):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(N);const U=N.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([H,V])=>{if(this.destroyed){z();return}if(this._stats?.time("Rendering"),!(V.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:H,optionalContentConfig:V}),N.operatorListChanged()}).catch(z),U}getOperatorList({intent:t="display",annotationMode:e=Us.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,s,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Dl.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,r){function o(){l.read().then(function({value:h,done:f}){if(f){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},r)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new lS),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,r=t.length;s<r;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:l}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:m,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),p())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof kh){let r=iz;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new fi(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Gi,bs,ui,_r,ch,Tr,Cr,Sn,Hu,pE,mE,gl,Ya,$u;const be=class be{constructor({name:t=null,port:e=null,verbosity:s=XP()}={}){Ms(this,Sn);Ms(this,Gi,Promise.withResolvers());Ms(this,bs,null);Ms(this,ui,null);Ms(this,_r,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(ye(be,Cr).has(e))throw new Error("Cannot use more than one PDFWorker per port.");ye(be,Cr).set(e,this),Ns(this,Sn,pE).call(this,e)}else Ns(this,Sn,mE).call(this)}get promise(){return ye(this,Gi).promise}get port(){return ye(this,ui)}get messageHandler(){return ye(this,bs)}destroy(){this.destroyed=!0,ye(this,_r)?.terminate(),Dn(this,_r,null),ye(be,Cr).delete(ye(this,ui)),Dn(this,ui,null),ye(this,bs)?.destroy(),Dn(this,bs,null)}static create(t){const e=ye(this,Cr).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new be(t)}static get workerSrc(){if(Xi.workerSrc)return Xi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return zt(this,"_setupFakeWorkerGlobal",(async()=>ye(this,Ya,$u)?ye(this,Ya,$u):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gi=new WeakMap,bs=new WeakMap,ui=new WeakMap,_r=new WeakMap,ch=new WeakMap,Tr=new WeakMap,Cr=new WeakMap,Sn=new WeakSet,Hu=function(){ye(this,Gi).resolve(),ye(this,bs).send("configure",{verbosity:this.verbosity})},pE=function(t){Dn(this,ui,t),Dn(this,bs,new ml("main","worker",t)),ye(this,bs).on("ready",()=>{}),Ns(this,Sn,Hu).call(this)},mE=function(){if(ye(be,Tr)||ye(be,Ya,$u)){Ns(this,Sn,gl).call(this);return}let{workerSrc:t}=be;try{be._isSameOrigin(window.location,t)||(t=be._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new ml("main","worker",e),r=()=>{o.abort(),s.destroy(),e.terminate(),this.destroyed?ye(this,Gi).reject(new Error("Worker was destroyed")):Ns(this,Sn,gl).call(this)},o=new AbortController;e.addEventListener("error",()=>{ye(this,_r)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Dn(this,bs,s),Dn(this,ui,e),Dn(this,_r,e),Ns(this,Sn,Hu).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{Ns(this,Sn,gl).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{Dh("The worker has been disabled.")}Ns(this,Sn,gl).call(this)},gl=function(){ye(be,Tr)||(Mt("Setting up fake worker."),Dn(be,Tr,!0)),be._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){ye(this,Gi).reject(new Error("Worker was destroyed"));return}const e=new mF;Dn(this,ui,e);const s=`fake${cv(be,ch)._++}`,r=new ml(s+"_worker",s,e);t.setup(r,e),Dn(this,bs,new ml(s,s+"_worker",e)),Ns(this,Sn,Hu).call(this)}).catch(t=>{ye(this,Gi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ya=new WeakSet,$u=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ms(be,Ya),Ms(be,ch,0),Ms(be,Tr,!1),Ms(be,Cr,new WeakMap),bn&&(Dn(be,Tr,!0),Xi.workerSrc||="./pdf.worker.mjs"),be._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(e,s);return s.origin===r.origin},be._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},be.fromPort=t=>{if(sF("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return be.create(t)};let Ka=be;class oz{#t=new Map;#e=new Map;#s=new Map;#n=new Map;#i=null;constructor(t,e,s,r,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new fE,this.fontLoader=new uF({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#r(t,e=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return zt(this,"annotationStorage",new Qm)}getRenderingIntent(t,e=Us.ENABLE,s=null,r=!1,o=!1){let l=qn.DISPLAY,u=em;switch(t){case"any":l=qn.ANY;break;case"display":break;case"print":l=qn.PRINT;break;default:Mt(`getRenderingIntent - invalid intent: ${t}`)}const h=l&qn.PRINT&&s instanceof tE?s:this.annotationStorage;switch(e){case Us.DISABLE:l+=qn.ANNOTATIONS_DISABLE;break;case Us.ENABLE:break;case Us.ENABLE_FORMS:l+=qn.ANNOTATIONS_FORMS;break;case Us.ENABLE_STORAGE:l+=qn.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Mt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(l+=qn.IS_EDITING),o&&(l+=qn.OPLIST);const{ids:f,hash:p}=h.modifiedIds,m=[l,u.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),kl.cleanup(),this._networkStream?.cancelAllRequests(new fi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,r)=>{Yt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}Yt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,r)=>{Yt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}Yt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new rz(s,this))}),t.on("DocException",s=>{e._capability.reject(kn(s))}),t.on("PasswordRequest",s=>{this.#i=Promise.withResolvers();try{if(!e.onPassword)throw kn(s);const r=o=>{o instanceof Error?this.#i.reject(o):this.#i.resolve({password:o})};e.onPassword(r,s.code)}catch(r){this.#i.reject(r)}return this.#i.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const p=o.error;Mt(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const l=new ae(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,h=new hF(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=o;Yt(f,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,m]of p.objs)if(m?.ref===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,l])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Mt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#s.get(e);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new az(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#s.set(e,r),r}getPageIndex(t){return nm(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new BF(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new zF(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),kl.cleanup()}}cachedPageNumber(t){if(!nm(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class lz{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Ba{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=m,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new lz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Ba.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ba.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ha(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Ba.#e.delete(this._canvas),t||=new kh(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ba.#e.delete(this._canvas),this.callback())))}}const rg="5.4.296",gE="f56dc8601";class Gn{#t=null;#e=null;#s;#n=null;#i=!1;#r=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return zt(this,"_keyboardManager",new Zl([[["Escape","mac+Escape"],Gn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Gn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Gn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Gn.prototype._moveToPrevious],[["Home","mac+Home"],Gn.prototype._moveToBeginning],[["End","mac+End"],Gn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#a=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Gn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Zn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",Gn.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#s,o.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:qt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){Gn._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#i=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Ml{#t=null;#e=null;#s=null;static#n=null;constructor(t){this.#e=t,this.#s=t._uiManager,Ml.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Ml.#n[t]),r.addEventListener("input",()=>{this.#s.updateParams(e,r.value)},{signal:this.#s._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function DS(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function ll(n){return Math.max(0,Math.min(255,255*n))}class kS{static CMYK_G([t,e,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ll(t),[t,t,t]}static G_HTML([t]){const e=DS(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(ll)}static RGB_HTML(t){return`#${t.map(DS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,s,r]){return[ll(1-Math.min(1,t+r)),ll(1-Math.min(1,s+r)),ll(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const r=1-t,o=1-e,l=1-s,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class cz{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ue("Abstract method `_createSVG` called.")}}class Nl extends cz{_createSVG(t){return document.createElementNS(ci,t)}}const uz=9,zr=new WeakSet,hz=new Date().getTimezoneOffset()*60*1e3;class MS{static create(t){switch(t.data.annotationType){case Oe.LINK:return new ag(t);case Oe.TEXT:return new fz(t);case Oe.WIDGET:switch(t.data.fieldType){case"Tx":return new pz(t);case"Btn":return t.data.radioButton?new yE(t):t.data.checkBox?new gz(t):new yz(t);case"Ch":return new bz(t);case"Sig":return new mz(t)}return new Hr(t);case Oe.POPUP:return new rm(t);case Oe.FREETEXT:return new bE(t);case Oe.LINE:return new wz(t);case Oe.SQUARE:return new Sz(t);case Oe.CIRCLE:return new xz(t);case Oe.POLYLINE:return new vE(t);case Oe.CARET:return new Ez(t);case Oe.INK:return new og(t);case Oe.POLYGON:return new Az(t);case Oe.HIGHLIGHT:return new wE(t);case Oe.UNDERLINE:return new _z(t);case Oe.SQUIGGLY:return new Tz(t);case Oe.STRIKEOUT:return new Cz(t);case Oe.STAMP:return new SE(t);case Oe.FILEATTACHMENT:return new Rz(t);default:return new Ae(t)}}}class Ae{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ae._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:s,rect:r}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>l?(l=e[u+1],o=e[u+2]):e[u+1]===l&&(o=Math.max(o,e[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>l?(l=u[h+1],o=u[h]):u[h+1]===l&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Rl}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:s})||this.annotationStorage.setValue(`${Rl}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:s}=t;e&&this.#n(e);let r=this.#s?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#s.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+h)/l}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Hr)&&!(this instanceof ag)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof rm){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(S>0||A>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof yE){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=T}switch(e.borderStyle.style){case Pa.SOLID:l.borderStyle="solid";break;case Pa.DASHED:l.borderStyle="dashed";break;case Pa.BEVELED:Mt("Unimplemented border style: beveled");break;case Pa.INSET:Mt("Unimplemented border style: inset");break;case Pa.UNDERLINE:l.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,l.borderColor=gt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const f=gt.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:m,pageX:b,pageY:v}=r.rawDims;l.left=`${100*(f[0]-b)/p}%`,l.top=`${100*(f[1]-v)/m}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(l.width=`${100*u/p}%`,l.height=`${100*h/m}%`):this.setRotation(w,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/s}%`,e.style.height=`${100*l/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,r)=>{const o=r.detail[e],l=o[0],u=o.slice(1);r.target.style[s]=kS[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:kS[`${l}_rgb`](u)})};return zt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||s[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[r,o]of Object.entries(e)){const l=s[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,r,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,A,E,T]=t.subarray(2,6);if(r===S&&o===A&&e===E&&s===T)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:A}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const h=r-e,f=o-s,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const b=p.createElement("defs");m.append(b);const v=p.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let S=2,A=t.length;S<A;S+=8){const E=t[S],T=t[S+1],R=t[S+2],O=t[S+3],D=p.createElement("rect"),z=(R-e)/h,N=(o-T)/f,U=(E-R)/h,H=(T-O)/f;D.setAttribute("x",z),D.setAttribute("y",N),D.setAttribute("width",U),D.setAttribute("height",H),v.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${N}" width="${U}" height="${H}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let s,r;t?(s={str:t.text},r=t.date):(s=e.contentsObj,r=e.modificationDate);const o=this.#s=new rm({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:s,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!zr.has(f)){Mt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:h,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==e&&zr.has(r)&&s.push({id:l,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class dz extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class ag extends Ae{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#s(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,s=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),s&&(t.title=s),this.#t()}#e(t,e,s="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#s(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Mt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:l}=e,u=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const m of r){const b=this._fieldObjects[m]||[];for(const{id:v}of b)p.add(v)}for(const m of Object.values(this._fieldObjects))for(const b of m)p.has(b.id)===l&&u.push(b)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,f=[];for(const p of u){const{id:m}=p;switch(f.push(m),p.type){case"text":{const v=p.defaultValue||"";h.setValue(m,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;h.setValue(m,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";h.setValue(m,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${m}"]`);if(b){if(!zr.has(b)){Mt(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class fz extends Ae{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Hr extends Ae{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Qe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,r,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(t,e,s,r){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":gt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||uz,o=t.style;let l;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(vp*r))||1,m=f/p;l=Math.min(r,h(m/vp))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,h(f/vp))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=gt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class pz extends Hr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=s),o.setValue(l.id,{[r]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),zr.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,b=!!p&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=h.userValue=S,h.formattedValue=null});let v=w=>{const{formattedValue:S}=h;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(h.focused)return;const{target:A}=S;if(b&&(A.type=p,m&&(A.step=m)),h.userValue){const E=h.userValue;if(b)if(p==="time"){const T=new Date(E),R=[T.getHours(),T.getMinutes(),T.getSeconds()];A.value=R.map(O=>O.toString().padStart(2,"0")).join(":")}else A.value=new Date(E-hz).toISOString().split(p==="date"?"T":".",1)[0];else A.value=E}h.lastCommittedValue=A.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const A={value(E){h.userValue=E.detail.value??"",b||t.setValue(e,{value:h.userValue.toString()}),E.target.value=h.userValue},formattedValue(E){const{formattedValue:T}=E.detail;h.formattedValue=T,T!=null&&E.target!==document.activeElement&&(E.target.value=T);const R={formattedValue:T};b&&(R.value=T),t.setValue(e,R)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:T}=E.detail,{target:R}=E;if(T===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",T);let O=h.userValue;!O||O.length<=T||(O=O.slice(0,T),R.value=h.userValue=O,t.setValue(e,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(A,S)}),s.addEventListener("keydown",S=>{h.commitKey=1;let A=-1;if(S.key==="Escape"?A=0:S.key==="Enter"&&!this.data.multiLine?A=2:S.key==="Tab"&&(h.commitKey=3),A===-1)return;const{value:E}=S.target;h.lastCommittedValue!==E&&(h.lastCommittedValue=E,h.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:A,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=v;v=null,s.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:A}=S;let{value:E}=A;if(b){if(E&&p==="time"){const T=E.split(":").map(R=>parseInt(R,10));E=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),A.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();A.type="text"}h.userValue=E,h.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:A,target:E}=S,{value:T,selectionStart:R,selectionEnd:O}=E;let D=R,z=O;switch(S.inputType){case"deleteWordBackward":{const N=T.substring(0,R).match(/\w*[^\w]*$/);N&&(D-=N[0].length);break}case"deleteWordForward":{const N=T.substring(R).match(/^[^\w]*\w*/);N&&(z+=N[0].length);break}case"deleteContentBackward":R===O&&(D-=1);break;case"deleteContentForward":R===O&&(z+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:A||"",willCommit:!1,selStart:D,selEnd:z}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class mz extends Hr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class gz extends Hr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let r=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return zr.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,s)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(s,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class yE extends Hr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let r=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(s,{value:r})),r)for(const l of this._getElementsByName(e.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(zr.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=l===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const b=p&&m.id===s;m.domElement&&(m.domElement.checked=b),t.setValue(m.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class yz extends ag{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class bz extends Hr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");zr.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,s.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),o=!1),r.append(m)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=p=>{const m=p?"value":"textContent",{options:b,multiple:v}=r;return v?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[m]):b.selectedIndex===-1?null:b[b.selectedIndex][m]};let h=u(!1);const f=p=>{const m=p.target.options;return Array.prototype.map.call(m,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const m={value(b){l?.();const v=b.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const v=r.options,w=b.detail.remove;v[w].selected=!1,r.remove(w),v.length>0&&Array.prototype.findIndex.call(v,A=>A.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(b){const{index:v,displayValue:w,exportValue:S}=b.detail.insert,A=r.children[v],E=document.createElement("option");E.textContent=w,E.value=S,A?A.before(E):r.append(E),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:v}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of v){const{displayValue:S,exportValue:A}=w,E=document.createElement("option");E.textContent=S,E.value=A,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const w of b.target.options)w.selected=v.has(w.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("input",p=>{const m=u(!0),b=u(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:b,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class rm extends Ae{constructor(t){const{data:e,elements:s,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&Ae._hasPopupData(e)}),this.elements=s,o&&Ae._hasPopupData(e)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new vz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Ym}${r}`).join(",")),this.container}}class vz{#t=null;#e=this.#V.bind(this);#s=this.#B.bind(this);#n=this.#N.bind(this);#i=this.#S.bind(this);#r=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#v=null;#b=null;#E=null;#x=null;#w=null;#T=!1;#A=null;#_=null;constructor({container:t,color:e,elements:s,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:f,parentRect:p,open:m,commentManager:b=null}){this.#a=t,this.#x=r,this.#o=l,this.#E=u,this.#d=h,this.#r=e,this.#b=f,this.#h=p,this.#l=s,this.#t=b,this.#A=s[0],this.#c=rh.toDateObject(o),this.trigger=s.flatMap(v=>v.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,m&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#i,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#s,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#A.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#A.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const u=this.#A.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#O(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#O(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:s}=this.#m;s.left=`calc(${t}%)`,s.top=`calc(${e}% - var(--comment-button-dim))`}#z(){this.#A.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:e,opacity:s,creationDate:r,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#_||=this.#A.commentText,this.#_}set comment(t){t!==this.comment&&(this.#A.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:s}=this.#m.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/l,(e+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:h}=r;this.#t.showDialog(null,this,o+e*u,l+s*h,{...t,parentDimensions:r})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=gt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#x?.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=this.#x}if(t.append(e),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),e.append(s)}Zm({html:this.#M||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#M(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#L(){return this.#M?.attributes?.style?.fontSize||0}get#j(){return this.#M?.attributes?.style?.color||null}#P(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#j,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#z(),this.#_=e.text)),t&&(this.#y=null,this.#R(),this.#O());return}if(s||e?.deleted){this.remove();return}this.#D(),this.#w||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#P(e.text),this.#c=rh.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#E}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:r,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const w of this.#l)if(!u||gt.intersect(w.data.rect,u)!==null){u=w.data.rect,l=!0;break}const h=gt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,m=h[0]+p,b=h[1];this.#u=[100*(m-r)/e,100*(b-o)/s];const{style:v}=this.#a;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#a.addEventListener("click",this.#i),this.#a.addEventListener("keydown",this.#e)):(this.#B(),this.#a.removeEventListener("click",this.#i),this.#a.removeEventListener("keydown",this.#e))}#N(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#C(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#B(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#T&&(this.#g||this.#N(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class bE extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=kt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class wz extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,r=this.svgFactory.create(e,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Sz extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,r=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class xz extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,r=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",s/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vE extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let h=[];for(let p=0,m=e.length;p<m;p+=2){const b=e[p]-t[0],v=t[3]-e[p+1];h.push(`${b},${v}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Az extends vE{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ez extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class og extends Ae{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?kt.HIGHLIGHT:kt.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:u,height:h}=this.#s(e,t),f=this.svgFactory.create(u,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,b=s.length;m<b;m++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",s[m].join(",")),p.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:r}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:u,height:h}=this.#s(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class wE extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=kt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class _z extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Tz extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Cz extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class SE extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=kt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Rz extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=Qe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let lg=class xE{#t=null;#e=null;#s=null;#n=new Map;#i=null;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=s,this.#i=u||null,this.#r=f||null,this.#s=p||new Qm,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,s){const r=t.firstChild||t,o=r.id=`${Ym}${e}`,l=await this.#i?.getAriaAttributes(o);if(l)for(const[u,h]of l)r.setAttribute(u,h);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,s=this.div;Zi(s,this.viewport);const r=new Map,o={data:null,layer:s,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Nl,annotationStorage:this.#s,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===Oe.POPUP;if(u){const p=r.get(l.id);if(!p)continue;o.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const h=MS.create(o);if(!h.isRenderable)continue;if(!u&&l.popupRef){const p=r.get(l.popupRef);p?p.push(h):r.set(l.popupRef,[h])}const f=h.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id,o.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new Nl,parent:this};for(const s of t){s.borderStyle||=xE._defaultBorderStyle,e.data=s;const r=MS.create(e);if(!r.isRenderable)continue;const o=r.render();await this.#a(o,s.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Zi(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:s,rotation:r}=t,o=new dz({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#s}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return zt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Pa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Nu=/\r\n?|\n/g;class Ze extends Et{#t="";#e=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ze.prototype,e=o=>o.isEmpty(),s=pi.TRANSLATE_SMALL,r=pi.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Zl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=kt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ze._defaultColor||Et._defaultLineColor,this.#n=t.fontSize||Ze._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Et.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case qt.FREETEXT_SIZE:Ze._defaultFontSize=e;break;case qt.FREETEXT_COLOR:Ze._defaultColor=e;break}}updateParams(t,e){switch(t){case qt.FREETEXT_SIZE:this.#i(e);break;case qt.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[qt.FREETEXT_SIZE,Ze._defaultFontSize],[qt.FREETEXT_COLOR,Ze._defaultColor||Et._defaultLineColor]]}get propertiesToUpdate(){return[[qt.FREETEXT_SIZE,this.#n],[qt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Ml(this),[["colorPicker",this._colorPicker]]}get colorType(){return qt.FREETEXT_COLOR}#i(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},s=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ze._internalPadding*t,-(Ze._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Ze.#c(s)),e=s);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ze._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,p]=this.pageDimensions,[m,b]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(l[0]-m)/f,w=e+this.height-(l[1]-b)/p;break;case 90:v=t+(l[0]-m)/f,w=e-(l[1]-b)/p,[u,h]=[h,-u];break;case 180:v=t-this.width+(l[0]-m)/f,w=e-(l[1]-b)/p,[u,h]=[-u,-h];break;case 270:v=t+(l[0]-m-this.height*p)/f,w=e+(l[1]-b-this.width*f)/p,[u,h]=[-h,u];break}this.setAt(v*r,w*o,u,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Nu,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=Ze.#h(e.getData("text")||"").replaceAll(Nu,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=l,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Nu,"")),v!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===v){w=p;continue}w.push(Ze.#c(S))}}f.push(u.nodeValue.slice(0,h).replaceAll(Nu,""))}else if(u===this.editorDiv){let v=f,w=0;for(const S of this.editorDiv.childNodes)w++===h&&(v=p),v.push(Ze.#c(S))}this.#t=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#l();const m=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(b<=w){m.setStart(v,b),m.setEnd(v,b);break}b-=w}o.removeAllRanges(),o.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ze._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,s){let r=null;if(t instanceof bE){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:f,id:p,popupRef:m,richText:b,contentsObj:v,creationDate:w,modificationDate:S},textContent:A,textPosition:E,parent:{page:{pageNumber:T}}}=t;if(!A||A.length===0)return null;r=t={annotationType:kt.FREETEXT,color:Array.from(u),fontSize:l,value:A.join(`
`),position:E,pageIndex:T-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:v?.str||null,richText:b,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,e,s);return o.#n=t.fontSize,o.color=gt.makeHexColor(...t.color),o.#t=Ze.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Et._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:e,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((l,u)=>l!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:s}=e;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class mt{static PRECISION=1e-4;toSVGPath(){ue("Abstract method `toSVGPath` must be implemented.")}get box(){ue("Abstract getter `box` must be implemented.")}serialize(t,e){ue("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*r,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,e,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*r,l[u+1]=s+t[u]*o;return l}static _translate(t,e,s,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=e+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,r,o){switch(o){case 90:return[1-e/s,t/r];case 180:return[1-t/s,1-e/r];case 270:return[e/s,1-t/r];default:return[t/s,e/r]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,r,o,l){return[(t+5*s)/6,(e+5*r)/6,(5*s+o)/6,(5*r+l)/6,(s+o)/2,(r+l)/2]}}class Er{#t;#e=[];#s;#n;#i=[];#r=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#g=8;static#p=2;static#u=Er.#g+Er.#p;constructor({x:t,y:e},s,r,o,l,u=0){this.#t=s,this.#h=o*r,this.#n=l,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=u,this.#l=Er.#g*r,this.#c=Er.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#m(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[s,r,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-s)/o,(this.#o+(t[1]-e[1])/2-r)/l,(this.#a+(e[0]-t[0])/2-s)/o,(this.#o+(e[1]-t[1])/2-r)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[s,r,o,l]=this.#t;let[u,h,f,p]=this.#r.subarray(8,12);const m=t-f,b=e-p,v=Math.hypot(m,b);if(v<this.#c)return!1;const w=v-this.#l,S=w/v,A=S*m,E=S*b;let T=u,R=h;u=f,h=p,f+=A,p+=E,this.#f?.push(t,e);const O=-E/w,D=A/w,z=O*this.#h,N=D*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+z,p+N],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-z,p-N],16),isNaN(this.#r[6])?(this.#i.length===0&&(this.#r.set([u+z,h+N],2),this.#i.push(NaN,NaN,NaN,NaN,(u+z-s)/o,(h+N-r)/l),this.#r.set([u-z,h-N],14),this.#e.push(NaN,NaN,NaN,NaN,(u-z-s)/o,(h-N-r)/l)),this.#r.set([T,R,u,h,f,p],6),!this.isEmpty()):(this.#r.set([T,R,u,h,f,p],6),Math.abs(Math.atan2(R-h,T-u)-Math.atan2(E,A))<Math.PI/2?([u,h,f,p]=this.#r.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((h+p)/2-r)/l),[u,h,T,R]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/o,((R+h)/2-r)/l),!0):([T,R,u,h,f,p]=this.#r.subarray(0,6),this.#i.push(((T+5*u)/6-s)/o,((R+5*h)/6-r)/l,((5*u+f)/6-s)/o,((5*h+p)/6-r)/l,((u+f)/2-s)/o,((h+p)/2-r)/l),[f,p,u,h,T,R]=this.#r.subarray(12,18),this.#e.push(((T+5*u)/6-s)/o,((R+5*h)/6-r)/l,((5*u+f)/6-s)/o,((5*h+p)/6-r)/l,((u+f)/2-s)/o,((h+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#i,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,e,s,r]=this.#t,[o,l,u,h]=this.#m();return`M${(this.#r[2]-t)/s} ${(this.#r[3]-e)/r} L${(this.#r[4]-t)/s} ${(this.#r[5]-e)/r} L${o} ${l} L${u} ${h} L${(this.#r[16]-t)/s} ${(this.#r[17]-e)/r} L${(this.#r[14]-t)/s} ${(this.#r[15]-e)/r} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,s,r,o]=this.#t,l=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,f,p,m]=this.#m();t.push(`L${(l[0]-e)/r} ${(l[1]-s)/o} L${h} ${f} L${p} ${m} L${(u[0]-e)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,e,s,r,o,l){return new AE(t,e,s,r,o,l)}getOutlines(){const t=this.#i,e=this.#e,s=this.#r,[r,o,l,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let m=0,b=h.length-2;m<b;m+=2)h[m]=(this.#f[m]-r)/l,h[m+1]=(this.#f[m+1]-o)/u;if(h[h.length-2]=(this.#a-r)/l,h[h.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#E(h);const f=new Float32Array(this.#i.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}p=this.#w(f,p);for(let m=e.length-6;m>=6;m-=6)for(let b=0;b<6;b+=2){if(isNaN(e[m+b])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[m+b],f[p+1]=e[m+b+1],p+=2}return this.#x(f,p),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#s,this.#n)}#E(t){const e=this.#r,[s,r,o,l]=this.#t,[u,h,f,p]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-s)/o,(e[3]-r)/l,NaN,NaN,NaN,NaN,(e[4]-s)/o,(e[5]-r)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-s)/o,(e[17]-r)/l,NaN,NaN,NaN,NaN,(e[14]-s)/o,(e[15]-r)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#s,this.#n)}#x(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#w(t,e){const s=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[o,l,u,h]=this.#t,[f,p,m,b]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,b,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/h],e),e+=24}}class AE extends mt{#t;#e=new Float32Array(4);#s;#n;#i;#r;#a;constructor(t,e,s,r,o,l){super(),this.#a=t,this.#i=e,this.#t=s,this.#r=r,this.#s=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,h,f,p]=this.#e;for(let m=0,b=t.length;m<b;m+=2)t[m]=(t[m]-u)/f,t[m+1]=(t[m+1]-h)/p;for(let m=0,b=e.length;m<b;m+=2)e[m]=(e[m]-u)/f,e[m+1]=(e[m+1]-h)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,s=this.#a.length;e<s;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,r],o){const l=s-t,u=r-e;let h,f;switch(o){case 0:h=mt._rescale(this.#a,t,r,l,-u),f=mt._rescale(this.#i,t,r,l,-u);break;case 90:h=mt._rescaleAndSwap(this.#a,t,e,l,u),f=mt._rescaleAndSwap(this.#i,t,e,l,u);break;case 180:h=mt._rescale(this.#a,s,e,-l,u),f=mt._rescale(this.#i,s,e,-l,u);break;case 270:h=mt._rescaleAndSwap(this.#a,s,r,-l,-u),f=mt._rescaleAndSwap(this.#i,s,r,-l,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const e=this.#a;let s=e[4],r=e[5];const o=[s,r,s,r];let l=s,u=r,h=s,f=r;const p=t?Math.max:Math.min,m=new Float32Array(4);for(let v=6,w=e.length;v<w;v+=6){const S=e[v+4],A=e[v+5];isNaN(e[v])?(gt.pointBoundingBox(S,A,o),u>A?(l=S,u=A):u===A&&(l=p(l,S)),f<A?(h=S,f=A):f===A&&(h=p(h,S))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,gt.bezierBoundingBox(s,r,...e.slice(v,v+6),m),gt.rectBoundingBox(m[0],m[1],m[2],m[3],o),u>m[1]?(l=m[0],u=m[1]):u===m[1]&&(l=p(l,m[0])),f<m[3]?(h=m[2],f=m[3]):f===m[3]&&(h=p(h,m[2]))),s=S,r=A}const b=this.#e;b[0]=o[0]-this.#s,b[1]=o[1]-this.#s,b[2]=o[2]-o[0]+2*this.#s,b[3]=o[3]-o[1]+2*this.#s,this.firstPoint=[l,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,e,s,r,o,l=0){return new Er(t,e,s,r,o,l)}getNewOutline(t,e){const[s,r,o,l]=this.#e,[u,h,f,p]=this.#t,m=o*f,b=l*p,v=s*f+u,w=r*p+h,S=this.newOutliner({x:this.#i[0]*m+v,y:this.#i[1]*b+w},this.#t,this.#r,t,this.#n,e??this.#s);for(let A=2;A<this.#i.length;A+=2)S.add({x:this.#i[A]*m+v,y:this.#i[A+1]*b+w});return S.getOutlines()}}class am{#t;#e;#s;#n=[];#i=[];constructor(t,e=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:A,width:E,height:T}of t){const R=Math.floor((S-e)/l)*l,O=Math.ceil((S+E+e)/l)*l,D=Math.floor((A-e)/l)*l,z=Math.ceil((A+T+e)/l)*l,N=[R,D,z,!0],U=[O,D,z,!1];this.#n.push(N,U),gt.rectBoundingBox(R,D,O,z,o)}const u=o[2]-o[0]+2*s,h=o[3]-o[1]+2*s,f=o[0]-s,p=o[1]-s;let m=r?-1/0:1/0,b=1/0;const v=this.#n.at(r?-1:-2),w=[v[0],v[2]];for(const S of this.#n){const[A,E,T,R]=S;!R&&r?E<b?(b=E,m=A):E===b&&(m=Math.max(m,A)):R&&!r&&(E<b?(b=E,m=A):E===b&&(m=Math.min(m,A))),S[0]=(A-f)/u,S[1]=(E-p)/h,S[2]=(T-p)/h}this.#t=new Float32Array([f,p,u,h]),this.#e=[m,b],this.#s=w}getOutlines(){this.#n.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],s=new Set;for(const l of t){const[u,h,f]=l;e.push([u,h,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),s.add(h),s.add(f)}const r=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,h,f,p,m]=l;s.delete(l);let b=u,v=h;for(o=[u,f],r.push(o);;){let w;if(s.has(p))w=p;else if(s.has(m))w=m;else break;s.delete(w),[u,h,f,p,m]=w,b!==u&&(o.push(b,v,u,v===h?h:f),b=u),v=v===h?f:h}o.push(b,v)}return new Oz(r,this.#t,this.#e,this.#s)}#a(t){const e=this.#i;let s=0,r=e.length-1;for(;s<=r;){const o=s+r>>1,l=e[o][0];if(l===t)return o;l<t?s=o+1:r=o-1}return r+1}#o([,t,e]){const s=this.#a(t);this.#i.splice(s,0,[t,e])}#c([,t,e]){const s=this.#a(t);for(let r=s;r<this.#i.length;r++){const[o,l]=this.#i[r];if(o!==t)break;if(o===t&&l===e){this.#i.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,l]=this.#i[r];if(o!==t)break;if(o===t&&l===e){this.#i.splice(r,1);return}}}#l(t){const[e,s,r]=t,o=[[e,s,r]],l=this.#a(r);for(let u=0;u<l;u++){const[h,f]=this.#i[u];for(let p=0,m=o.length;p<m;p++){const[,b,v]=o[p];if(!(f<=b||v<=h)){if(b>=h){if(v>f)o[p][1]=f;else{if(m===1)return[];o.splice(p,1),p--,m--}continue}o[p][2]=h,v>f&&o.push([e,f,v])}}}return o}}class Oz extends mt{#t;#e;constructor(t,e,s,r){super(),this.#e=t,this.#t=e,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[s,r]=e;t.push(`M${s} ${r}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,e,s,r],o){const l=[],u=s-t,h=r-e;for(const f of this.#e){const p=new Array(f.length);for(let m=0;m<f.length;m+=2)p[m]=t+f[m]*u,p[m+1]=r-f[m+1]*h;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class om extends Er{newFreeDrawOutline(t,e,s,r,o,l){return new Dz(t,e,s,r,o,l)}}class Dz extends AE{newOutliner(t,e,s,r,o,l=0){return new om(t,e,s,r,o,l)}}class De extends Et{#t=null;#e=0;#s;#n=null;#i=null;#r=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=kt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=De.prototype;return zt(this,"_keyboardManager",new Zl([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||De._defaultColor,this.#m=t.thickness||De._defaultThickness,this.opacity=t.opacity||De._defaultOpacity,this.#s=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new am(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new am(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#m/2+r,.0025),e>=0)this.#d=e,this.#n=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:De.#_(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:De.#_(this.#r.box,m),path:{d:this.#r.toSVGPath()}})}const[o,l,u,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=h;break;case 90:{const[m,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/m,this.height=h*m/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=h;break;case 270:{const[m,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/m,this.height=h*m/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/h];const{lastPoint:p}=this.#r;this.#g=[(p[0]-o)/u,(p[1]-l)/h]}static initialize(t,e){Et.initialize(t,e),De._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case qt.HIGHLIGHT_COLOR:De._defaultColor=e;break;case qt.HIGHLIGHT_THICKNESS:De._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case qt.HIGHLIGHT_COLOR:this.#E(e);break;case qt.HIGHLIGHT_THICKNESS:this.#x(e);break}}static get defaultPropertiesToUpdate(){return[[qt.HIGHLIGHT_COLOR,De._defaultColor],[qt.HIGHLIGHT_THICKNESS,De._defaultThickness]]}get propertiesToUpdate(){return[[qt.HIGHLIGHT_COLOR,this.color||De._defaultColor],[qt.HIGHLIGHT_THICKNESS,this.#m||De._defaultThickness],[qt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#i?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,De._defaultOpacity),undo:e.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#x(t){const e=this.#m,s=r=>{this.#m=r,this.#w(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new Gn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#O())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#A(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#w(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,s,r],o){switch(o){case 90:return[1-e-r,t,r,s];case 180:return[1-t-s,1-e-r,s,r];case 270:return[e,1-t-s,r,s]}return[t,e,s,r]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=De.#_(this.#l.box,t)):s=De.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:De.#_(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),QA(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){De._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#O(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,e]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#s,l=new Float32Array(o.length*8);let u=0;for(const{x:h,y:f,width:p,height:m}of o){const b=h*t+s,v=(1-f)*e+r;l[u]=l[u+4]=b,l[u+1]=l[u+3]=v,l[u+2]=l[u+6]=b+p*t,l[u+5]=l[u+7]=v-m*e,u+=8}return l}#M(t){return this.#l.serialize(t,this.#O())}static startHighlighting(t,e,{target:s,x:r,y:o}){const{x:l,y:u,width:h,height:f}=s.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),b=v=>{p.abort(),this.#j(t,v)};window.addEventListener("blur",b,{signal:m}),window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("pointerdown",xe,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Zn,{signal:m}),s.addEventListener("pointermove",this.#L.bind(this,t),{signal:m}),this._freeHighlight=new om({x:r,y:o},[l,u,h,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let r=null;if(t instanceof wE){const{data:{quadPoints:w,rect:S,rotation:A,id:E,color:T,opacity:R,popupRef:O,richText:D,contentsObj:z,creationDate:N,modificationDate:U},parent:{page:{pageNumber:H}}}=t;r=t={annotationType:kt.HIGHLIGHT,color:Array.from(T),opacity:R,quadPoints:w,boxes:null,pageIndex:H-1,rect:S.slice(0),rotation:A,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:D,comment:z?.str||null,creationDate:N,modificationDate:U}}else if(t instanceof og){const{data:{inkLists:w,rect:S,rotation:A,id:E,color:T,borderStyle:{rawWidth:R},popupRef:O,richText:D,contentsObj:z,creationDate:N,modificationDate:U},parent:{page:{pageNumber:H}}}=t;r=t={annotationType:kt.HIGHLIGHT,color:Array.from(T),thickness:R,inkLists:w,boxes:null,pageIndex:H-1,rect:S.slice(0),rotation:A,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:D,comment:z?.str||null,creationDate:N,modificationDate:U}}const{color:o,quadPoints:l,inkLists:u,opacity:h}=t,f=await super.deserialize(t,e,s);f.color=gt.makeHexColor(...o),f.opacity=h||1,u&&(f.#m=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[p,m]=f.pageDimensions,[b,v]=f.pageTranslation;if(l){const w=f.#s=[];for(let S=0;S<l.length;S+=8)w.push({x:(l[S]-b)/p,y:1-(l[S+1]-v)/m,width:(l[S+2]-l[S])/p,height:(l[S+1]-l[S+5])/m});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-b,y:m-(w[1]-v)},A=new om(S,[0,0,p,m],1,f.#m/2,!0,.001);for(let R=0,O=w.length;R<O;R+=2)S.x=w[R]-b,S.y=m-(w[R+1]-v),A.add(S);const{id:E,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);f.#b({highlightOutlines:A.getOutlines(),highlightId:E,clipPathId:T}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Et._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#z(),outlines:this.#M(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#P(s)?null:(s.id=this.annotationElementId,s)}#P(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class EE{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){ue("Not implemented")}}class Rt extends Et{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#i=null;static#r=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:s}=e.drawLayer.draw(Rt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(e))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){ue("Not implemented")}static get typesMap(){ue("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(Rt.#s.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,e[r]]);return t}_updateProperty(t,e,s){const r=this._drawingOptions,o=r[e],l=u=>{r.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,s,r]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,s*(l/o),r*(o/l)];case 180:return[1-t,1-e,s,r];case 270:return[1-e,t,s*(l/o),r*(o/l)];default:return[t,e,s,r]}}#p(){const{x:t,y:e,width:s,height:r,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,s*(o/l),r*(l/o)];case 180:return[1-t,1-e,s,r];case 270:return[e,1-t,s*(o/l),r*(l/o)];default:return[t,e,s,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:t,y:e,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[u,h]}=this;switch((o*4+l)/90){case 1:return[1-e-r,t,r,s];case 2:return[1-t-s,1-e-r,s,r];case 3:return[e,1-t-s,r,s];case 4:return[t,e-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-e,t,s*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-e,r*(h/u),s*(u/h)];case 7:return[e-s*(u/h),1-t-r*(h/u),s*(u/h),r*(h/u)];case 8:return[t-s,e-r,s,r];case 9:return[1-e,t-s,r,s];case 10:return[1-t,1-e,s,r];case 11:return[e-r,1-t,r,s];case 12:return[t-r*(h/u),e,r*(h/u),s*(u/h)];case 13:return[1-e-s*(u/h),t-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-t,1-e-s*(u/h),r*(h/u),s*(u/h)];case 15:return[e,1-t,s*(u/h),r*(h/u)];default:return[t,e,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,r,o){ue("Not implemented")}static startDrawing(t,e,s,r){const{target:o,offsetX:l,offsetY:u,pointerId:h,pointerType:f}=r;if(Rt.#a&&Rt.#a!==f)return;const{viewport:{rotation:p}}=t,{width:m,height:b}=o.getBoundingClientRect(),v=Rt.#n=new AbortController,w=t.combinedSignal(v);if(Rt.#r||=h,Rt.#a??=f,window.addEventListener("pointerup",S=>{Rt.#r===S.pointerId?this._endDraw(S):Rt.#o?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointercancel",S=>{Rt.#r===S.pointerId?this._currentParent.endDrawingSession():Rt.#o?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointerdown",S=>{Rt.#a===S.pointerType&&((Rt.#o||=new Set).add(S.pointerId),Rt.#s.isCancellable()&&(Rt.#s.removeLastElement(),Rt.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Zn,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{S.timeStamp===Rt.#c&&xe(S)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),Rt.#s){t.drawLayer.updateProperties(this._currentDrawId,Rt.#s.startNew(l,u,m,b,p));return}e.updateUIForDefaultProperties(this),Rt.#s=this.createDrawerInstance(l,u,m,b,p),Rt.#i=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Rt.#i.toSVGProperties(),Rt.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Rt.#c=-1,!Rt.#s)return;const{offsetX:e,offsetY:s,pointerId:r}=t;if(Rt.#r===r){if(Rt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Rt.#s.add(e,s)),Rt.#c=t.timeStamp,xe(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Rt.#s=null,Rt.#i=null,Rt.#a=null,Rt.#c=NaN),Rt.#n&&(Rt.#n.abort(),Rt.#n=null,Rt.#r=NaN,Rt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Rt.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Rt.#s,r=this._currentDrawId,o=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:qt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(qt.DRAW_STEP),!Rt.#s.isEmpty()){const{pageDimensions:[s,r],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Rt.#s.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:Rt.#i,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,r,o,l){ue("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:u}}=e.viewport,h=this.deserializeDraw(l,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,s);return f.createDrawingOptions(t),f.#l({drawOutlines:h}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([e,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class kz{#t=new Float64Array(6);#e;#s;#n;#i;#r;#a="";#o=0;#c=new Ql;#l;#d;constructor(t,e,s,r,o,l){this.#l=s,this.#d=r,this.#n=o,this.#i=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#s=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#i=e)}#h(t,e){return mt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[s,r,o,l]=this.#t.subarray(2,6),u=t-o,h=e-l;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#r.push(t,e),isNaN(s)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,l,t,e],0),this.#e.push(...mt.createBezierPoints(s,r,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,r,o){this.#l=s,this.#d=r,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const u=this.#s.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#s.push({line:l,points:this.#r}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let t=0,e=this.#s.length;t<e;t++){const{line:s,points:r}=this.#s[t];this.#e=s,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=mt.svgRound(this.#e[4]),e=mt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#r.length<=6){const r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const r=mt.svgRound(this.#e[10]),o=mt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${r} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[l,u,h,f,p,m]=this.#e.slice(r,r+6).map(mt.svgRound);s.push(`C${l} ${u} ${h} ${f} ${p} ${m}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,s,r){const o=this.#s.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#s,t,e,s,this.#n,this.#i,r),this.#t=null,this.#e=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Ql extends mt{#t;#e=0;#s;#n;#i;#r;#a;#o;#c;build(t,e,s,r,o,l,u){this.#i=e,this.#r=s,this.#a=r,this.#o=o,this.#c=l,this.#s=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${mt.svgRound(e[4])} ${mt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${mt.svgRound(e[10])} ${mt.svgRound(e[11])}`);continue}for(let s=6,r=e.length;s<r;s+=6){const[o,l,u,h,f,p]=e.subarray(s,s+6).map(mt.svgRound);t.push(`C${o} ${l} ${u} ${h} ${f} ${p}`)}}return t.join("")}serialize([t,e,s,r],o){const l=[],u=[],[h,f,p,m]=this.#d();let b,v,w,S,A,E,T,R,O;switch(this.#o){case 0:O=mt._rescale,b=t,v=e+r,w=s,S=-r,A=t+h*s,E=e+(1-f-m)*r,T=t+(h+p)*s,R=e+(1-f)*r;break;case 90:O=mt._rescaleAndSwap,b=t,v=e,w=s,S=r,A=t+f*s,E=e+h*r,T=t+(f+m)*s,R=e+(h+p)*r;break;case 180:O=mt._rescale,b=t+s,v=e,w=-s,S=r,A=t+(1-h-p)*s,E=e+f*r,T=t+(1-h)*s,R=e+(f+m)*r;break;case 270:O=mt._rescaleAndSwap,b=t+s,v=e+r,w=-s,S=-r,A=t+(1-f-m)*s,E=e+(1-h-p)*r,T=t+(1-f)*s,R=e+(1-h)*r;break}for(const{line:D,points:z}of this.#n)l.push(O(D,b,v,w,S,o?new Array(D.length):null)),u.push(O(z,b,v,w,S,o?new Array(z.length):null));return{lines:l,points:u,rect:[A,E,T,R]}}static deserialize(t,e,s,r,o,{paths:{lines:l,points:u},rotation:h,thickness:f}){const p=[];let m,b,v,w,S;switch(h){case 0:S=mt._rescale,m=-t/s,b=e/r+1,v=1/s,w=-1/r;break;case 90:S=mt._rescaleAndSwap,m=-e/r,b=-t/s,v=1/r,w=1/s;break;case 180:S=mt._rescale,m=t/s+1,b=-e/r,v=-1/s,w=1/r;break;case 270:S=mt._rescaleAndSwap,m=e/r+1,b=t/s+1,v=-1/r,w=-1/s;break}if(!l){l=[];for(const E of u){const T=E.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const R=new Float32Array(3*(T-2));l.push(R);let[O,D,z,N]=E.subarray(0,4);R.set([NaN,NaN,NaN,NaN,O,D],0);for(let U=4;U<T;U+=2){const H=E[U],V=E[U+1];R.set(mt.createBezierPoints(O,D,z,N,H,V),(U-2)*3),[O,D,z,N]=[z,N,H,V]}}}for(let E=0,T=l.length;E<T;E++)p.push({line:S(l[E].map(R=>R??NaN),m,b,v,w),points:S(u[E].map(R=>R??NaN),m,b,v,w)});const A=new this.prototype.constructor;return A.build(p,s,r,1,h,f,o),A}#l(t=this.#c){const e=this.#s+t/2*this.#a;return this.#o%180===0?[e/this.#i,e/this.#r]:[e/this.#r,e/this.#i]}#d(){const[t,e,s,r]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,s-2*o,r-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)gt.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],l=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,p,m,b,v,w]=r.subarray(u,u+6);gt.bezierBoundingBox(o,l,f,p,m,b,v,w,t),o=v,l=w}}const[e,s]=this.#l();t[0]=un(t[0]-e,0,1),t[1]=un(t[1]-s,0,1),t[2]=un(t[2]+e,0,1),t[3]=un(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#c=t;const[r,o]=this.#l(),[l,u]=[r-e,o-s],h=this.#t;return h[0]-=l,h[1]-=u,h[2]+=2*l,h[3]+=2*u,h}updateParentDimensions([t,e],s){const[r,o]=this.#l();this.#i=t,this.#r=e,this.#a=s;const[l,u]=this.#l(),h=l-r,f=u-o,p=this.#t;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(mt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,r=0,o=0,l=0,u=0,h=0;switch(this.#e){case 90:r=e/t,o=-t/e,u=t;break;case 180:s=-1,l=-1,u=t,h=e;break;case 270:r=-e/t,o=t/e,h=e;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${mt.svgRound(u)} ${mt.svgRound(h)})`}getPathResizingSVGProperties([t,e,s,r]){const[o,l]=this.#l(),[u,h,f,p]=this.#t;if(Math.abs(f-o)<=mt.PRECISION||Math.abs(p-l)<=mt.PRECISION){const S=t+s/2-(u+f/2),A=e+r/2-(h+p/2);return{path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${A})`}}}const m=(s-2*o)/(f-2*o),b=(r-2*l)/(p-2*l),v=f/s,w=p/r;return{path:{"transform-origin":`${mt.svgRound(u)} ${mt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${mt.svgRound(o)} ${mt.svgRound(l)}) scale(${m} ${b}) translate(${mt.svgRound(-o)} ${mt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,s,r]){const[o,l]=this.#l(),u=this.#t,[h,f,p,m]=u;if(u[0]=t,u[1]=e,u[2]=s,u[3]=r,Math.abs(p-o)<=mt.PRECISION||Math.abs(m-l)<=mt.PRECISION){const A=t+s/2-(h+p/2),E=e+r/2-(f+m/2);for(const{line:T,points:R}of this.#n)mt._translate(T,A,E,T),mt._translate(R,A,E,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(p-2*o),v=(r-2*l)/(m-2*l),w=-b*(h+o)+t+o,S=-v*(f+l)+e+l;if(b!==1||v!==1||w!==0||S!==0)for(const{line:A,points:E}of this.#n)mt._rescale(A,w,S,b,v,A),mt._rescale(E,w,S,b,v,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[r,o]=s,l=this.#t,u=t-l[0],h=e-l[1];if(this.#i===r&&this.#r===o)for(const{line:f,points:p}of this.#n)mt._translate(f,u,h,f),mt._translate(p,u,h,p);else{const f=this.#i/r,p=this.#r/o;this.#i=r,this.#r=o;for(const{line:m,points:b}of this.#n)mt._rescale(m,u,h,f,p,m),mt._rescale(b,u,h,f,p,b);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${mt.svgRound(t[0])} ${mt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Lh extends EE{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Et._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Lh(this._viewParameters);return t.updateAll(this),t}}class cg extends Rt{static _type="ink";static _editorType=kt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Et.initialize(t,e),this._defaultDrawingOptions=new Lh(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return zt(this,"typesMap",new Map([[qt.INK_THICKNESS,"stroke-width"],[qt.INK_COLOR,"stroke"],[qt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,r,o){return new kz(t,e,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,r,o,l){return Ql.deserialize(t,e,s,r,o,l)}static async deserialize(t,e,s){let r=null;if(t instanceof og){const{data:{inkLists:l,rect:u,rotation:h,id:f,color:p,opacity:m,borderStyle:{rawWidth:b},popupRef:v,richText:w,contentsObj:S,creationDate:A,modificationDate:E},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:kt.INK,color:Array.from(p),thickness:b,opacity:m,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:v,richText:w,comment:S?.str||null,creationDate:A,modificationDate:E}}const o=await super.deserialize(t,e,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Ml(this),[["colorPicker",this._colorPicker]]}get colorType(){return qt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=cg.getDefaultDrawingOptions({stroke:gt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:Et._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:e,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class lm extends Ql{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Lu=8,cl=3;class wr{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,r){return s-=t,r-=e,s===0?r>0?0:4:s===1?r+6:2-r}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,s,r,o,l,u){const h=this.#e(s,r,o,l);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,m=this.#s[2*p],b=this.#s[2*p+1];if(t[(s+m)*e+(r+b)]!==0)return p}return-1}static#i(t,e,s,r,o,l,u){const h=this.#e(s,r,o,l);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,m=this.#s[2*p],b=this.#s[2*p+1];if(t[(s+m)*e+(r+b)]!==0)return p}return-1}static#r(t,e,s,r){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=r?1:0;for(let p=1;p<s-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*s-1-p]=0;let u=1,h;const f=[];for(let p=1;p<s-1;p++){h=1;for(let m=1;m<e-1;m++){const b=p*e+m,v=l[b];if(v===0)continue;let w=p,S=m;if(v===1&&l[b-1]===0)u+=1,S-=1;else if(v>=1&&l[b+1]===0)u+=1,S+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const A=[m,p],E=S===m+1,T={isHole:E,points:A,id:u,parent:0};f.push(T);let R;for(const B of f)if(B.id===h){R=B;break}R?R.isHole?T.parent=E?R.parent:h:T.parent=E?h:R.parent:T.parent=E?h:0;const O=this.#n(l,e,p,m,w,S,0);if(O===-1){l[b]=-u,l[b]!==1&&(h=Math.abs(l[b]));continue}let D=this.#s[2*O],z=this.#s[2*O+1];const N=p+D,U=m+z;w=N,S=U;let H=p,V=m;for(;;){const B=this.#i(l,e,H,V,w,S,1);D=this.#s[2*B],z=this.#s[2*B+1];const W=H+D,at=V+z;A.push(at,W);const ot=H*e+V;if(l[ot+1]===0?l[ot]=-u:l[ot]===1&&(l[ot]=u),W===p&&at===m&&H===N&&V===U){l[b]!==1&&(h=Math.abs(l[b]));break}else w=H,S=V,H=W,V=at}}}return f}static#a(t,e,s,r){if(s-e<=4){for(let N=e;N<s-2;N+=2)r.push(t[N],t[N+1]);return}const o=t[e],l=t[e+1],u=t[s-4]-o,h=t[s-3]-l,f=Math.hypot(u,h),p=u/f,m=h/f,b=p*l-m*o,v=h/u,w=1/f,S=Math.atan(v),A=Math.cos(S),E=Math.sin(S),T=w*(Math.abs(A)+Math.abs(E)),R=w*(1-T+T**2),O=Math.max(Math.atan(Math.abs(E+A)*R),Math.atan(Math.abs(E-A)*R));let D=0,z=e;for(let N=e+2;N<s-2;N+=2){const U=Math.abs(b-p*t[N+1]+m*t[N]);U>D&&(z=N,D=U)}D>(f*O)**2?(this.#a(t,e,z+2,r),this.#a(t,z,s,r)):r.push(o,l)}static#o(t){const e=[],s=t.length;return this.#a(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#c(t,e,s,r,o,l){const u=new Float32Array(l**2),h=-2*r**2,f=l>>1;for(let S=0;S<l;S++){const A=(S-f)**2;for(let E=0;E<l;E++)u[S*l+E]=Math.exp((A+(E-f)**2)/h)}const p=new Float32Array(256),m=-2*o**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/m);const b=t.length,v=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let A=0;A<e;A++){const E=S*e+A,T=t[E];let R=0,O=0;for(let z=0;z<l;z++){const N=S+z-f;if(!(N<0||N>=s))for(let U=0;U<l;U++){const H=A+U-f;if(H<0||H>=e)continue;const V=t[N*e+H],B=u[z*l+U]*p[Math.abs(V-T)];R+=V*B,O+=B}}const D=v[E]=Math.round(R/O);w[D]++}return[v,w]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#d(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let u=0,h=s.length;u<h;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const l=255/(r-o);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let e,s=-1/0,r=-1/0;const o=t.findIndex(h=>h!==0);let l=o,u=o;for(e=o;e<256;e++){const h=t[e];h>s&&(e-l>r&&(r=e-l,u=e-1),s=h,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let l=s,u=r;if(s>o||r>o){let b=s,v=r,w=Math.log2(Math.max(s,r)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){l=Math.ceil(b/2),u=Math.ceil(v/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(t,0,0,b,v,0,0,l,u),b=l,v=u,t!==e&&t.close(),t=T.transferToImageBitmap()}const A=Math.min(o/l,o/u);l=Math.round(l*A),u=Math.round(u*A)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[this.#d(p),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:r},o,l,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const m=200,b=p.font=`${s} ${r} ${m}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:A,fontBoundingBoxAscent:E,fontBoundingBoxDescent:T,width:R}=p.measureText(t),O=1.5,D=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||0,R)*O),z=Math.ceil(Math.max(Math.abs(S)+Math.abs(A)||m,Math.abs(E)+Math.abs(T)||m)*O);f=new OffscreenCanvas(D,z),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=b,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,z),p.fillStyle="black",p.fillText(t,D*(O-1)/2,z*(3-O)/2);const N=this.#d(p.getImageData(0,0,D,z).data),U=this.#l(N),H=this.#h(U),V=this.#r(N,D,z,H);return this.processDrawnLines({lines:{curves:V,width:D,height:z},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,s,r,o){const[l,u,h]=this.#f(t),[f,p]=this.#c(l,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#h(p),b=this.#r(f,u,h,m);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:e,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([e,s]=[s,e]);const{curves:h,width:f,height:p}=t,m=t.thickness??0,b=[],v=Math.min(e/f,s/p),w=v/e,S=v/s,A=[];for(const{points:T}of h){const R=l?this.#o(T):T;if(!R)continue;A.push(R);const O=R.length,D=new Float32Array(O),z=new Float32Array(3*(O===2?2:O-2));if(b.push({line:z,points:D}),O===2){D[0]=R[0]*w,D[1]=R[1]*S,z.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[N,U,H,V]=R;N*=w,U*=S,H*=w,V*=S,D.set([N,U,H,V],0),z.set([NaN,NaN,NaN,NaN,N,U],0);for(let B=4;B<O;B+=2){const W=D[B]=R[B]*w,at=D[B+1]=R[B+1]*S;z.set(mt.createBezierPoints(N,U,H,V,W,at),(B-2)*3),[N,U,H,V]=[H,V,W,at]}}if(b.length===0)return null;const E=u?new lm:new Ql;return E.build(b,e,s,1,r,u?0:m,o),{outline:E,newCurves:A,areContours:u,thickness:m,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:r,height:o}){let l=1/0,u=-1/0,h=0;for(const R of t){h+=R.length;for(let O=2,D=R.length;O<D;O++){const z=R[O]-R[O-2];l=Math.min(l,z),u=Math.max(u,z)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,m=Lu+cl*p,b=new Uint32Array(m);let v=0;b[v++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=r,b[v++]=o,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(s??0)),b[v++]=p,b[v++]=f.BYTES_PER_ELEMENT;for(const R of t)b[v++]=R.length-2,b[v++]=R[0],b[v++]=R[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const A=f.prototype.constructor;for(const R of t){const O=new A(R.length-2);for(let D=2,z=R.length;D<z;D++)O[D-2]=R[D]-R[D-2];S.write(O)}S.close();const E=await new Response(w.readable).arrayBuffer(),T=new Uint8Array(E);return qA(T)}static async decompressSignature(t){try{const e=nF(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const R of s)l||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),l.set(R,u),u+=R.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],m=h[3],b=h[4]===0,v=h[5],w=h[6],S=h[7],A=[],E=(Lu+cl*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,E);break}u=0;for(let R=0;R<w;R++){const O=h[cl*R+Lu],D=new Float32Array(O+2);A.push(D);for(let z=0;z<cl-1;z++)D[z]=h[cl*R+Lu+z+1];for(let z=0;z<O;z++)D[z+2]=D[z]+T[u++]}return{areContours:b,thickness:v,outlines:A,width:p,height:m}}catch(e){return Mt(`decompressSignature: ${e}`),null}}}class ug extends EE{constructor(){super(),super.updateProperties({fill:Et._defaultLineColor,"stroke-width":0})}clone(){const t=new ug;return t.updateAll(this),t}}class hg extends Lh{constructor(t){super(t),super.updateProperties({stroke:Et._defaultLineColor,"stroke-width":1})}clone(){const t=new hg(this._viewParameters);return t.updateAll(this),t}}class zs extends Rt{#t=!1;#e=null;#s=null;#n=null;static _type="signature";static _editorType=kt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Et.initialize(t,e),this._defaultDrawingOptions=new ug,this._defaultDrawnSignatureOptions=new hg(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return zt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:r,mustSmooth:o,areContours:l,description:u,uuid:h,heightInPage:f}=this.#s,{rawDims:{pageWidth:p,pageHeight:m},rotation:b}=this.parent.viewport,v=wr.processDrawnLines({lines:r,pageWidth:p,pageHeight:m,rotation:b,innerMargin:zs._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(v,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:r,height:o}=this.#s,l=Math.max(r,o),u=wr.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,r){const{x:o,y:l}=this,{outline:u}=this.#s=t;this.#t=u instanceof lm,this.description=s;let h;this.#t?h=zs.getDefaultDrawingOptions():(h=zs._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:r}=this.parent.viewport;return wr.process(t,e,s,r,zs._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return wr.extractContoursFromText(t,e,s,r,o,zs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:r}=this.parent.viewport;return wr.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:r,innerMargin:zs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=zs.getDefaultDrawingOptions():(this._drawingOptions=zs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:e,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,s,r,o,l){return l.areContours?lm.deserialize(t,e,s,r,o,l):Ql.deserialize(t,e,s,r,o,l)}static async deserialize(t,e,s){const r=await super.deserialize(t,e,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#n=t.uuid,r}}class Mz extends Et{#t=null;#e=null;#s=null;#n=null;#i=null;#r="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=kt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#i=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Et.initialize(t,e)}static isHandlingMimeForPasting(t){return ah.includes(t)}static paste(t,e){e.pasteEditor({mode:kt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=ah.join(",");const e=this._uiManager._signal;this.#s=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#n||this.#i||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:s}=this.#t;const[r,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*r,s=this.height*o;else if(e>l*r||s>l*o){const h=Math.min(l*r/e,l*o/s);e*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:r,height:o}=this.#t,l=new Ss;let u=this.#t,h=r,f=o,p=null;if(e){if(r>e||o>e){const z=Math.min(e/r,e/o);h=Math.floor(r*z),f=Math.floor(o*z)}p=document.createElement("canvas");const b=p.width=Math.ceil(h*l.sx),v=p.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(b,v));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":rF.isDarkMode&&(S="#8f8f9d",A="#42414d");const E=15,T=E*l.sx,R=E*l.sy,O=new OffscreenCanvas(T*2,R*2),D=O.getContext("2d");D.fillStyle=S,D.fillRect(0,0,T*2,R*2),D.fillStyle=A,D.fillRect(0,0,T,R),D.fillRect(T,R,T,R),w.fillStyle=w.createPattern(O,"repeat"),w.fillRect(0,0,b,v),w.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let m=null;if(s){let b,v;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,r>t||o>t){const A=Math.min(t/r,t/o);b=Math.floor(r*A),v=Math.floor(o*A),this.#l||(u=this.#u(b,v))}const S=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,v),m={width:b,height:v,data:S.getImageData(0,0,b,v).data}}return{canvas:p,width:h,height:f,imageData:m}}#u(t,e){const{width:s,height:r}=this.#t;let o=s,l=r,u=this.#t;for(;o>2*t||l>2*e;){const h=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(u,0,0,h,f,0,0,o,l),u=p.transferToImageBitmap()}return u}#m(){const[t,e]=this.parentDimensions,{width:s,height:r}=this,o=new Ss,l=Math.ceil(s*t*o.sx),u=Math.ceil(r*e*o.sy),h=this.#a;if(!h||h.width===l&&h.height===u)return;h.width=l,h.height=u;const f=this.#l?this.#t:this.#u(l,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,r=Math.round(this.width*e*Fr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Fr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let r=null,o=!1;if(t instanceof SE){const{data:{rect:S,rotation:A,id:E,structParent:T,popupRef:R,richText:O,contentsObj:D,creationDate:z,modificationDate:N},container:U,parent:{page:{pageNumber:H}},canvas:V}=t;let B,W;V?(delete t.canvas,{id:B,bitmap:W}=s.imageManager.getFromCanvas(U.id,V),V.remove()):(o=!0,t._hasNoCanvas=!0);const at=(await e._structTree.getAriaAttributes(`${Ym}${E}`))?.get("aria-label")||"";r=t={annotationType:kt.STAMP,bitmapId:B,bitmap:W,pageIndex:H-1,rect:S.slice(0),rotation:A,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:at},isSvg:!1,structParent:T,popupRef:R,richText:O,comment:D?.str||null,creationDate:z,modificationDate:N}}const l=await super.deserialize(t,e,s),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:p,isSvg:m,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):p&&s.imageManager.isValidId(p)?(l.#e=p,h&&(l.#t=h)):l.#n=f,l.#l=m;const[v,w]=l.pageDimensions;return l.width=(u[2]-u[0])/v,l.height=(u[3]-u[1])/w,b&&(l.altTextData=b),l._initialData=r,t.comment&&l.setCommentData(t),l.#d=!!r,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(e===null)return s;e.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Is{#t;#e=!1;#s=null;#n=null;#i=null;#r=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([Ze,cg,Mz,De,zs].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:f,l10n:p}){const m=[...Is.#m.values()];if(!Is._initialized){Is._initialized=!0;for(const b of m)b.initialize(p,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=s,this.#t=o,this.#s=l,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===kt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#w(),t){case kt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case kt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case kt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===kt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const s of Is.#m.values())e.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.div.classList.toggle("disabled",!t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=this.#s;if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const s=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:u,timeStamp:h}=r,f=this.#p;if(h-f>500){this.#p=h;return}this.#p=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(l,u);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let b;const v=new RegExp(`^${Rl}[0-9]+$`);for(const S of m)if(v.test(S.id)){b=S.id;break}if(!b)return;const w=this.#r.get(b);w?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:s,capture:!0})}const t=this.#s;if(t){const s=new Map,r=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let h=r.get(u);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=s.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const s of Is.#m.values())e.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:s}=Qe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),De.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),Et.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#i&&(t._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return Is.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#x(),o=this.getNextId(),l=this.#E({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Is.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,s={}){const r=this.getNextId(),o=this.#E({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:t,y:e,width:s,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,e+r),f=(o+u)/2-t,p=(l+h)/2-e,[m,b]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:m,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#x(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Qe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===kt.STAMP||s===kt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===kt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=Qe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,s){const r=this.#u.findParent(e,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#w(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Zi(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#w();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Zi(this.div,{rotation:s}),e!==s)for(const r of this.#r.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ke{#t=null;#e=new Map;#s=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return zt(this,"_svgFactory",new Nl)}static#i(t,[e,s,r,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*e}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#r(){const t=Ke._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const s=Ke._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${e}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Ke._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r}#o(t,e){for(const[s,r]of Object.entries(e))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,e=!1,s=!1){const r=Ke.#n++,o=this.#r(),l=Ke._svgFactory.createElement("defs");o.append(l);const u=Ke._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(r,u);const f=s?this.#a(l,h):null,p=Ke._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const s=Ke.#n++,r=this.#r(),o=Ke._svgFactory.createElement("defs");r.append(o);const l=Ke._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=Ke._svgFactory.createElement("mask");o.append(m),h=`mask_p${this.pageIndex}_${s}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const b=Ke._svgFactory.createElement("rect");m.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Ke._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=Ke._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:r,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&Ke.#i(u,r),o){const{classList:h}=u;for(const[f,p]of Object.entries(o))h.toggle(f,p)}if(l){const f=u.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:am};globalThis.pdfjsLib={AbortException:fi,AnnotationEditorLayer:Is,AnnotationEditorParamsType:qt,AnnotationEditorType:kt,AnnotationEditorUIManager:pi,AnnotationLayer:lg,AnnotationMode:Us,AnnotationType:Oe,applyOpacity:KA,build:gE,ColorPicker:Gn,createValidAbsoluteUrl:Vm,CSSConstants:ZA,DOMSVGFactory:Nl,DrawLayer:Ke,FeatureTest:Qe,fetchData:ao,findContrastColor:WA,getDocument:ng,getFilenameFromUrl:GA,getPdfFilenameFromUrl:YA,getRGB:oo,getUuid:Gm,getXfaPageViewport:XA,GlobalWorkerOptions:Xi,ImageKind:Sl,InvalidPDFException:ih,isDataScheme:Xl,isPdfFile:Mh,isValidExplicitDest:eE,MathClamp:un,noContextMenu:Zn,normalizeUnicode:VA,OPS:Za,OutputScale:Ss,PasswordResponses:HA,PDFDataRangeTransport:ig,PDFDateString:rh,PDFWorker:Ka,PermissionFlag:UA,PixelsPerInch:Fr,RenderingCancelledException:kh,renderRichText:Zm,ResponseException:Ol,setLayerDimensions:Zi,shadow:zt,SignatureExtractor:wr,stopEvent:xe,SupportedImageMimeTypes:ah,TextLayer:kl,TouchManager:Kl,updateUrlHash:qm,Util:gt,VerbosityLevel:ql,version:rg,XfaLayer:Xm};const Nz=Object.freeze(Object.defineProperty({__proto__:null,AbortException:fi,AnnotationEditorLayer:Is,AnnotationEditorParamsType:qt,AnnotationEditorType:kt,AnnotationEditorUIManager:pi,AnnotationLayer:lg,AnnotationMode:Us,AnnotationType:Oe,CSSConstants:ZA,ColorPicker:Gn,DOMSVGFactory:Nl,DrawLayer:Ke,FeatureTest:Qe,GlobalWorkerOptions:Xi,ImageKind:Sl,InvalidPDFException:ih,MathClamp:un,OPS:Za,OutputScale:Ss,PDFDataRangeTransport:ig,PDFDateString:rh,PDFWorker:Ka,PasswordResponses:HA,PermissionFlag:UA,PixelsPerInch:Fr,RenderingCancelledException:kh,ResponseException:Ol,SignatureExtractor:wr,SupportedImageMimeTypes:ah,TextLayer:kl,TouchManager:Kl,Util:gt,VerbosityLevel:ql,XfaLayer:Xm,applyOpacity:KA,build:gE,createValidAbsoluteUrl:Vm,fetchData:ao,findContrastColor:WA,getDocument:ng,getFilenameFromUrl:GA,getPdfFilenameFromUrl:YA,getRGB:oo,getUuid:Gm,getXfaPageViewport:XA,isDataScheme:Xl,isPdfFile:Mh,isValidExplicitDest:eE,noContextMenu:Zn,normalizeUnicode:VA,renderRichText:Zm,setLayerDimensions:Zi,shadow:zt,stopEvent:xe,updateUrlHash:qm,version:rg},Symbol.toStringTag,{value:"Module"}));var NS=Object.prototype.hasOwnProperty;function LS(n,t,e){for(e of n.keys())if(qa(e,t))return e}function qa(n,t){var e,s,r;if(n===t)return!0;if(n&&t&&(e=n.constructor)===t.constructor){if(e===Date)return n.getTime()===t.getTime();if(e===RegExp)return n.toString()===t.toString();if(e===Array){if((s=n.length)===t.length)for(;s--&&qa(n[s],t[s]););return s===-1}if(e===Set){if(n.size!==t.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=LS(t,r),!r)||!t.has(r))return!1;return!0}if(e===Map){if(n.size!==t.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=LS(t,r),!r)||!qa(s[1],t.get(r)))return!1;return!0}if(e===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(e===DataView){if((s=n.byteLength)===t.byteLength)for(;s--&&n.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===t.byteLength)for(;s--&&n[s]===t[s];);return s===-1}if(!e||typeof n=="object"){s=0;for(e in n)if(NS.call(n,e)&&++s&&!NS.call(t,e)||!(e in t)||!qa(n[e],t[e]))return!1;return Object.keys(t).length===s}}return n!==n&&t!==t}function Jl(n){let t=!1;return{promise:new Promise((s,r)=>{n.then(o=>!t&&s(o)).catch(o=>!t&&r(o))}),cancel(){t=!0}}}const Lz=["onCopy","onCut","onPaste"],Pz=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Fz=["onFocus","onBlur"],zz=["onInput","onInvalid","onReset","onSubmit"],jz=["onLoad","onError"],Bz=["onKeyDown","onKeyPress","onKeyUp"],Iz=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Uz=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Hz=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],$z=["onSelect"],Vz=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],qz=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Gz=["onScroll"],Yz=["onWheel"],Xz=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Zz=["onTransitionEnd"],Kz=["onToggle"],Wz=["onChange"],Qz=[...Lz,...Pz,...Fz,...zz,...jz,...Bz,...Iz,...Uz,...Hz,...$z,...Vz,...qz,...Gz,...Yz,...Xz,...Zz,...Wz,...Kz];function _E(n,t){const e={};for(const s of Qz){const r=n[s];r&&(t?e[s]=(o=>r(o,t(s))):e[s]=r)}return e}var Jz="Invariant failed";function ce(n,t){if(!n)throw new Error(Jz)}var Cp,PS;function tj(){if(PS)return Cp;PS=1;var n=function(){};return Cp=n,Cp}var ej=tj();const dn=ZS(ej),TE=k.createContext(null),nj="noopener noreferrer nofollow";class sj{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ce(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){ce(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,s){t.href=e,t.rel=this.externalLinkRel||nj,t.target=s?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{ce(this.pdfDocument),ce(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{ce(Array.isArray(e));const s=e[0];new Promise(r=>{ce(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{r(o)}).catch(()=>{ce(!1)}):typeof s=="number"?r(s):ce(!1)}).then(r=>{const o=r+1;ce(this.pdfViewer),ce(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:r,pageNumber:o})})})}goToPage(t){const e=t-1;ce(this.pdfViewer),ce(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Ga({children:n,type:t}){return _.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:n})}const FS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function ij(n,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Wa(){return k.useReducer(ij,{value:void 0,error:void 0})}const Ph=typeof window<"u",CE=Ph&&window.location.protocol==="file:";function rj(n){return typeof n<"u"}function br(n){return rj(n)&&n!==null}function aj(n){return typeof n=="string"}function oj(n){return n instanceof ArrayBuffer}function lj(n){return ce(Ph),n instanceof Blob}function cm(n){return aj(n)&&/^data:/.test(n)}function zS(n){ce(cm(n));const[t="",e=""]=n.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function cj(){return Ph&&window.devicePixelRatio||1}const RE="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function jS(){dn(!CE,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${RE}`)}function uj(){dn(!CE,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${RE}`)}function jr(n){n?.cancel&&n.cancel()}function um(n,t){return Object.defineProperty(n,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function hj(n){return n.name==="RenderingCancelledException"}function dj(n){return new Promise((t,e)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return e(new Error("Error while reading a file."));t(s.result)},s.onerror=r=>{if(!r.target)return e(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:fj}=Nz,pj=(n,t)=>{switch(t){case FS.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");n(e);break}case FS.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");n(e);break}}};function BS(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const mj=k.forwardRef(function({children:t,className:e,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:h,loading:f="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:b,onLoadProgress:v,onLoadSuccess:w,onPassword:S=pj,onSourceError:A,onSourceSuccess:E,options:T,renderMode:R,rotate:O,scale:D,...z},N){const[U,H]=Wa(),{value:V,error:B}=U,[W,at]=Wa(),{value:ot,error:dt}=W,L=k.useRef(new sj),$=k.useRef([]),it=k.useRef(void 0),ft=k.useRef(void 0);l&&l!==it.current&&BS(l)&&(dn(!qa(l,it.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),it.current=l),T&&T!==ft.current&&(dn(!qa(T,ft.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ft.current=T);const _t=k.useRef({scrollPageIntoView:Bt=>{const{dest:Xt,pageNumber:he,pageIndex:fe=he-1}=Bt;if(m){m({dest:Xt,pageIndex:fe,pageNumber:he});return}const _s=$.current[fe];if(_s){_s.scrollIntoView();return}dn(!1,`An internal link leading to page ${he} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});k.useImperativeHandle(N,()=>({linkService:L,pages:$,viewer:_t}),[]);function M(){E&&E()}function X(){B&&(dn(!1,B.toString()),A&&A(B))}function nt(){H({type:"RESET"})}k.useEffect(nt,[l,H]);const ct=k.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return cm(l)?{data:zS(l)}:(jS(),{url:l});if(l instanceof fj)return{range:l};if(oj(l))return{data:l};if(Ph&&lj(l))return{data:await dj(l)};if(ce(typeof l=="object"),ce(BS(l)),"url"in l&&typeof l.url=="string"){if(cm(l.url)){const{url:Bt,...Xt}=l;return{data:zS(Bt),...Xt}}jS()}return l},[l]);k.useEffect(()=>{const Bt=Jl(ct());return Bt.promise.then(Xt=>{H({type:"RESOLVE",value:Xt})}).catch(Xt=>{H({type:"REJECT",error:Xt})}),()=>{jr(Bt)}},[ct,H]),k.useEffect(()=>{if(!(typeof V>"u")){if(V===!1){X();return}M()}},[V]);function vt(){ot&&(w&&w(ot),$.current=new Array(ot.numPages),L.current.setDocument(ot))}function xt(){dt&&(dn(!1,dt.toString()),b&&b(dt))}k.useEffect(function(){at({type:"RESET"})},[at,V]),k.useEffect(function(){if(!V)return;const Xt=T?{...V,...T}:V,he=ng(Xt);v&&(he.onProgress=v),S&&(he.onPassword=S);const fe=he,_s=fe.promise.then(Ts=>{at({type:"RESOLVE",value:Ts})}).catch(Ts=>{fe.destroyed||at({type:"REJECT",error:Ts})});return()=>{_s.finally(()=>fe.destroy())}},[T,at,V]),k.useEffect(()=>{if(!(typeof ot>"u")){if(ot===!1){xt();return}vt()}},[ot]),k.useEffect(function(){L.current.setViewer(_t.current),L.current.setExternalLinkRel(r),L.current.setExternalLinkTarget(o)},[r,o]);const St=k.useCallback((Bt,Xt)=>{$.current[Bt]=Xt},[]),Jt=k.useCallback(Bt=>{delete $.current[Bt]},[]),jt=k.useMemo(()=>({imageResourcesPath:h,linkService:L.current,onItemClick:m,pdf:ot,registerPage:St,renderMode:R,rotate:O,scale:D,unregisterPage:Jt}),[h,m,ot,St,R,O,D,Jt]),Zt=k.useMemo(()=>_E(z,()=>ot),[z,ot]);function qe(){function Bt(he){return!!he?.pdf}if(!Bt(jt))throw new Error("pdf is undefined");const Xt=typeof t=="function"?t(jt):t;return _.jsx(TE.Provider,{value:jt,children:Xt})}function fn(){return l?ot==null?_.jsx(Ga,{type:"loading",children:typeof f=="function"?f():f}):ot===!1?_.jsx(Ga,{type:"error",children:typeof s=="function"?s():s}):qe():_.jsx(Ga,{type:"no-data",children:typeof p=="function"?p():p})}return _.jsx("div",{className:Wi("react-pdf__Document",e),ref:u,...Zt,children:fn()})});function OE(){return k.useContext(TE)}function DE(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.filter(Boolean);if(e.length<=1){var s=e[0];return s||null}return function(o){for(var l=0,u=e;l<u.length;l++){var h=u[l];typeof h=="function"?h(o):h&&(h.current=o)}}}const kE=k.createContext(null);function Fh(){return k.useContext(kE)}function gj(){const n=OE(),t=Fh();ce(t);const e={...n,...t},{imageResourcesPath:s,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:h,page:f,pdf:p,renderForms:m,rotate:b,scale:v=1}=e;ce(p),ce(f),ce(r);const[w,S]=Wa(),{value:A,error:E}=w,T=k.useRef(null);dn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){A&&l&&l(A)}function O(){E&&(dn(!1,E.toString()),o&&o(E))}k.useEffect(function(){S({type:"RESET"})},[S,f]),k.useEffect(function(){if(!f)return;const H=Jl(f.getAnnotations()),V=H;return H.promise.then(B=>{S({type:"RESOLVE",value:B})}).catch(B=>{S({type:"REJECT",error:B})}),()=>{jr(V)}},[S,f]),k.useEffect(()=>{if(A!==void 0){if(A===!1){O();return}R()}},[A]);function D(){h&&h()}function z(U){dn(!1,`${U}`),u&&u(U)}const N=k.useMemo(()=>f.getViewport({scale:v,rotation:b}),[f,b,v]);return k.useEffect(function(){if(!p||!f||!r||!A)return;const{current:H}=T;if(!H)return;const V=N.clone({dontFlip:!0}),B={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:p.annotationStorage,commentManager:null,div:H,l10n:null,linkService:r,page:f,structTreeLayer:null,viewport:V},W={annotations:A,annotationStorage:p.annotationStorage,div:H,imageResourcesPath:s,linkService:r,page:f,renderForms:m,viewport:V};H.innerHTML="";try{new lg(B).render(W),D()}catch(at){z(at)}return()=>{}},[A,s,r,f,p,m,N]),_.jsx("div",{className:Wi("react-pdf__Page__annotations","annotationLayer"),ref:T})}const ME={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},yj=/^H(\d+)$/;function bj(n){return n in ME}function zh(n){return"children"in n}function NE(n){return zh(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function vj(n){const t={};if(zh(n)){const{role:e}=n,s=e.match(yj);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(bj(e)){const r=ME[e];r&&(t.role=r)}}return t}function LE(n){const t={};if(zh(n)){if(n.alt!==void 0&&(t["aria-label"]=n.alt),n.lang!==void 0&&(t.lang=n.lang),NE(n)){const[e]=n.children;if(e){const s=LE(e);return{...t,...s}}}}else"id"in n&&(t["aria-owns"]=n.id);return t}function wj(n){return n?{...vj(n),...LE(n)}:null}function PE({className:n,node:t}){const e=k.useMemo(()=>wj(t),[t]),s=k.useMemo(()=>!zh(t)||NE(t)?null:t.children.map((r,o)=>_.jsx(PE,{node:r},o)),[t]);return _.jsx("span",{className:n,...e,children:s})}function Sj(){const n=Fh();ce(n);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=n,[s,r]=Wa(),{value:o,error:l}=s,{customTextRenderer:u,page:h}=n;function f(){o&&e&&e(o)}function p(){l&&(dn(!1,l.toString()),t&&t(l))}return k.useEffect(function(){r({type:"RESET"})},[r,h]),k.useEffect(function(){if(u||!h)return;const b=Jl(h.getStructTree()),v=b;return b.promise.then(w=>{r({type:"RESOLVE",value:w})}).catch(w=>{r({type:"REJECT",error:w})}),()=>jr(v)},[u,h,r]),k.useEffect(()=>{if(o!==void 0){if(o===!1){p();return}f()}},[o]),o?_.jsx(PE,{className:"react-pdf__Page__structTree structTree",node:o}):null}const IS=Us;function xj(n){const t=Fh();ce(t);const e={...t,...n},{_className:s,canvasBackground:r,devicePixelRatio:o=cj(),onRenderError:l,onRenderSuccess:u,page:h,renderForms:f,renderTextLayer:p,rotate:m,scale:b}=e,{canvasRef:v}=n;ce(h);const w=k.useRef(null);function S(){h&&u&&u(um(h,b))}function A(O){hj(O)||(dn(!1,O.toString()),l&&l(O))}const E=k.useMemo(()=>h.getViewport({scale:b*o,rotation:m}),[o,h,m,b]),T=k.useMemo(()=>h.getViewport({scale:b,rotation:m}),[h,m,b]);k.useEffect(function(){if(!h)return;h.cleanup();const{current:D}=w;if(!D)return;D.width=E.width,D.height=E.height,D.style.width=`${Math.floor(T.width)}px`,D.style.height=`${Math.floor(T.height)}px`,D.style.visibility="hidden";const z={annotationMode:f?IS.ENABLE_FORMS:IS.ENABLE,canvas:D,canvasContext:D.getContext("2d",{alpha:!1}),viewport:E};r&&(z.background=r);const N=h.render(z),U=N;return N.promise.then(()=>{D.style.visibility="",S()}).catch(A),()=>jr(U)},[r,h,f,E,T]);const R=k.useCallback(()=>{const{current:O}=w;O&&(O.width=0,O.height=0)},[]);return k.useEffect(()=>R,[R]),_.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:DE(v,w),style:{display:"block",userSelect:"none"},children:p?_.jsx(Sj,{}):null})}function Aj(n){return"str"in n}function Ej(){const n=Fh();ce(n);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:h,rotate:f,scale:p}=n;ce(l);const[m,b]=Wa(),{value:v,error:w}=m,S=k.useRef(null);dn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){v&&s&&s(v)}function E(){w&&(dn(!1,w.toString()),e&&e(w))}k.useEffect(function(){b({type:"RESET"})},[l,b]),k.useEffect(function(){if(!l)return;const U=Jl(l.getTextContent()),H=U;return U.promise.then(V=>{b({type:"RESOLVE",value:V})}).catch(V=>{b({type:"REJECT",error:V})}),()=>jr(H)},[l,b]),k.useEffect(()=>{if(v!==void 0){if(v===!1){E();return}A()}},[v]);const T=k.useCallback(()=>{o&&o()},[o]),R=k.useCallback(N=>{dn(!1,N.toString()),r&&r(N)},[r]);function O(){const N=S.current;N&&N.classList.add("selecting")}function D(){const N=S.current;N&&N.classList.remove("selecting")}const z=k.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);return k.useLayoutEffect(function(){if(!l||!v)return;const{current:U}=S;if(!U)return;U.innerHTML="";const H=l.streamTextContent({includeMarkedContent:!0}),V={container:U,textContentSource:H,viewport:z},B=new kl(V),W=B;return B.render().then(()=>{const at=document.createElement("div");at.className="endOfContent",U.append(at);const ot=U.querySelectorAll('[role="presentation"]');if(t){let dt=0;v.items.forEach((L,$)=>{if(!Aj(L))return;const it=ot[dt];if(!it)return;const ft=t({pageIndex:u,pageNumber:h,itemIndex:$,...L});it.innerHTML=ft,dt+=L.str&&L.hasEOL?2:1})}T()}).catch(R),()=>jr(W)},[t,R,T,l,u,h,v,z]),_.jsx("div",{className:Wi("react-pdf__Page__textContent","textLayer"),onMouseUp:D,onMouseDown:O,ref:S})}const US=1;function _j(n){const e={...OE(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:l,children:u,className:h,customRenderer:f,customTextRenderer:p,devicePixelRatio:m,error:b="Failed to load the page.",height:v,inputRef:w,loading:S="Loading page",noData:A="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:R,onGetStructTreeSuccess:O,onGetTextError:D,onGetTextSuccess:z,onLoadError:N,onLoadSuccess:U,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:V,onRenderError:B,onRenderSuccess:W,onRenderTextLayerError:at,onRenderTextLayerSuccess:ot,pageIndex:dt,pageNumber:L,pdf:$,registerPage:it,renderAnnotationLayer:ft=!0,renderForms:_t=!1,renderMode:M="canvas",renderTextLayer:X=!0,rotate:nt,scale:ct=US,unregisterPage:vt,width:xt,...St}=e,[Jt,jt]=Wa(),{value:Zt,error:qe}=Jt,fn=k.useRef(null);ce($);const Bt=br(L)?L-1:dt??null,Xt=L??(br(dt)?dt+1:null),he=nt??(Zt?Zt.rotate:null),fe=k.useMemo(()=>{if(!Zt)return null;let pt=1;const Pt=ct??US;if(xt||v){const It=Zt.getViewport({scale:1,rotation:he});xt?pt=xt/It.width:v&&(pt=v/It.height)}return Pt*pt},[v,Zt,he,ct,xt]);k.useEffect(function(){return()=>{br(Bt)&&r&&vt&&vt(Bt)}},[r,$,Bt,vt]);function _s(){if(U){if(!Zt||!fe)return;U(um(Zt,fe))}if(r&&it){if(!br(Bt)||!fn.current)return;it(Bt,fn.current)}}function Ts(){qe&&(dn(!1,qe.toString()),N&&N(qe))}k.useEffect(function(){jt({type:"RESET"})},[jt,$,Bt]),k.useEffect(function(){if(!$||!Xt)return;const Pt=Jl($.getPage(Xt)),It=Pt;return Pt.promise.then(Ue=>{jt({type:"RESOLVE",value:Ue})}).catch(Ue=>{jt({type:"REJECT",error:Ue})}),()=>jr(It)},[jt,$,Xt]),k.useEffect(()=>{if(Zt!==void 0){if(Zt===!1){Ts();return}_s()}},[Zt,fe]);const yi=k.useMemo(()=>br(Bt)&&Xt&&br(he)&&br(fe)?{_className:s,canvasBackground:o,customTextRenderer:p,devicePixelRatio:m,onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:R,onGetStructTreeSuccess:O,onGetTextError:D,onGetTextSuccess:z,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:V,onRenderError:B,onRenderSuccess:W,onRenderTextLayerError:at,onRenderTextLayerSuccess:ot,page:Zt,pageIndex:Bt,pageNumber:Xt,renderForms:_t,renderTextLayer:X,rotate:he,scale:fe}:null,[s,o,p,m,E,T,R,O,D,z,H,V,B,W,at,ot,Zt,Bt,Xt,_t,X,he,fe]),bi=k.useMemo(()=>_E(St,()=>Zt&&(fe?um(Zt,fe):void 0)),[St,Zt,fe]),F=`${Bt}@${fe}/${he}`;function Y(){switch(M){case"custom":return ce(f),_.jsx(f,{},`${F}_custom`);case"none":return null;default:return _.jsx(xj,{canvasRef:l},`${F}_canvas`)}}function J(){return X?_.jsx(Ej,{},`${F}_text`):null}function ut(){return ft?_.jsx(gj,{},`${F}_annotations`):null}function ht(){function pt(It){return!!It?.page}if(!pt(yi))throw new Error("page is undefined");const Pt=typeof u=="function"?u(yi):u;return _.jsxs(kE.Provider,{value:yi,children:[Y(),J(),ut(),Pt]})}function lt(){return Xt?$===null||Zt===void 0||Zt===null?_.jsx(Ga,{type:"loading",children:typeof S=="function"?S():S}):$===!1||Zt===!1?_.jsx(Ga,{type:"error",children:typeof b=="function"?b():b}):ht():_.jsx(Ga,{type:"no-data",children:typeof A=="function"?A():A})}return _.jsx("div",{className:Wi(s,h),"data-page-number":Xt,ref:DE(w,fn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${fe}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...bi,children:lt()})}uj();Xi.workerSrc="pdf.worker.mjs";Xi.workerSrc=`//unpkg.com/pdfjs-dist@${rg}/build/pdf.worker.min.mjs`;const Tj=({file:n,className:t=""})=>{const{t:e}=gi(),[s,r]=k.useState(null),[o,l]=k.useState(1),[u,h]=k.useState(null),[f,p]=k.useState(1),[m,b]=k.useState(600),v=k.useRef(null);k.useEffect(()=>{const B=()=>{if(v.current){const W=v.current.offsetWidth;b(Math.min(W-32,800))}};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),k.useEffect(()=>{const B=W=>{W.key==="ArrowLeft"?A():W.key==="ArrowRight"&&E()};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[o,s]);const w=({numPages:B})=>{r(B),h(null)},S=B=>{console.error("Error loading PDF:",B),h("Failed to load PDF file")},A=()=>{l(B=>Math.max(B-1,1))},E=()=>{l(B=>Math.min(B+1,s||B))},T=()=>{l(1)},R=()=>{s&&l(s)},O=()=>{p(B=>Math.min(B+.25,3))},D=()=>{p(B=>Math.max(B-.25,.5))},z=()=>{p(1)},N=B=>{const W=parseInt(B.target.value);W>=1&&W<=s&&l(W)};if(!n)return null;const U=URL.createObjectURL(n),H=n.type,V=(n.size/1024).toFixed(1);return H.startsWith("image/")?_.jsxs("div",{className:`flex flex-col gap-4 ${t}`,ref:v,children:[_.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("span",{className:"material-symbols-outlined text-primary text-[24px]",children:"image"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate max-w-[200px]",children:n.name}),_.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[V," KB"]})]})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:O,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Zoom in",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-600 dark:text-slate-400",children:"zoom_in"})}),_.jsx("button",{onClick:D,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Zoom out",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-600 dark:text-slate-400",children:"zoom_out"})}),_.jsx("button",{onClick:z,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Reset zoom",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-600 dark:text-slate-400",children:"fit_screen"})})]})]}),_.jsx("div",{className:"relative w-full border border-slate-200 dark:border-slate-700 rounded-lg overflow-auto bg-slate-50 dark:bg-slate-800 shadow-sm",children:_.jsx("div",{className:"flex justify-center items-center min-h-[400px] p-4",children:_.jsx("img",{src:U,alt:"File preview",style:{transform:`scale(${f})`,transition:"transform 0.2s ease"},className:"max-w-full h-auto rounded"})})})]}):H==="application/pdf"?_.jsxs("div",{className:`flex flex-col gap-4 ${t}`,ref:v,children:[_.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("span",{className:"material-symbols-outlined text-red-500 text-[24px]",children:"picture_as_pdf"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate max-w-[200px]",children:n.name}),_.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[V," KB ",s&&` ${s} ${s===1?"page":"pages"}`]})]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:D,disabled:f<=.5,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Zoom out",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-600 dark:text-slate-400",children:"zoom_out"})}),_.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 min-w-[45px] text-center",children:[Math.round(f*100),"%"]}),_.jsx("button",{onClick:O,disabled:f>=3,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Zoom in",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-600 dark:text-slate-400",children:"zoom_in"})}),_.jsx("button",{onClick:z,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Reset zoom",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-600 dark:text-slate-400",children:"fit_screen"})})]})]}),u?_.jsxs("div",{className:"w-full p-12 text-center border border-red-200 dark:border-red-800 rounded-lg bg-red-50 dark:bg-red-900/20",children:[_.jsx("span",{className:"material-symbols-outlined text-5xl text-red-500 dark:text-red-400 mb-4 block",children:"error"}),_.jsx("p",{className:"text-red-800 dark:text-red-200 font-semibold mb-2",children:"Failed to load PDF"}),_.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:u})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"relative w-full border border-slate-200 dark:border-slate-700 rounded-lg overflow-auto bg-slate-100 dark:bg-slate-800 shadow-sm",children:_.jsx("div",{className:"flex justify-center items-center min-h-[500px] p-4",children:_.jsx(mj,{file:U,onLoadSuccess:w,onLoadError:S,loading:_.jsxs("div",{className:"flex flex-col items-center justify-center p-16 gap-4",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full"}),_.jsx("span",{className:"material-symbols-outlined absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-primary text-[20px]",children:"description"})]}),_.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Loading PDF..."})]}),children:_.jsx("div",{style:{transform:`scale(${f})`,transformOrigin:"top center",transition:"transform 0.2s ease"},children:_.jsx(_j,{pageNumber:o,renderTextLayer:!1,renderAnnotationLayer:!1,width:m,className:"shadow-lg"})})})})}),s&&s>0&&_.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:T,disabled:o<=1,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-700 dark:text-slate-300",children:"first_page"})}),_.jsxs("button",{onClick:A,disabled:o<=1,className:"flex items-center gap-1 px-3 py-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium shadow-sm",children:[_.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"chevron_left"}),_.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),_.jsxs("button",{onClick:E,disabled:o>=s,className:"flex items-center gap-1 px-3 py-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium shadow-sm",children:[_.jsx("span",{className:"hidden sm:inline",children:"Next"}),_.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"chevron_right"})]}),_.jsx("button",{onClick:R,disabled:o>=s,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:_.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-700 dark:text-slate-300",children:"last_page"})})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Page"}),_.jsx("input",{type:"number",min:"1",max:s,value:o,onChange:N,className:"w-16 px-2 py-1 text-center text-sm font-semibold rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none"}),_.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["of ",s]})]}),_.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-xs text-slate-500 dark:text-slate-500",children:[_.jsx("span",{className:"px-2 py-1 rounded bg-slate-200 dark:bg-slate-700 font-mono",children:""}),_.jsx("span",{className:"px-2 py-1 rounded bg-slate-200 dark:bg-slate-700 font-mono",children:""}),_.jsx("span",{children:"to navigate"})]})]})]})]}):_.jsxs("div",{className:`w-full p-12 text-center border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800 ${t}`,children:[_.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-400 mb-4 block",children:"description"}),_.jsx("p",{className:"text-slate-700 dark:text-slate-300 font-semibold mb-1",children:"Preview not available"}),_.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"This file type is not supported for preview"})]})},Cj=()=>{const{t:n}=gi(),[t,e]=k.useState(null),[s,r]=k.useState(null),[o,l]=k.useState(""),[u,h]=k.useState(!1),[f,p]=k.useState(""),m=k.useRef(null),b=FP(),v=zP(),w=$P(),S=B=>B?Object.keys(Sk).includes(B.type)?B.size>Sw?`File too large. Maximum size is ${Sw/1024/1024}MB.`:null:"Invalid file type. Please upload PDF, JPG, or PNG files.":"No file selected",A=B=>{l("");const W=S(B);if(W){l(W);return}e(B),r(null)},E=B=>{const W=B.target.files?.[0];W&&A(W)},T=B=>{B.preventDefault(),B.stopPropagation(),h(!0)},R=B=>{B.preventDefault(),B.stopPropagation(),h(!1)},O=B=>{B.preventDefault(),B.stopPropagation()},D=B=>{B.preventDefault(),B.stopPropagation(),h(!1);const W=B.dataTransfer.files?.[0];W&&A(W)},z=async()=>{if(t){l(""),p(""),r(null);try{const B=await b.mutateAsync(t),W=await v.mutateAsync(B.documentId);r(W)}catch(B){l(B.message||"Failed to process invoice. Please try again.")}}},N=async B=>{l(""),p("");try{const W={businessName:B.vendorName,transactionDate:B.date,amountBeforeVat:B.totalAmount*.83,amountAfterVat:B.totalAmount,vatAmount:B.totalAmount*.17,serviceDescription:B.description,category:B.category,businessId:null,invoiceNumber:null,documentId:null};await w.mutateAsync(W),p("Expense saved successfully!"),setTimeout(()=>{e(null),r(null),p("")},2e3)}catch(W){l(W.message||"Failed to save expense. Please try again.")}},U=()=>{r(null),e(null),l(""),p("")},H=b.isPending||v.isPending,V=w.isPending;return _.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start",children:[_.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-4",children:[_.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 shadow-sm border border-slate-200 dark:border-slate-800",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900 dark:text-white",children:n("upload.title")}),o&&_.jsx("div",{className:"mb-4",children:_.jsx(Hm,{title:n("upload.uploadError"),message:o,onClose:()=>l("")})}),f&&_.jsx("div",{className:"mb-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 p-4",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400",children:"check_circle"}),_.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:f})]})}),_.jsx("input",{ref:m,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:E,className:"hidden"}),_.jsxs("div",{onClick:()=>m.current?.click(),onDragEnter:T,onDragLeave:R,onDragOver:O,onDrop:D,className:`flex flex-col items-center justify-center gap-4 rounded-lg border-2 border-dashed ${u?"border-primary bg-primary/5 dark:bg-primary/10":"border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50"} hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors px-6 py-12 cursor-pointer`,children:[_.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center text-primary mb-2",children:_.jsx("span",{className:"material-symbols-outlined text-3xl",children:t?"check_circle":"upload_file"})}),_.jsx("div",{className:"flex flex-col items-center gap-1 text-center",children:t?_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"text-slate-900 dark:text-white text-base font-bold",children:t.name}),_.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[(t.size/1024).toFixed(1)," KB"]})]}):_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"text-slate-900 dark:text-white text-base font-bold",children:n("upload.dragDrop")}),_.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs",children:n("upload.fileTypes")})]})})]}),_.jsx("div",{className:"mt-6",children:_.jsx("button",{onClick:z,disabled:!t||H,className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-lg h-12 bg-primary hover:bg-primary-hover text-white text-base font-bold shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:H?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),_.jsx("span",{children:n("upload.processing")})]}):_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"rocket_launch"}),_.jsx("span",{children:n("upload.processButton")})]})})})]}),t&&_.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 shadow-sm border border-slate-200 dark:border-slate-800",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900 dark:text-white",children:n("upload.preview")}),_.jsx(Tj,{file:t})]})]}),_.jsx("div",{className:"lg:col-span-7 flex flex-col gap-4",children:_.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 lg:p-8 shadow-sm border border-slate-200 dark:border-slate-800",children:[_.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-200 dark:border-slate-800",children:[_.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2 text-slate-900 dark:text-white",children:[_.jsx("span",{className:"material-symbols-outlined text-primary",children:"data_info_alert"}),n("upload.extractedData")]}),_.jsx("span",{className:"px-3 py-1 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:n("upload.preview")})]}),s?_.jsx(GP,{data:s,onSave:N,onDiscard:U,loading:V}):_.jsxs("div",{className:"text-center py-12 text-slate-400 dark:text-slate-500",children:[_.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-50",children:"description"}),_.jsx("p",{className:"text-sm",children:n("upload.uploadInstruction")})]})]})})]})},Rj=({onApply:n,onClear:t,loading:e})=>{const{t:s}=gi(),[r,o]=k.useState({dateRange:"last30",startDate:"",endDate:"",minAmount:"",maxAmount:"",category:"",businessName:""}),l=(m,b)=>{o(v=>({...v,[m]:b}))},u=()=>{const m=new Date;let b=r.startDate,v=r.endDate;if(r.dateRange==="last30"){const S=new Date(m);S.setDate(m.getDate()-30),b=S.toISOString().split("T")[0],v=m.toISOString().split("T")[0]}else if(r.dateRange==="thisMonth")b=new Date(m.getFullYear(),m.getMonth(),1).toISOString().split("T")[0],v=m.toISOString().split("T")[0];else if(r.dateRange==="lastQuarter"){const S=new Date(m);S.setMonth(m.getMonth()-3),b=S.toISOString().split("T")[0],v=m.toISOString().split("T")[0]}const w={startDate:b||void 0,endDate:v||void 0,minAmount:r.minAmount?parseFloat(r.minAmount):void 0,maxAmount:r.maxAmount?parseFloat(r.maxAmount):void 0,category:r.category||void 0,businessName:r.businessName||void 0};n(w)},h=()=>{o({dateRange:"last30",startDate:"",endDate:"",minAmount:"",maxAmount:"",category:"",businessName:""}),t()},f=[{value:"last30",label:s("dateRanges.last30")},{value:"thisMonth",label:s("dateRanges.thisMonth")},{value:"lastQuarter",label:s("dateRanges.lastQuarter")},{value:"custom",label:s("dateRanges.custom")}],p=Tm.map(m=>({value:m.value,label:s(`categories.${m.value}`)}));return _.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_.jsx(sh,{label:s("expenses.dateRange"),options:f,value:r.dateRange,onChange:m=>l("dateRange",m.target.value)}),r.dateRange==="custom"&&_.jsxs(_.Fragment,{children:[_.jsx(wn,{label:s("dateRanges.startDate"),type:"date",value:r.startDate,onChange:m=>l("startDate",m.target.value)}),_.jsx(wn,{label:s("dateRanges.endDate"),type:"date",value:r.endDate,onChange:m=>l("endDate",m.target.value)})]}),_.jsx(wn,{label:s("expenses.minAmount"),type:"number",step:"0.01",placeholder:"0.00",value:r.minAmount,onChange:m=>l("minAmount",m.target.value)}),_.jsx(wn,{label:s("expenses.maxAmount"),type:"number",step:"0.01",placeholder:"0.00",value:r.maxAmount,onChange:m=>l("maxAmount",m.target.value)}),_.jsx(sh,{label:s("expenses.category"),options:[{value:"",label:s("categories.all")},...p],value:r.category,onChange:m=>l("category",m.target.value)}),_.jsx(wn,{label:s("expenses.businessName"),placeholder:s("expenses.searchPlaceholder"),value:r.businessName,onChange:m=>l("businessName",m.target.value)})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx(Pr,{type:"button",variant:"primary",onClick:u,loading:e,children:s("expenses.applyFilters")}),_.jsx(Pr,{type:"button",variant:"secondary",onClick:h,children:s("expenses.clearFilters")})]})]})},FE=6048e5,Oj=864e5,zE=6e4,jE=36e5,HS=Symbol.for("constructDateFrom");function mi(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&HS in n?n[HS](t):n instanceof Date?new n.constructor(t):new Date(t)}function Kn(n,t){return mi(t||n,n)}let Dj={};function jh(){return Dj}function Ll(n,t){const e=jh(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Kn(n,t?.in),o=r.getDay(),l=(o<s?7:0)+o-s;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function lh(n,t){return Ll(n,{...t,weekStartsOn:1})}function BE(n,t){const e=Kn(n,t?.in),s=e.getFullYear(),r=mi(e,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const o=lh(r),l=mi(e,0);l.setFullYear(s,0,4),l.setHours(0,0,0,0);const u=lh(l);return e.getTime()>=o.getTime()?s+1:e.getTime()>=u.getTime()?s:s-1}function $S(n){const t=Kn(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function kj(n,...t){const e=mi.bind(null,t.find(s=>typeof s=="object"));return t.map(e)}function VS(n,t){const e=Kn(n,t?.in);return e.setHours(0,0,0,0),e}function Mj(n,t,e){const[s,r]=kj(e?.in,n,t),o=VS(s),l=VS(r),u=+o-$S(o),h=+l-$S(l);return Math.round((u-h)/Oj)}function Nj(n,t){const e=BE(n,t),s=mi(n,0);return s.setFullYear(e,0,4),s.setHours(0,0,0,0),lh(s)}function Lj(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Pj(n){return!(!Lj(n)&&typeof n!="number"||isNaN(+Kn(n)))}function Fj(n,t){const e=Kn(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const zj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jj=(n,t,e)=>{let s;const r=zj[n];return typeof r=="string"?s=r:t===1?s=r.one:s=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+s:s+" ago":s};function Rp(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const Bj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ij={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Uj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hj={date:Rp({formats:Bj,defaultWidth:"full"}),time:Rp({formats:Ij,defaultWidth:"full"}),dateTime:Rp({formats:Uj,defaultWidth:"full"})},$j={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vj=(n,t,e,s)=>$j[n];function ul(n){return(t,e)=>{const s=e?.context?String(e.context):"standalone";let r;if(s==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,u=e?.width?String(e.width):l;r=n.formattingValues[u]||n.formattingValues[l]}else{const l=n.defaultWidth,u=e?.width?String(e.width):n.defaultWidth;r=n.values[u]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(t):t;return r[o]}}const qj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Yj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Xj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wj=(n,t)=>{const e=Number(n),s=e%100;if(s>20||s<10)switch(s%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Qj={ordinalNumber:Wj,era:ul({values:qj,defaultWidth:"wide"}),quarter:ul({values:Gj,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ul({values:Yj,defaultWidth:"wide"}),day:ul({values:Xj,defaultWidth:"wide"}),dayPeriod:ul({values:Zj,defaultWidth:"wide",formattingValues:Kj,defaultFormattingWidth:"wide"})};function hl(n){return(t,e={})=>{const s=e.width,r=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],o=t.match(r);if(!o)return null;const l=o[0],u=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(u)?tB(u,m=>m.test(l)):Jj(u,m=>m.test(l));let f;f=n.valueCallback?n.valueCallback(h):h,f=e.valueCallback?e.valueCallback(f):f;const p=t.slice(l.length);return{value:f,rest:p}}}function Jj(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function tB(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function eB(n){return(t,e={})=>{const s=t.match(n.matchPattern);if(!s)return null;const r=s[0],o=t.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=e.valueCallback?e.valueCallback(l):l;const u=t.slice(r.length);return{value:l,rest:u}}}const nB=/^(\d+)(th|st|nd|rd)?/i,sB=/\d+/i,iB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rB={any:[/^b/i,/^(a|c)/i]},aB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oB={any:[/1/i,/2/i,/3/i,/4/i]},lB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hB={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pB={ordinalNumber:eB({matchPattern:nB,parsePattern:sB,valueCallback:n=>parseInt(n,10)}),era:hl({matchPatterns:iB,defaultMatchWidth:"wide",parsePatterns:rB,defaultParseWidth:"any"}),quarter:hl({matchPatterns:aB,defaultMatchWidth:"wide",parsePatterns:oB,defaultParseWidth:"any",valueCallback:n=>n+1}),month:hl({matchPatterns:lB,defaultMatchWidth:"wide",parsePatterns:cB,defaultParseWidth:"any"}),day:hl({matchPatterns:uB,defaultMatchWidth:"wide",parsePatterns:hB,defaultParseWidth:"any"}),dayPeriod:hl({matchPatterns:dB,defaultMatchWidth:"any",parsePatterns:fB,defaultParseWidth:"any"})},mB={code:"en-US",formatDistance:jj,formatLong:Hj,formatRelative:Vj,localize:Qj,match:pB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gB(n,t){const e=Kn(n,t?.in);return Mj(e,Fj(e))+1}function yB(n,t){const e=Kn(n,t?.in),s=+lh(e)-+Nj(e);return Math.round(s/FE)+1}function IE(n,t){const e=Kn(n,t?.in),s=e.getFullYear(),r=jh(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=mi(t?.in||n,0);l.setFullYear(s+1,0,o),l.setHours(0,0,0,0);const u=Ll(l,t),h=mi(t?.in||n,0);h.setFullYear(s,0,o),h.setHours(0,0,0,0);const f=Ll(h,t);return+e>=+u?s+1:+e>=+f?s:s-1}function bB(n,t){const e=jh(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=IE(n,t),o=mi(t?.in||n,0);return o.setFullYear(r,0,s),o.setHours(0,0,0,0),Ll(o,t)}function vB(n,t){const e=Kn(n,t?.in),s=+Ll(e,t)-+bB(e,t);return Math.round(s/FE)+1}function ne(n,t){const e=n<0?"-":"",s=Math.abs(n).toString().padStart(t,"0");return e+s}const $i={y(n,t){const e=n.getFullYear(),s=e>0?e:1-e;return ne(t==="yy"?s%100:s,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):ne(e+1,2)},d(n,t){return ne(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];default:return e==="am"?"a.m.":"p.m."}},h(n,t){return ne(n.getHours()%12||12,t.length)},H(n,t){return ne(n.getHours(),t.length)},m(n,t){return ne(n.getMinutes(),t.length)},s(n,t){return ne(n.getSeconds(),t.length)},S(n,t){const e=t.length,s=n.getMilliseconds(),r=Math.trunc(s*Math.pow(10,e-3));return ne(r,t.length)}},Na={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qS={G:function(n,t,e){const s=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(s,{width:"abbreviated"});case"GGGGG":return e.era(s,{width:"narrow"});default:return e.era(s,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const s=n.getFullYear(),r=s>0?s:1-s;return e.ordinalNumber(r,{unit:"year"})}return $i.y(n,t)},Y:function(n,t,e,s){const r=IE(n,s),o=r>0?r:1-r;if(t==="YY"){const l=o%100;return ne(l,2)}return t==="Yo"?e.ordinalNumber(o,{unit:"year"}):ne(o,t.length)},R:function(n,t){const e=BE(n);return ne(e,t.length)},u:function(n,t){const e=n.getFullYear();return ne(e,t.length)},Q:function(n,t,e){const s=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return ne(s,2);case"Qo":return e.ordinalNumber(s,{unit:"quarter"});case"QQQ":return e.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(s,{width:"narrow",context:"formatting"});default:return e.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,t,e){const s=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return ne(s,2);case"qo":return e.ordinalNumber(s,{unit:"quarter"});case"qqq":return e.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(s,{width:"narrow",context:"standalone"});default:return e.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,t,e){const s=n.getMonth();switch(t){case"M":case"MM":return $i.M(n,t);case"Mo":return e.ordinalNumber(s+1,{unit:"month"});case"MMM":return e.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(s,{width:"narrow",context:"formatting"});default:return e.month(s,{width:"wide",context:"formatting"})}},L:function(n,t,e){const s=n.getMonth();switch(t){case"L":return String(s+1);case"LL":return ne(s+1,2);case"Lo":return e.ordinalNumber(s+1,{unit:"month"});case"LLL":return e.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(s,{width:"narrow",context:"standalone"});default:return e.month(s,{width:"wide",context:"standalone"})}},w:function(n,t,e,s){const r=vB(n,s);return t==="wo"?e.ordinalNumber(r,{unit:"week"}):ne(r,t.length)},I:function(n,t,e){const s=yB(n);return t==="Io"?e.ordinalNumber(s,{unit:"week"}):ne(s,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):$i.d(n,t)},D:function(n,t,e){const s=gB(n);return t==="Do"?e.ordinalNumber(s,{unit:"dayOfYear"}):ne(s,t.length)},E:function(n,t,e){const s=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(s,{width:"short",context:"formatting"});default:return e.day(s,{width:"wide",context:"formatting"})}},e:function(n,t,e,s){const r=n.getDay(),o=(r-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ne(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(n,t,e,s){const r=n.getDay(),o=(r-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ne(o,t.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(n,t,e){const s=n.getDay(),r=s===0?7:s;switch(t){case"i":return String(r);case"ii":return ne(r,t.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(s,{width:"short",context:"formatting"});default:return e.day(s,{width:"wide",context:"formatting"})}},a:function(n,t,e){const r=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,t,e){const s=n.getHours();let r;switch(s===12?r=Na.noon:s===0?r=Na.midnight:r=s/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,t,e){const s=n.getHours();let r;switch(s>=17?r=Na.evening:s>=12?r=Na.afternoon:s>=4?r=Na.morning:r=Na.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let s=n.getHours()%12;return s===0&&(s=12),e.ordinalNumber(s,{unit:"hour"})}return $i.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):$i.H(n,t)},K:function(n,t,e){const s=n.getHours()%12;return t==="Ko"?e.ordinalNumber(s,{unit:"hour"}):ne(s,t.length)},k:function(n,t,e){let s=n.getHours();return s===0&&(s=24),t==="ko"?e.ordinalNumber(s,{unit:"hour"}):ne(s,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):$i.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):$i.s(n,t)},S:function(n,t){return $i.S(n,t)},X:function(n,t,e){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return YS(s);case"XXXX":case"XX":return vr(s);default:return vr(s,":")}},x:function(n,t,e){const s=n.getTimezoneOffset();switch(t){case"x":return YS(s);case"xxxx":case"xx":return vr(s);default:return vr(s,":")}},O:function(n,t,e){const s=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+GS(s,":");default:return"GMT"+vr(s,":")}},z:function(n,t,e){const s=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+GS(s,":");default:return"GMT"+vr(s,":")}},t:function(n,t,e){const s=Math.trunc(+n/1e3);return ne(s,t.length)},T:function(n,t,e){return ne(+n,t.length)}};function GS(n,t=""){const e=n>0?"-":"+",s=Math.abs(n),r=Math.trunc(s/60),o=s%60;return o===0?e+String(r):e+String(r)+t+ne(o,2)}function YS(n,t){return n%60===0?(n>0?"-":"+")+ne(Math.abs(n)/60,2):vr(n,t)}function vr(n,t=""){const e=n>0?"-":"+",s=Math.abs(n),r=ne(Math.trunc(s/60),2),o=ne(s%60,2);return e+r+t+o}const XS=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},UE=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},wB=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],s=e[1],r=e[2];if(!r)return XS(n,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",XS(s,t)).replace("{{time}}",UE(r,t))},SB={p:UE,P:wB},xB=/^D+$/,AB=/^Y+$/,EB=["D","DD","YY","YYYY"];function _B(n){return xB.test(n)}function TB(n){return AB.test(n)}function CB(n,t,e){const s=RB(n,t,e);if(console.warn(s),EB.includes(n))throw new RangeError(s)}function RB(n,t,e){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${s} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const OB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kB=/^'([^]*?)'?$/,MB=/''/g,NB=/[a-zA-Z]/;function LB(n,t,e){const s=jh(),r=s.locale??mB,o=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,u=Kn(n,e?.in);if(!Pj(u))throw new RangeError("Invalid time value");let h=t.match(DB).map(p=>{const m=p[0];if(m==="p"||m==="P"){const b=SB[m];return b(p,r.formatLong)}return p}).join("").match(OB).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const m=p[0];if(m==="'")return{isToken:!1,value:PB(p)};if(qS[m])return{isToken:!0,value:p};if(m.match(NB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});r.localize.preprocessor&&(h=r.localize.preprocessor(u,h));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:r};return h.map(p=>{if(!p.isToken)return p.value;const m=p.value;(TB(m)||_B(m))&&CB(m,t,String(n));const b=qS[m[0]];return b(u,m,r.localize,f)}).join("")}function PB(n){const t=n.match(kB);return t?t[1].replace(MB,"'"):n}function FB(n,t){const e=()=>mi(t?.in,NaN),r=IB(n);let o;if(r.date){const f=UB(r.date,2);o=HB(f.restDateString,f.year)}if(!o||isNaN(+o))return e();const l=+o;let u=0,h;if(r.time&&(u=$B(r.time),isNaN(u)))return e();if(r.timezone){if(h=VB(r.timezone),isNaN(h))return e()}else{const f=new Date(l+u),p=Kn(0,t?.in);return p.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),p.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),p}return Kn(l+u+h,t?.in)}const Pu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,BB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function IB(n){const t={},e=n.split(Pu.dateTimeDelimiter);let s;if(e.length>2)return t;if(/:/.test(e[0])?s=e[0]:(t.date=e[0],s=e[1],Pu.timeZoneDelimiter.test(t.date)&&(t.date=n.split(Pu.timeZoneDelimiter)[0],s=n.substr(t.date.length,n.length))),s){const r=Pu.timezone.exec(s);r?(t.time=s.replace(r[1],""),t.timezone=r[1]):t.time=s}return t}function UB(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=n.match(e);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?r:o*100,restDateString:n.slice((s[1]||s[2]).length)}}function HB(n,t){if(t===null)return new Date(NaN);const e=n.match(zB);if(!e)return new Date(NaN);const s=!!e[4],r=dl(e[1]),o=dl(e[2])-1,l=dl(e[3]),u=dl(e[4]),h=dl(e[5])-1;if(s)return ZB(t,u,h)?qB(t,u,h):new Date(NaN);{const f=new Date(0);return!YB(t,o,l)||!XB(t,r)?new Date(NaN):(f.setUTCFullYear(t,o,Math.max(r,l)),f)}}function dl(n){return n?parseInt(n):1}function $B(n){const t=n.match(jB);if(!t)return NaN;const e=Op(t[1]),s=Op(t[2]),r=Op(t[3]);return KB(e,s,r)?e*jE+s*zE+r*1e3:NaN}function Op(n){return n&&parseFloat(n.replace(",","."))||0}function VB(n){if(n==="Z")return 0;const t=n.match(BB);if(!t)return 0;const e=t[1]==="+"?-1:1,s=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return WB(s,r)?e*(s*jE+r*zE):NaN}function qB(n,t,e){const s=new Date(0);s.setUTCFullYear(n,0,4);const r=s.getUTCDay()||7,o=(t-1)*7+e+1-r;return s.setUTCDate(s.getUTCDate()+o),s}const GB=[31,null,31,30,31,30,31,31,30,31,30,31];function HE(n){return n%400===0||n%4===0&&n%100!==0}function YB(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(GB[t]||(HE(n)?29:28))}function XB(n,t){return t>=1&&t<=(HE(n)?366:365)}function ZB(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function KB(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function WB(n,t){return t>=0&&t<=59}const QB=(n,t="MMM dd, yyyy")=>{if(!n)return"-";try{const e=typeof n=="string"?FB(n):n;return LB(e,t)}catch(e){return console.error("Error formatting date:",e),n}},JB=(n,t="USD")=>n==null?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(n),tI=({expense:n,onCategoryChange:t,onDelete:e,updating:s,deleting:r})=>{const[o,l]=k.useState(n.category),u=async p=>{const m=p.target.value;l(m),await t(n.id,m)},h=p=>{const m=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500"],b=p.charCodeAt(0)||0;return m[b%m.length]},f=p=>p.split(" ").map(m=>m[0]).join("").substring(0,2).toUpperCase();return _.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full text-white font-bold text-sm ${h(n.vendorName||"Unknown")}`,children:f(n.vendorName||"UK")}),_.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:n.vendorName||"Unknown Vendor"})]})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-700 dark:text-slate-300",children:QB(n.date)}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-slate-900 dark:text-white",children:JB(n.totalAmount)}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-700 dark:text-slate-300",children:n.invoiceNumber||"-"}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsx("select",{value:o,onChange:u,disabled:s,className:"rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-3 py-1.5 text-sm text-slate-900 dark:text-white focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-colors disabled:opacity-50",children:Tm.map(p=>_.jsx("option",{value:p.value,children:p.label},p.value))})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:_.jsx("button",{onClick:()=>e(n.id),disabled:r,className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors disabled:opacity-50",title:"Delete expense",children:_.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})})})]})},eI=({expenses:n,loading:t,onCategoryChange:e,onDelete:s})=>{const[r,o]=k.useState(null),[l,u]=k.useState(null),h=async(p,m)=>{o(p);try{await e(p,m)}finally{o(null)}},f=async p=>{u(p);try{await s(p)}finally{u(null)}};return t?_.jsx("div",{className:"animate-pulse",children:[1,2,3,4,5].map(p=>_.jsx("div",{className:"h-16 bg-slate-200 dark:bg-slate-800 mb-2 rounded"},p))}):!n||n.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[_.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300 dark:text-slate-600 mb-4",children:"receipt_long"}),_.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No expenses found"}),_.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-sm",children:"Try adjusting your filters or upload a new invoice"})]}):_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Vendor"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Date"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Amount"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Invoice #"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Category"}),_.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Actions"})]})}),_.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.map(p=>_.jsx(tI,{expense:p,onCategoryChange:h,onDelete:f,updating:r===p.id,deleting:l===p.id},p.id))})]})})},nI=()=>{const[n,t]=k.useState({}),{data:e,isLoading:s}=HP(n),r=VP(),o=qP(),l=e?.data||[],u=e?.pagination||{totalCount:0},h=b=>{t(b)},f=()=>{t({})},p=async(b,v)=>{await r.mutateAsync({expenseId:b,data:{category:v}})},m=async b=>{confirm("Are you sure you want to delete this expense?")&&await o.mutateAsync(b)};return _.jsxs("div",{className:"flex flex-col gap-6",children:[_.jsxs("section",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-5 shadow-sm",children:[_.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-4",children:[_.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"filter_list"}),_.jsx("h2",{className:"text-base font-bold",children:"Filter Expenses"})]}),_.jsx(Rj,{onApply:h,onClear:f,loading:s})]}),_.jsxs("section",{className:"flex-1 flex flex-col bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[_.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center",children:_.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Showing"," ",_.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:u.totalCount})," ","transaction",u.totalCount!==1?"s":""]})}),_.jsx("div",{className:"flex-1",children:_.jsx(eI,{expenses:l,loading:s,onCategoryChange:p,onDelete:m})})]})]})},sI=new kO({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}});function iI(){return _.jsx(MO,{client:sI,children:_.jsx(Tk,{children:_.jsx(tO,{children:_.jsxs(DR,{children:[_.jsx(li,{path:"/login",element:_.jsx(OP,{})}),_.jsx(li,{path:"/register",element:_.jsx(DP,{})}),_.jsxs(li,{path:"/dashboard",element:_.jsx(Ck,{children:_.jsx(MP,{})}),children:[_.jsx(li,{path:"upload",element:_.jsx(Cj,{})}),_.jsx(li,{path:"expenses",element:_.jsx(nI,{})}),_.jsx(li,{index:!0,element:_.jsx(Fu,{to:"upload",replace:!0})})]}),_.jsx(li,{path:"/",element:_.jsx(Fu,{to:"/dashboard",replace:!0})}),_.jsx(li,{path:"*",element:_.jsx(Fu,{to:"/dashboard",replace:!0})})]})})})})}hT.createRoot(document.getElementById("root")).render(_.jsx(k.StrictMode,{children:_.jsx(iI,{})}));
